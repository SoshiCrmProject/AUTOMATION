(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[583],{5748:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/analytics",function(){return s(4187)}])},2684:function(e,t,s){"use strict";s.d(t,{Z:function(){return c}});var r=s(2322),a=s(9097),i=s.n(a),n=s(1297),o=s(34),l=s(2784);function c(e){let{activeHref:t}=e,{t:s}=(0,o.$G)("common"),[a,c]=(0,l.useState)(!1);(0,l.useEffect)(()=>{c(!!(localStorage.getItem("token")||sessionStorage.getItem("token")))},[]);let d=[{href:"/",label:s("navHome"),icon:"\uD83C\uDFE0"},{href:"/dashboard",label:s("navDashboard"),icon:"\uD83D\uDCCA"},{href:"/analytics",label:"Analytics",icon:"\uD83D\uDCC8"},{href:"/inventory",label:"Inventory",icon:"\uD83D\uDCE6"},{href:"/crm",label:"CRM",icon:"\uD83D\uDC65"},{href:"/orders",label:s("navOrders"),icon:"\uD83D\uDED2"},{href:"/settings",label:s("navSettings"),icon:"⚙️"},{href:"/errors",label:s("navErrors"),icon:"⚠️"},{href:"/review",label:s("navReview"),icon:"✅"},{href:"/ops",label:s("navOps"),icon:"\uD83D\uDD27"},{href:"/mappings",label:s("navMappings"),icon:"\uD83D\uDD17"},{href:"/admin/users",label:s("navAdmin"),icon:"\uD83D\uDC64"}];return(0,r.jsxs)("header",{className:"nav",children:[(0,r.jsx)("div",{style:{fontWeight:800,fontSize:20,background:"linear-gradient(135deg, var(--color-primary), var(--color-secondary))",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:"\uD83D\uDE80 AutoShip X"}),(0,r.jsxs)("div",{className:"nav-links",children:[d.map(e=>(0,r.jsxs)(i(),{href:e.href,style:{fontWeight:e.href===t?700:500,color:e.href===t?"var(--color-text)":"var(--color-text-muted)",background:e.href===t?"var(--color-elevated)":"transparent",display:"flex",alignItems:"center",gap:6},children:[(0,r.jsx)("span",{children:e.icon}),e.label]},e.href)),!a&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i(),{href:"/login",className:"btn btn-ghost",style:{fontWeight:"/login"===t?700:500,marginLeft:8},children:s("login")}),(0,r.jsx)(i(),{href:"/signup",className:"btn",style:{fontWeight:"/signup"===t?700:500},children:s("signup")})]}),(0,r.jsx)(n.Z,{})]})]})}},1297:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var r=s(2322),a=s(5632),i=s(34);function n(){let e=(0,a.useRouter)(),{t}=(0,i.$G)("common"),{locale:s,pathname:n,asPath:o,query:l}=e,c="en"===s?"ja":"en",d=t("en"===c?"langEnglish":"langJapanese"),p=t("en"===c?"langEnglishShort":"langJapaneseShort");return(0,r.jsx)("button",{className:"btn btn-ghost",style:{padding:"6px 10px",fontSize:13},onClick:()=>e.push({pathname:n,query:l},o,{locale:c}),"aria-label":t("switchLanguage",{lang:d}),children:p})}},1522:function(e,t,s){"use strict";var r=s(418),a=s(3542);let i=r.Z.create(),n=i.defaults.adapter;if(i.interceptors.request.use(e=>{{let t=localStorage.getItem("token");t&&(e.headers=e.headers||{},e.headers.Authorization="Bearer ".concat(t))}return e}),"1"===a.env.NEXT_PUBLIC_MOCK_API){let e={shops:[{id:"shop1",name:"Tokyo Shop"},{id:"shop2",name:"Osaka Shop"}],shopeeCred:{partnerId:"demo-partner-id",partnerKey:"",accessToken:"",baseUrl:"https://partner.shopeemobile.com",shopId:"shop1",shopName:"Tokyo Shop"},amazonCred:{email:"demo@example.com"},settings:{includeAmazonPoints:!1,includeDomesticShipping:!1,domesticShippingCost:0,maxShippingDays:5,minExpectedProfit:0,shopSelections:[],isActive:!0,isDryRun:!1,reviewBandPercent:0,shopOverrides:[]},orders:[],mappings:[{id:"map1",priority:1,isActive:!0,shopeeProduct:{id:"sp1",title:"Shopee Widget",sku:"SKU-1",shopeeItemId:"111",shop:{name:"Tokyo Shop"}},amazonProduct:{id:"ap1",title:"Amazon Widget",asin:"B00TEST",url:"https://amazon.co.jp/dp/B00TEST"}}],audit:[{id:"a1",action:"login",detail:{ip:"127.0.0.1"},createdAt:new Date().toISOString(),user:{email:"admin@example.com"}}],adminUsers:[{id:"u1",email:"admin@example.com",role:"admin",isActive:!0,createdAt:new Date().toISOString()},{id:"u2",email:"user@example.com",role:"user",isActive:!1,createdAt:new Date().toISOString()}]},t=new Date().toISOString();e.orders=[{id:"ord1",orderNumber:"SP-001",shop:e.shops[0],status:"pending",totalAmount:5e3,currency:"JPY",productUrl:"https://amazon.co.jp/dp/B00TEST",amazonOrder:null,errorItems:[{id:"err1",reason:"Out of stock",createdAt:t,amazonProductUrl:"https://amazon.co.jp/dp/B00TEST",productName:"Widget",shopeeOrderId:"SP-001"}]},{id:"ord2",orderNumber:"SP-002",shop:e.shops[1],status:"processed",totalAmount:12e3,currency:"JPY",productUrl:"https://amazon.co.jp/dp/B00TEST2",amazonOrder:{amazonOrderId:"AMZ-123",status:"Shipped",createdAt:t},errorItems:[]}],e.settings.shopSelections=e.shops.map(e=>({shopId:e.id,isSelected:!0})),i.defaults.adapter=async s=>{let r=(s.url||"").replace(/^https?:\/\/[^/]+/,""),a=(s.method||"get").toLowerCase(),i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200;return Promise.resolve({data:e,status:t,statusText:"OK",headers:{},config:s})};if("/api/auth/login"===r&&"post"===a||"/api/auth/signup"===r&&"post"===a)return i({token:"mock-token"});if("/api/shops"===r&&"get"===a)return i(e.shops);if("/api/credentials/shopee"===r&&"get"===a)return i(e.shopeeCred);if("/api/credentials/shopee"===r&&"post"===a)return e.shopeeCred={...s.data},i({success:!0});if("/api/credentials/amazon"===r&&"get"===a)return i(e.amazonCred);if("/api/credentials/amazon"===r&&"post"===a)return e.amazonCred={...s.data},i({success:!0});if("/api/settings"===r&&"get"===a)return i(e.settings);if("/api/settings"===r&&"post"===a)return e.settings={...s.data,shopSelections:e.settings.shopSelections},i({success:!0});if("/api/orders/recent"===r&&"get"===a)return i(e.orders);if("/api/orders/errors"===r&&"get"===a)return i(e.orders.flatMap(e=>e.errorItems.map(t=>({...t,shopeeOrderId:e.orderNumber,productName:t.productName||"Product",createdAt:t.createdAt}))));if(r.startsWith("/api/orders/")&&r.endsWith("/retry")&&"post"===a||r.startsWith("/api/orders/retry/")&&"post"===a||r.startsWith("/api/orders/manual/")&&"post"===a||"/api/orders/poll-now"===r&&"post"===a)return i({success:!0});if("/api/orders/errors/export"===r&&"get"===a)return i("product,reason\nWidget,Out of stock",200);if("/api/orders/processed/export"===r&&"get"===a)return i("orderNumber,status\nSP-002,Processed",200);if(r.startsWith("/api/orders/")&&"get"===a){let t=r.split("/").pop();return i(e.orders.find(e=>e.id===t)||e.orders[0])}return"/api/ops/queue"===r&&"get"===a?i({waiting:0,active:0,failed:0,delayed:0}):"/api/ops/amazon-test"===r&&"post"===a?i({success:!0}):"/api/ops/status"===r&&"get"===a?i({lastOrder:t,lastAmazon:{createdAt:t,status:"ok"},lastError:{createdAt:t,reason:"Mock error"}}):"/api/mappings"===r&&"get"===a?i(e.mappings):"/api/mappings"===r&&"post"===a?(e.mappings.push({id:"map-".concat(Date.now()),...s.data||{}}),i({success:!0})):"/api/mappings/import"===r&&"post"===a||"/api/products/shopee"===r&&"post"===a||"/api/products/amazon"===r&&"post"===a?i({success:!0}):"/api/products/shopee"===r&&"get"===a?i(e.mappings.map(e=>e.shopeeProduct)):"/api/products/amazon"===r&&"get"===a?i(e.mappings.map(e=>e.amazonProduct)):"/api/admin/users"===r&&"get"===a?i(e.adminUsers):r.includes("/api/admin/users/")&&r.endsWith("/toggle")&&"post"===a||r.includes("/api/admin/users/")&&r.endsWith("/reset-password")&&"post"===a?i({success:!0}):"/api/admin/audit"===r&&"get"===a?i(e.audit):n&&"function"==typeof n?n(s):i({},404)}}i.interceptors.response.use(e=>e,e=>{var t;return(null===(t=e.response)||void 0===t?void 0:t.status)===401&&(localStorage.removeItem("token"),window.location.href="/login"),Promise.reject(e)}),t.Z=i},4187:function(e,t,s){"use strict";s.r(t),s.d(t,{__N_SSG:function(){return d},default:function(){return p}});var r=s(2322),a=s(2784),i=s(6627),n=s(34),o=s(1522),l=s(2684);let c=e=>o.Z.get(e).then(e=>e.data);var d=!0;function p(){let{t:e}=(0,n.$G)("common"),[t,s]=(0,a.useState)(""),[o,d]=(0,a.useState)(30),{data:p}=(0,i.ZP)(t?"/api/analytics/daily?shopId=".concat(t,"&days=").concat(o):null,c),{data:h}=(0,i.ZP)(t?"/api/analytics/dashboard?shopId=".concat(t):null,c),{data:u}=(0,i.ZP)(t?"/api/analytics/products/performance?shopId=".concat(t,"&limit=10"):null,c),m=(null==p?void 0:p.reduce((e,t)=>e+t.revenue,0))||0,g=(null==p?void 0:p.reduce((e,t)=>e+t.ordersCount,0))||0,x=p&&p.length>0?p.reduce((e,t)=>e+t.avgProfit,0)/p.length:0;return(0,r.jsxs)("div",{className:"shell",children:[(0,r.jsx)(l.Z,{activeHref:"/analytics"}),(0,r.jsxs)("div",{className:"container",children:[(0,r.jsx)("div",{className:"hero",style:{marginBottom:32},children:(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{style:{fontSize:36,margin:0},children:"\uD83D\uDCCA Analytics & Insights"}),(0,r.jsx)("p",{style:{color:"var(--color-text-muted)",marginTop:8},children:"Track performance, monitor trends, and optimize your dropshipping operations"})]})}),(0,r.jsxs)("div",{className:"card",style:{marginBottom:24},children:[(0,r.jsx)("h3",{style:{marginTop:0},children:"Filters"}),(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:16},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"label",children:"Shop ID"}),(0,r.jsx)("input",{className:"input",type:"text",placeholder:"Enter Shop ID",value:t,onChange:e=>s(e.target.value)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"label",children:"Date Range"}),(0,r.jsxs)("select",{className:"select",value:o,onChange:e=>d(Number(e.target.value)),children:[(0,r.jsx)("option",{value:7,children:"Last 7 days"}),(0,r.jsx)("option",{value:30,children:"Last 30 days"}),(0,r.jsx)("option",{value:90,children:"Last 90 days"})]})]})]})]}),t&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"grid grid-4",style:{marginBottom:24},children:[(0,r.jsxs)("div",{className:"stat-card",children:[(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:8},children:[(0,r.jsx)("span",{style:{fontSize:28},children:"\uD83D\uDCB0"}),(0,r.jsx)("span",{style:{fontSize:13,color:"var(--color-text-muted)",fontWeight:600},children:"TOTAL REVENUE"})]}),(0,r.jsxs)("h2",{style:{fontSize:32,margin:0,color:"var(--color-success)"},children:["$",m.toLocaleString(void 0,{minimumFractionDigits:2})]}),(0,r.jsxs)("p",{style:{fontSize:13,color:"var(--color-text-light)",marginTop:8},children:["Last ",o," days"]})]}),(0,r.jsxs)("div",{className:"stat-card",children:[(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:8},children:[(0,r.jsx)("span",{style:{fontSize:28},children:"\uD83D\uDCE6"}),(0,r.jsx)("span",{style:{fontSize:13,color:"var(--color-text-muted)",fontWeight:600},children:"TOTAL ORDERS"})]}),(0,r.jsx)("h2",{style:{fontSize:32,margin:0,color:"var(--color-primary)"},children:g.toLocaleString()}),(0,r.jsx)("p",{style:{fontSize:13,color:"var(--color-text-light)",marginTop:8},children:"Fulfilled orders"})]}),(0,r.jsxs)("div",{className:"stat-card",children:[(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:8},children:[(0,r.jsx)("span",{style:{fontSize:28},children:"\uD83D\uDCC8"}),(0,r.jsx)("span",{style:{fontSize:13,color:"var(--color-text-muted)",fontWeight:600},children:"AVG MARGIN"})]}),(0,r.jsxs)("h2",{style:{fontSize:32,margin:0,color:"var(--color-secondary)"},children:[x.toFixed(2),"%"]}),(0,r.jsx)("p",{style:{fontSize:13,color:"var(--color-text-light)",marginTop:8},children:"Profit margin"})]}),(0,r.jsxs)("div",{className:"stat-card",children:[(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:8},children:[(0,r.jsx)("span",{style:{fontSize:28},children:"⚡"}),(0,r.jsx)("span",{style:{fontSize:13,color:"var(--color-text-muted)",fontWeight:600},children:"AVG ORDER VALUE"})]}),(0,r.jsxs)("h2",{style:{fontSize:32,margin:0,color:"var(--color-warning)"},children:["$",g>0?(m/g).toFixed(2):"0.00"]}),(0,r.jsx)("p",{style:{fontSize:13,color:"var(--color-text-light)",marginTop:8},children:"Per order"})]})]}),p&&p.length>0&&(0,r.jsxs)("div",{className:"card",style:{marginBottom:24},children:[(0,r.jsx)("h3",{style:{marginTop:0},children:"\uD83D\uDCC5 Daily Performance"}),(0,r.jsx)("div",{className:"table-wrapper",children:(0,r.jsxs)("table",{className:"table",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"Date"}),(0,r.jsx)("th",{children:"Orders"}),(0,r.jsx)("th",{children:"Revenue"}),(0,r.jsx)("th",{children:"Total Cost"}),(0,r.jsx)("th",{children:"Avg Profit"})]})}),(0,r.jsx)("tbody",{children:p.slice(0,10).map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:new Date(e.date).toLocaleDateString()}),(0,r.jsx)("td",{children:(0,r.jsx)("span",{className:"badge",children:e.ordersCount})}),(0,r.jsxs)("td",{style:{color:"var(--color-success)",fontWeight:600},children:["$",e.revenue.toLocaleString(void 0,{minimumFractionDigits:2})]}),(0,r.jsxs)("td",{style:{color:"var(--color-error)"},children:["$",e.totalCost.toLocaleString(void 0,{minimumFractionDigits:2})]}),(0,r.jsx)("td",{children:(0,r.jsxs)("span",{className:"pill pill-success",children:[e.avgProfit.toFixed(2),"%"]})})]},e.id))})]})})]}),u&&u.length>0&&(0,r.jsxs)("div",{className:"card",children:[(0,r.jsx)("h3",{style:{marginTop:0},children:"\uD83C\uDFC6 Top Performing Products"}),(0,r.jsx)("div",{className:"table-wrapper",children:(0,r.jsxs)("table",{className:"table",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"Product"}),(0,r.jsx)("th",{children:"Sales"}),(0,r.jsx)("th",{children:"Revenue"}),(0,r.jsx)("th",{children:"Margin"})]})}),(0,r.jsx)("tbody",{children:u.map((e,t)=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12},children:[(0,r.jsxs)("span",{className:"badge badge-success",children:["#",t+1]}),(0,r.jsx)("span",{style:{fontWeight:500},children:e.title})]})}),(0,r.jsx)("td",{children:(0,r.jsxs)("span",{className:"pill",children:[e.salesCount," orders"]})}),(0,r.jsxs)("td",{style:{color:"var(--color-success)",fontWeight:600},children:["$",e.totalRevenue.toLocaleString(void 0,{minimumFractionDigits:2})]}),(0,r.jsx)("td",{children:(0,r.jsxs)("span",{className:"pill pill-success",children:[e.avgMargin.toFixed(2),"%"]})})]},e.productId))})]})})]})]}),!t&&(0,r.jsxs)("div",{className:"alert alert-info",children:[(0,r.jsx)("span",{style:{fontSize:20},children:"ℹ️"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"Get Started"}),(0,r.jsx)("p",{style:{marginTop:4},children:"Enter your Shop ID above to view analytics and insights"})]})]})]})]})}}},function(e){e.O(0,[418,97,627,888,774,179],function(){return e(e.s=5748)}),_N_E=e.O()}]);