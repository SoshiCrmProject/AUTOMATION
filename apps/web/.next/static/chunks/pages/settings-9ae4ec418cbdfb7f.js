(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[662],{4994:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/settings",function(){return s(5582)}])},2684:function(e,t,s){"use strict";s.d(t,{Z:function(){return d}});var i=s(2322),n=s(9097),r=s.n(n),a=s(1297),o=s(34),l=s(2784);function d(e){let{activeHref:t}=e,{t:s}=(0,o.$G)("common"),[n,d]=(0,l.useState)(!1);(0,l.useEffect)(()=>{d(!!(localStorage.getItem("token")||sessionStorage.getItem("token")))},[]);let c=[{href:"/",label:s("navHome"),icon:"\uD83C\uDFE0"},{href:"/dashboard",label:s("navDashboard"),icon:"\uD83D\uDCCA"},{href:"/analytics",label:"Analytics",icon:"\uD83D\uDCC8"},{href:"/inventory",label:"Inventory",icon:"\uD83D\uDCE6"},{href:"/crm",label:"CRM",icon:"\uD83D\uDC65"},{href:"/orders",label:s("navOrders"),icon:"\uD83D\uDED2"},{href:"/settings",label:s("navSettings"),icon:"⚙️"},{href:"/errors",label:s("navErrors"),icon:"⚠️"},{href:"/review",label:s("navReview"),icon:"✅"},{href:"/ops",label:s("navOps"),icon:"\uD83D\uDD27"},{href:"/mappings",label:s("navMappings"),icon:"\uD83D\uDD17"},{href:"/admin/users",label:s("navAdmin"),icon:"\uD83D\uDC64"}];return(0,i.jsxs)("header",{className:"nav",children:[(0,i.jsx)("div",{style:{fontWeight:800,fontSize:20,background:"linear-gradient(135deg, var(--color-primary), var(--color-secondary))",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:"\uD83D\uDE80 AutoShip X"}),(0,i.jsxs)("div",{className:"nav-links",children:[c.map(e=>(0,i.jsxs)(r(),{href:e.href,style:{fontWeight:e.href===t?700:500,color:e.href===t?"var(--color-text)":"var(--color-text-muted)",background:e.href===t?"var(--color-elevated)":"transparent",display:"flex",alignItems:"center",gap:6},children:[(0,i.jsx)("span",{children:e.icon}),e.label]},e.href)),!n&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r(),{href:"/login",className:"btn btn-ghost",style:{fontWeight:"/login"===t?700:500,marginLeft:8},children:s("login")}),(0,i.jsx)(r(),{href:"/signup",className:"btn",style:{fontWeight:"/signup"===t?700:500},children:s("signup")})]}),(0,i.jsx)(a.Z,{})]})]})}},1021:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var i=s(2322),n=s(6627),r=s(1522),a=s(34);let o=e=>r.Z.get(e).then(e=>e.data);function l(){var e,t;let{t:s}=(0,a.$G)("common"),{data:r}=(0,n.ZP)("/api/settings",o),l=null==r?void 0:r.isActive,d=null==r?void 0:r.isDryRun;return(0,i.jsxs)("div",{className:"card",children:[(0,i.jsx)("h3",{style:{marginTop:0},children:s("automationStatusTitle")}),(0,i.jsxs)("div",{style:{display:"flex",gap:12,alignItems:"center"},children:[(0,i.jsx)("span",{className:"pill",style:{background:l?"#bbf7d0":"#fecdd3"},children:s(l?"on":"off")}),(0,i.jsx)("span",{className:"pill",style:{background:d?"#e0e7ff":"#e2e8f0"},children:s(d?"pillDryRun":"pillLive")})]}),(0,i.jsxs)("div",{style:{display:"grid",gap:6,marginTop:12,color:"#475569",fontSize:14},children:[(0,i.jsx)("div",{children:s("profitRuleLabel",{value:null!==(e=null==r?void 0:r.minExpectedProfit)&&void 0!==e?e:"—"})}),(0,i.jsx)("div",{children:s("maxShippingLabel",{value:null!==(t=null==r?void 0:r.maxShippingDays)&&void 0!==t?t:"—"})}),(0,i.jsxs)("div",{children:[s((null==r?void 0:r.includeAmazonPoints)?"pointsIncluded":"pointsExcluded")," \xb7"," ",s((null==r?void 0:r.includeDomesticShipping)?"domesticIncluded":"domesticExcluded")]})]})]})}},1297:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});var i=s(2322),n=s(5632),r=s(34);function a(){let e=(0,n.useRouter)(),{t}=(0,r.$G)("common"),{locale:s,pathname:a,asPath:o,query:l}=e,d="en"===s?"ja":"en",c=t("en"===d?"langEnglish":"langJapanese"),p=t("en"===d?"langEnglishShort":"langJapaneseShort");return(0,i.jsx)("button",{className:"btn btn-ghost",style:{padding:"6px 10px",fontSize:13},onClick:()=>e.push({pathname:a,query:l},o,{locale:d}),"aria-label":t("switchLanguage",{lang:c}),children:p})}},1522:function(e,t,s){"use strict";var i=s(418),n=s(3542);let r=i.Z.create(),a=r.defaults.adapter;if(r.interceptors.request.use(e=>{{let t=localStorage.getItem("token");t&&(e.headers=e.headers||{},e.headers.Authorization="Bearer ".concat(t))}return e}),"1"===n.env.NEXT_PUBLIC_MOCK_API){let e={shops:[{id:"shop1",name:"Tokyo Shop"},{id:"shop2",name:"Osaka Shop"}],shopeeCred:{partnerId:"demo-partner-id",partnerKey:"",accessToken:"",baseUrl:"https://partner.shopeemobile.com",shopId:"shop1",shopName:"Tokyo Shop"},amazonCred:{email:"demo@example.com"},settings:{includeAmazonPoints:!1,includeDomesticShipping:!1,domesticShippingCost:0,maxShippingDays:5,minExpectedProfit:0,shopSelections:[],isActive:!0,isDryRun:!1,reviewBandPercent:0,shopOverrides:[]},orders:[],mappings:[{id:"map1",priority:1,isActive:!0,shopeeProduct:{id:"sp1",title:"Shopee Widget",sku:"SKU-1",shopeeItemId:"111",shop:{name:"Tokyo Shop"}},amazonProduct:{id:"ap1",title:"Amazon Widget",asin:"B00TEST",url:"https://amazon.co.jp/dp/B00TEST"}}],audit:[{id:"a1",action:"login",detail:{ip:"127.0.0.1"},createdAt:new Date().toISOString(),user:{email:"admin@example.com"}}],adminUsers:[{id:"u1",email:"admin@example.com",role:"admin",isActive:!0,createdAt:new Date().toISOString()},{id:"u2",email:"user@example.com",role:"user",isActive:!1,createdAt:new Date().toISOString()}]},t=new Date().toISOString();e.orders=[{id:"ord1",orderNumber:"SP-001",shop:e.shops[0],status:"pending",totalAmount:5e3,currency:"JPY",productUrl:"https://amazon.co.jp/dp/B00TEST",amazonOrder:null,errorItems:[{id:"err1",reason:"Out of stock",createdAt:t,amazonProductUrl:"https://amazon.co.jp/dp/B00TEST",productName:"Widget",shopeeOrderId:"SP-001"}]},{id:"ord2",orderNumber:"SP-002",shop:e.shops[1],status:"processed",totalAmount:12e3,currency:"JPY",productUrl:"https://amazon.co.jp/dp/B00TEST2",amazonOrder:{amazonOrderId:"AMZ-123",status:"Shipped",createdAt:t},errorItems:[]}],e.settings.shopSelections=e.shops.map(e=>({shopId:e.id,isSelected:!0})),r.defaults.adapter=async s=>{let i=(s.url||"").replace(/^https?:\/\/[^/]+/,""),n=(s.method||"get").toLowerCase(),r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200;return Promise.resolve({data:e,status:t,statusText:"OK",headers:{},config:s})};if("/api/auth/login"===i&&"post"===n||"/api/auth/signup"===i&&"post"===n)return r({token:"mock-token"});if("/api/shops"===i&&"get"===n)return r(e.shops);if("/api/credentials/shopee"===i&&"get"===n)return r(e.shopeeCred);if("/api/credentials/shopee"===i&&"post"===n)return e.shopeeCred={...s.data},r({success:!0});if("/api/credentials/amazon"===i&&"get"===n)return r(e.amazonCred);if("/api/credentials/amazon"===i&&"post"===n)return e.amazonCred={...s.data},r({success:!0});if("/api/settings"===i&&"get"===n)return r(e.settings);if("/api/settings"===i&&"post"===n)return e.settings={...s.data,shopSelections:e.settings.shopSelections},r({success:!0});if("/api/orders/recent"===i&&"get"===n)return r(e.orders);if("/api/orders/errors"===i&&"get"===n)return r(e.orders.flatMap(e=>e.errorItems.map(t=>({...t,shopeeOrderId:e.orderNumber,productName:t.productName||"Product",createdAt:t.createdAt}))));if(i.startsWith("/api/orders/")&&i.endsWith("/retry")&&"post"===n||i.startsWith("/api/orders/retry/")&&"post"===n||i.startsWith("/api/orders/manual/")&&"post"===n||"/api/orders/poll-now"===i&&"post"===n)return r({success:!0});if("/api/orders/errors/export"===i&&"get"===n)return r("product,reason\nWidget,Out of stock",200);if("/api/orders/processed/export"===i&&"get"===n)return r("orderNumber,status\nSP-002,Processed",200);if(i.startsWith("/api/orders/")&&"get"===n){let t=i.split("/").pop();return r(e.orders.find(e=>e.id===t)||e.orders[0])}return"/api/ops/queue"===i&&"get"===n?r({waiting:0,active:0,failed:0,delayed:0}):"/api/ops/amazon-test"===i&&"post"===n?r({success:!0}):"/api/ops/status"===i&&"get"===n?r({lastOrder:t,lastAmazon:{createdAt:t,status:"ok"},lastError:{createdAt:t,reason:"Mock error"}}):"/api/mappings"===i&&"get"===n?r(e.mappings):"/api/mappings"===i&&"post"===n?(e.mappings.push({id:"map-".concat(Date.now()),...s.data||{}}),r({success:!0})):"/api/mappings/import"===i&&"post"===n||"/api/products/shopee"===i&&"post"===n||"/api/products/amazon"===i&&"post"===n?r({success:!0}):"/api/products/shopee"===i&&"get"===n?r(e.mappings.map(e=>e.shopeeProduct)):"/api/products/amazon"===i&&"get"===n?r(e.mappings.map(e=>e.amazonProduct)):"/api/admin/users"===i&&"get"===n?r(e.adminUsers):i.includes("/api/admin/users/")&&i.endsWith("/toggle")&&"post"===n||i.includes("/api/admin/users/")&&i.endsWith("/reset-password")&&"post"===n?r({success:!0}):"/api/admin/audit"===i&&"get"===n?r(e.audit):a&&"function"==typeof a?a(s):r({},404)}}r.interceptors.response.use(e=>e,e=>{var t;return(null===(t=e.response)||void 0===t?void 0:t.status)===401&&(localStorage.removeItem("token"),window.location.href="/login"),Promise.reject(e)}),t.Z=r},5582:function(e,t,s){"use strict";s.r(t),s.d(t,{__N_SSG:function(){return v},default:function(){return x}});var i=s(2322),n=s(34),r=s(2784);function a(e){let{shops:t,selected:s,onToggle:n}=e;return(0,i.jsx)("div",{children:t.map(e=>(0,i.jsxs)("label",{style:{display:"block",marginBottom:"6px"},children:[(0,i.jsx)("input",{type:"checkbox",checked:s.includes(e.id),onChange:()=>n(e.id)})," ",e.name]},e.id))})}var o=s(418),l=s(8406);function d(e){let{onConnected:t}=e,{t:s}=(0,n.$G)("common"),[a,d]=(0,r.useState)(""),[c,p]=(0,r.useState)(""),[u,h]=(0,r.useState)(""),[m,g]=(0,r.useState)("https://partner.shopeemobile.com"),[v,x]=(0,r.useState)(""),[f,j]=(0,r.useState)(""),[S,y]=(0,r.useState)(""),[b,D]=(0,r.useState)(!1),[N,C]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e=localStorage.getItem("token");C(!0),o.Z.get("/api/credentials/shopee",{headers:{Authorization:"Bearer ".concat(e)}}).then(e=>{e.data.partnerId&&d(e.data.partnerId),e.data.baseUrl&&g(e.data.baseUrl)}).catch(e=>{var t,i,n;return(0,l.M)(null!==(n=null==e?void 0:null===(i=e.response)||void 0===i?void 0:null===(t=i.data)||void 0===t?void 0:t.error)&&void 0!==n?n:s("genericError"),"error")}).finally(()=>C(!1))},[]);let k=async()=>{let e=localStorage.getItem("token");D(!0);try{await o.Z.post("/api/credentials/shopee",{partnerId:a,partnerKey:c,accessToken:u,baseUrl:m,shopId:v,shopName:f},{headers:{Authorization:"Bearer ".concat(e)}}),p(""),h(""),y(s("saved")),(0,l.M)(s("shopeeSaveSuccess")),null==t||t()}catch(t){var i,n,r;let e=null!==(r=null==t?void 0:null===(n=t.response)||void 0===n?void 0:null===(i=n.data)||void 0===i?void 0:i.error)&&void 0!==r?r:s("shopeeSaveError");y(e),(0,l.M)(e,"error")}finally{D(!1)}};return(0,i.jsxs)("div",{className:"card",children:[(0,i.jsx)("h3",{children:s("connectShopee")}),(0,i.jsx)("input",{className:"input",placeholder:s("partnerId"),value:a,onChange:e=>d(e.target.value)}),(0,i.jsx)("input",{className:"input",placeholder:s("partnerKey"),type:"password",value:c,onChange:e=>p(e.target.value)}),(0,i.jsx)("input",{className:"input",placeholder:s("accessToken"),type:"password",value:u,onChange:e=>h(e.target.value)}),(0,i.jsx)("input",{className:"input",placeholder:s("baseUrl"),value:m,onChange:e=>g(e.target.value)}),(0,i.jsx)("input",{className:"input",placeholder:s("shopId"),value:v,onChange:e=>x(e.target.value)}),(0,i.jsx)("input",{className:"input",placeholder:s("shopName"),value:f,onChange:e=>j(e.target.value)}),(0,i.jsx)("button",{className:"button",type:"button",onClick:k,children:b?s("loading"):s("saveCredentials")}),S&&(0,i.jsx)("p",{children:S}),N&&(0,i.jsx)("p",{children:s("loading")})]})}var c=s(1522);function p(){let{t:e}=(0,n.$G)("common"),[t,s]=(0,r.useState)([]),[o,p]=(0,r.useState)({includeAmazonPoints:!1,includeDomesticShipping:!1,domesticShippingCost:0,maxShippingDays:7,minExpectedProfit:0,shopIds:[],isActive:!1,isDryRun:!1,reviewBandPercent:0,overrides:[]}),[u,h]=(0,r.useState)(""),[m,g]=(0,r.useState)([]),[v,x]=(0,r.useState)(""),[f,j]=(0,r.useState)(""),[S,y]=(0,r.useState)(""),[b,D]=(0,r.useState)(!1),[N,C]=(0,r.useState)(!1),k=()=>{c.Z.get("/api/shops").then(e=>s(e.data)),c.Z.get("/api/settings").then(e=>{if(e.data){var t,s,i,n,r,a,o;p({includeAmazonPoints:null!==(t=e.data.includeAmazonPoints)&&void 0!==t&&t,includeDomesticShipping:null!==(s=e.data.includeDomesticShipping)&&void 0!==s&&s,domesticShippingCost:null!==(i=e.data.domesticShippingCost)&&void 0!==i?i:0,maxShippingDays:e.data.maxShippingDays,minExpectedProfit:e.data.minExpectedProfit,shopIds:(null!==(n=e.data.shopSelections)&&void 0!==n?n:[]).filter(e=>null==e?void 0:e.isSelected).map(e=>e.shopId),isActive:e.data.isActive,isDryRun:null!==(r=e.data.isDryRun)&&void 0!==r&&r,reviewBandPercent:null!==(a=e.data.reviewBandPercent)&&void 0!==a?a:0,overrides:null!==(o=e.data.shopOverrides)&&void 0!==o?o:[]})}}),c.Z.get("/api/credentials/amazon").then(e=>{var t;(null===(t=e.data)||void 0===t?void 0:t.email)&&x(e.data.email)})};(0,r.useEffect)(()=>{k()},[]);let P=async s=>{s.preventDefault(),h("");let i=[];if(t.length&&0===o.shopIds.length&&i.push(e("shopSelection")),o.maxShippingDays<=0&&i.push(e("maxShippingDays")),(void 0===o.minExpectedProfit||null===o.minExpectedProfit||Number.isNaN(o.minExpectedProfit))&&i.push(e("minProfit")),i.length){g(i),(0,l.M)(e("fieldRequired"),"error");return}g([]),D(!0);try{await c.Z.post("/api/settings",o),h(e("saved")),(0,l.M)(e("settingsSaveSuccess"))}catch(s){var n,r,a;let t=null!==(a=null==s?void 0:null===(r=s.response)||void 0===r?void 0:null===(n=r.data)||void 0===n?void 0:n.error)&&void 0!==a?a:e("settingsSaveError");h(t),(0,l.M)(t,"error")}finally{D(!1)}},I=async()=>{C(!0);try{await c.Z.post("/api/credentials/amazon",{email:v,password:f}),j(""),y(e("saved")),(0,l.M)(e("credentialsSaveSuccess"))}catch(r){var t,s,i;let n=null!==(i=null==r?void 0:null===(s=r.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.error)&&void 0!==i?i:e("credentialsSaveError");y(n),(0,l.M)(n,"error")}finally{C(!1)}},A=(e,t)=>e.find(e=>e.shopId===t.shopId)?e.map(e=>e.shopId===t.shopId?{...e,...t}:e):[...e,t];return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("form",{onSubmit:P,children:[(0,i.jsxs)("div",{className:"card",children:[(0,i.jsxs)("h3",{children:["① ",e("autoOrdering")]}),(0,i.jsx)("p",{children:e("autoOrderingDesc")}),(0,i.jsxs)("label",{children:[(0,i.jsx)("input",{type:"checkbox",checked:o.isActive,onChange:e=>p({...o,isActive:e.currentTarget.checked})})," ",o.isActive?e("on"):e("off")]})]}),(0,i.jsxs)("div",{className:"card",children:[(0,i.jsxs)("h3",{children:["③ ",e("includePoints")]}),(0,i.jsxs)("label",{children:[(0,i.jsx)("input",{type:"checkbox",checked:o.includeAmazonPoints,onChange:e=>p({...o,includeAmazonPoints:e.currentTarget.checked})})," ",e("includePointsLabel")]})]}),(0,i.jsxs)("div",{className:"card",children:[(0,i.jsxs)("h3",{children:["④ ",e("includeDomestic")]}),(0,i.jsxs)("label",{children:[(0,i.jsx)("input",{type:"checkbox",checked:o.includeDomesticShipping,onChange:e=>p({...o,includeDomesticShipping:e.target.checked})})," ",e("includeDomesticLabel")]}),(0,i.jsx)("input",{className:"input",type:"number",value:o.domesticShippingCost,onChange:e=>p({...o,domesticShippingCost:Number(e.currentTarget.value)}),placeholder:e("domesticShippingCost")})]}),(0,i.jsxs)("div",{className:"card",children:[(0,i.jsxs)("h3",{children:["⑤ ",e("maxShippingDays")]}),(0,i.jsx)("input",{className:"input",type:"number",value:o.maxShippingDays,onChange:e=>p({...o,maxShippingDays:Number(e.currentTarget.value)})})]}),(0,i.jsxs)("div",{className:"card",children:[(0,i.jsxs)("h3",{children:["⑥ ",e("minProfit")]}),(0,i.jsx)("input",{className:"input",type:"number",value:o.minExpectedProfit,onChange:e=>p({...o,minExpectedProfit:Number(e.currentTarget.value)})})]}),(0,i.jsxs)("div",{className:"card",children:[(0,i.jsx)("h3",{children:e("dryRun")}),(0,i.jsxs)("label",{children:[(0,i.jsx)("input",{type:"checkbox",checked:o.isDryRun,onChange:e=>p({...o,isDryRun:e.currentTarget.checked})})," ",e("dryRunDesc")]})]}),(0,i.jsxs)("div",{className:"card",children:[(0,i.jsx)("h3",{children:e("reviewBand")}),(0,i.jsx)("p",{style:{color:"#475569"},children:e("reviewBandDesc")}),(0,i.jsx)("input",{className:"input",type:"number",min:0,max:100,value:o.reviewBandPercent,onChange:e=>p({...o,reviewBandPercent:Number(e.currentTarget.value)})})]}),(0,i.jsxs)("div",{className:"card",children:[(0,i.jsxs)("h3",{children:["⑦ ",e("shopSelection")]}),(0,i.jsx)(a,{shops:t,selected:o.shopIds,onToggle:e=>{p(t=>({...t,shopIds:t.shopIds.includes(e)?t.shopIds.filter(t=>t!==e):[...t.shopIds,e]}))}})]}),(0,i.jsxs)("div",{className:"card",children:[(0,i.jsx)("h3",{children:e("shopOverrides")}),(0,i.jsx)("p",{style:{color:"#475569"},children:e("shopOverridesDesc")}),t.map(t=>{var s,n,r,a,l;let d=o.overrides.find(e=>e.shopId===t.id);return(0,i.jsxs)("div",{style:{marginBottom:12,padding:12,border:"1px solid #e2e8f0",borderRadius:10},children:[(0,i.jsx)("strong",{children:t.name}),(0,i.jsxs)("div",{className:"grid grid-3",children:[(0,i.jsx)("input",{className:"input",placeholder:e("maxShippingDays"),type:"number",value:null!==(s=null==d?void 0:d.maxShippingDays)&&void 0!==s?s:"",onChange:e=>p(s=>({...s,overrides:A(s.overrides,{shopId:t.id,maxShippingDays:e.currentTarget.value?Number(e.currentTarget.value):void 0})}))}),(0,i.jsx)("input",{className:"input",placeholder:e("minProfit"),type:"number",value:null!==(n=null==d?void 0:d.minExpectedProfit)&&void 0!==n?n:"",onChange:e=>p(s=>({...s,overrides:A(s.overrides,{shopId:t.id,minExpectedProfit:e.currentTarget.value?Number(e.currentTarget.value):void 0})}))}),(0,i.jsx)("input",{className:"input",placeholder:e("domesticShippingCost"),type:"number",value:null!==(r=null==d?void 0:d.domesticShippingCost)&&void 0!==r?r:"",onChange:e=>p(s=>({...s,overrides:A(s.overrides,{shopId:t.id,domesticShippingCost:e.currentTarget.value?Number(e.currentTarget.value):void 0})}))})]}),(0,i.jsxs)("label",{children:[(0,i.jsx)("input",{type:"checkbox",checked:null!==(a=null==d?void 0:d.includeAmazonPoints)&&void 0!==a?a:o.includeAmazonPoints,onChange:e=>p(s=>({...s,overrides:A(s.overrides,{shopId:t.id,includeAmazonPoints:e.currentTarget.checked})}))})," ",e("includePointsLabel")]}),(0,i.jsx)("br",{}),(0,i.jsxs)("label",{children:[(0,i.jsx)("input",{type:"checkbox",checked:null!==(l=null==d?void 0:d.includeDomesticShipping)&&void 0!==l?l:o.includeDomesticShipping,onChange:e=>p(s=>({...s,overrides:A(s.overrides,{shopId:t.id,includeDomesticShipping:e.currentTarget.checked})}))})," ",e("includeDomesticLabel")]})]},t.id)})]}),(0,i.jsx)("button",{className:"button",type:"submit",children:b?e("loading"):e("saveActivate")}),u&&(0,i.jsx)("p",{children:u}),m.length>0&&(0,i.jsx)("ul",{style:{color:"#b91c1c"},children:m.map(e=>(0,i.jsx)("li",{children:e},e))})]}),(0,i.jsx)(d,{onConnected:k}),(0,i.jsxs)("div",{className:"card",style:{marginTop:"16px"},children:[(0,i.jsx)("h3",{children:e("amazonCredentials")}),(0,i.jsx)("input",{className:"input",type:"email",placeholder:e("amazonEmail"),value:v,onChange:e=>x(e.target.value),required:!0}),(0,i.jsx)("input",{className:"input",type:"password",placeholder:e("amazonPassword"),value:f,onChange:e=>j(e.target.value),required:!0}),(0,i.jsx)("button",{className:"button",type:"button",onClick:I,children:N?e("loading"):e("saveCredentials")}),S&&(0,i.jsx)("p",{children:S})]})]})}function u(){var e,t;let{t:s}=(0,n.$G)("common"),[a,o]=(0,r.useState)(null),[l,d]=(0,r.useState)(!1),[p,u]=(0,r.useState)("");return(0,r.useEffect)(()=>{d(!0),c.Z.get("/api/ops/status").then(e=>o(e.data)).catch(e=>{var t,i,n;return u(null!==(n=null==e?void 0:null===(i=e.response)||void 0===i?void 0:null===(t=i.data)||void 0===t?void 0:t.error)&&void 0!==n?n:s("genericError"))}).finally(()=>d(!1))},[]),(0,i.jsxs)("div",{className:"grid grid-3",children:[l&&(0,i.jsx)("p",{children:s("loading")}),p&&(0,i.jsx)("p",{style:{color:"#ef4444"},children:p}),!l&&!p&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(h,{title:s("statusShopeePoll"),value:(null==a?void 0:a.lastOrder)?new Date(a.lastOrder).toLocaleString():"—",desc:s("statusLastOrderFetched")}),(0,i.jsx)(h,{title:s("statusAmazon"),value:(null==a?void 0:a.lastAmazon)?new Date(a.lastAmazon.createdAt).toLocaleString():"—",desc:(null==a?void 0:null===(e=a.lastAmazon)||void 0===e?void 0:e.status)||s("statusNoOrders")}),(0,i.jsx)(h,{title:s("statusErrors"),value:(null==a?void 0:a.lastError)?new Date(a.lastError.createdAt).toLocaleString():"—",desc:(null==a?void 0:null===(t=a.lastError)||void 0===t?void 0:t.reason)||s("statusNoRecentErrors")})]})]})}function h(e){let{title:t,value:s,desc:n}=e;return(0,i.jsxs)("div",{className:"card",style:{marginBottom:0},children:[(0,i.jsx)("p",{style:{margin:0,color:"#64748b",fontSize:12},children:t}),(0,i.jsx)("h3",{style:{margin:"4px 0"},children:s}),(0,i.jsx)("p",{style:{margin:0,color:"#475569",fontSize:13},children:n})]})}var m=s(2684),g=s(1021),v=!0;function x(){let{t:e}=(0,n.$G)("common");return(0,i.jsxs)("div",{className:"container",children:[(0,i.jsx)(m.Z,{activeHref:"/settings"}),(0,i.jsx)("h1",{children:e("autoShipping")}),(0,i.jsxs)("div",{className:"card",style:{marginBottom:16,background:"#f8fafc",border:"1px solid #e2e8f0"},children:[(0,i.jsx)("p",{style:{marginTop:0,color:"#0f172a",fontWeight:700},children:e("instrNote")}),(0,i.jsxs)("ol",{style:{color:"#475569",lineHeight:1.5,paddingLeft:18},children:[(0,i.jsx)("li",{children:e("instr1")}),(0,i.jsx)("li",{children:e("instr2")}),(0,i.jsx)("li",{children:e("instr3")}),(0,i.jsx)("li",{children:e("instr4")}),(0,i.jsx)("li",{children:e("instr5")}),(0,i.jsx)("li",{children:e("instr6")}),(0,i.jsx)("li",{children:e("instr7")}),(0,i.jsx)("li",{children:e("instr8")})]}),(0,i.jsx)("p",{style:{color:"#0f172a",fontWeight:600},children:e("instrNote2")})]}),(0,i.jsx)(u,{}),(0,i.jsx)("div",{style:{marginTop:12},children:(0,i.jsx)(g.Z,{})}),(0,i.jsx)(p,{})]})}}},function(e){e.O(0,[418,97,627,888,774,179],function(){return e(e.s=4994)}),_N_E=e.O()}]);