"use strict";(()=>{var e={};e.id=756,e.ids=[756,660],e.modules={1057:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.r(t),a.d(t,{config:()=>S,default:()=>p,getServerSideProps:()=>h,getStaticPaths:()=>g,getStaticProps:()=>x,reportWebVitals:()=>f,routeModule:()=>P,unstable_getServerProps:()=>b,unstable_getServerSideProps:()=>y,unstable_getStaticParams:()=>j,unstable_getStaticPaths:()=>v,unstable_getStaticProps:()=>m});var s=a(8877),l=a(4591),n=a(6021),i=a(552),o=a.n(i),d=a(4076),c=a(5153),u=e([c]);c=(u.then?(await u)():u)[0];let p=(0,n.l)(c,"default"),x=(0,n.l)(c,"getStaticProps"),g=(0,n.l)(c,"getStaticPaths"),h=(0,n.l)(c,"getServerSideProps"),S=(0,n.l)(c,"config"),f=(0,n.l)(c,"reportWebVitals"),m=(0,n.l)(c,"unstable_getStaticProps"),v=(0,n.l)(c,"unstable_getStaticPaths"),j=(0,n.l)(c,"unstable_getStaticParams"),b=(0,n.l)(c,"unstable_getServerProps"),y=(0,n.l)(c,"unstable_getServerSideProps"),P=new s.PagesRouteModule({definition:{kind:l.x.PAGES,page:"/ops",pathname:"/ops",bundlePath:"",filename:""},components:{App:d.default,Document:o()},userland:c});r()}catch(e){r(e)}})},5697:(e,t,a)=>{a.d(t,{Z:()=>s});var r=a(997);function s({status:e,labels:t}){let a=e?.toUpperCase?.()||"",s="#cbd5e1",l="#0f172a",n=e;return["FULFILLED","PLACED"].includes(a)?(s="#dcfce7",l="#166534",n=t.success):["FAILED","SKIPPED"].includes(a)?(s="#fee2e2",l="#991b1b",n=t.error):["QUEUED","PROCESSING","UNPROCESSED"].includes(a)?(s="#e0f2fe",l="#075985",n=t.pending):["MANUAL_REVIEW"].includes(a)&&(s="#e2e8f0",l="#0f172a",n=t.manual),r.jsx("span",{style:{display:"inline-flex",alignItems:"center",padding:"4px 8px",borderRadius:999,fontSize:12,fontWeight:600,background:s,color:l},children:n})}},5153:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.r(t),a.d(t,{default:()=>p,getStaticProps:()=>g});var s=a(997),l=a(6689),n=a(5460),i=a(1377),o=a(6555),d=a(5697),c=a(1522),u=e([c]);function p(){let{t:e}=(0,i.useTranslation)("common"),[t,a]=(0,l.useState)(null),[r,n]=(0,l.useState)(null),[u,p]=(0,l.useState)(""),[g,h]=(0,l.useState)(""),[S,f]=(0,l.useState)(!1),[m,v]=(0,l.useState)(!1),[j,b]=(0,l.useState)(null),y=async()=>{f(!0);try{let[e,t,r]=await Promise.allSettled([c.Z.get("/api/ops/queue"),c.Z.get("/api/ops/status"),c.Z.get("/health")]);"fulfilled"===e.status&&a(e.value.data),"fulfilled"===t.status&&n(t.value.data),"fulfilled"===r.status&&b(r.value.data)}catch(t){h(t?.response?.data?.error??e("genericError"))}finally{f(!1)}};(0,l.useEffect)(()=>{y()},[]);let P=async()=>{h(""),v(!0);try{await c.Z.post("/api/ops/amazon-test",{productUrl:u}),h(e("testScrapeQueued"))}catch(t){h(t?.response?.data?.error??e("genericError"))}finally{v(!1)}};return(0,s.jsxs)("div",{className:"container",children:[s.jsx(o.Z,{activeHref:"/ops"}),(0,s.jsxs)("div",{className:"card",children:[s.jsx("h1",{children:e("ops")}),s.jsx("p",{children:e("opsDesc")}),(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10,flexWrap:"wrap"},children:[s.jsx(d.Z,{status:j?"FULFILLED":"FAILED",labels:{success:e("statusProcessed"),error:e("statusError"),pending:e("statusPending"),manual:e("ordersTableManual")}}),s.jsx("span",{style:{color:"#475569"},children:j?e("statusHealthy")??"Healthy":e("genericError")})]})]}),(0,s.jsxs)("div",{className:"card",children:[s.jsx("h3",{children:e("queueHealth")}),t?(0,s.jsxs)("div",{style:{display:"flex",gap:12,flexWrap:"wrap"},children:[s.jsx(x,{label:e("waiting"),value:t.waiting}),s.jsx(x,{label:e("active"),value:t.active}),s.jsx(x,{label:e("failed"),value:t.failed}),s.jsx(x,{label:e("delayed"),value:t.delayed})]}):s.jsx("p",{children:S?e("loading"):e("genericError")})]}),(0,s.jsxs)("div",{className:"card",children:[s.jsx("h3",{children:e("opsStatusSummary")??"Recent activity"}),r?(0,s.jsxs)("ul",{style:{color:"#475569"},children:[(0,s.jsxs)("li",{children:[e("lastOrderLabel")??"Last Shopee order",":"," ",r.lastOrder?new Date(r.lastOrder).toLocaleString():e("none")]}),(0,s.jsxs)("li",{children:[e("lastAmazonLabel")??"Last Amazon action",":"," ",r.lastAmazon?`${new Date(r.lastAmazon.createdAt).toLocaleString()} (${r.lastAmazon.status})`:e("none")]}),(0,s.jsxs)("li",{children:[e("lastErrorLabel")??"Last error",":"," ",r.lastError?`${new Date(r.lastError.createdAt).toLocaleString()} - ${r.lastError.reason}`:e("none")]})]}):s.jsx("p",{children:S?e("loading"):e("genericError")})]}),(0,s.jsxs)("div",{className:"card",children:[s.jsx("h3",{children:e("testScrape")}),s.jsx("input",{className:"input",placeholder:e("productUrl"),value:u,onChange:e=>p(e.target.value)}),s.jsx("button",{className:"button",onClick:P,disabled:!u||m,children:m?e("loading"):e("run")}),g&&s.jsx("p",{children:g})]})]})}function x({label:e,value:t}){return(0,s.jsxs)("div",{style:{background:"#e2e8f0",borderRadius:8,padding:"8px 12px",minWidth:80},children:[s.jsx("div",{style:{fontSize:12,color:"#475569"},children:e}),s.jsx("div",{style:{fontWeight:700},children:t})]})}async function g({locale:e}){return{props:{...await (0,n.serverSideTranslations)(e,["common"])}}}c=(u.then?(await u)():u)[0],r()}catch(e){r(e)}})},1377:e=>{e.exports=require("next-i18next")},5460:e=>{e.exports=require("next-i18next/serverSideTranslations")},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},9816:e=>{e.exports=require("styled-jsx/style")},9648:e=>{e.exports=import("axios")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},9796:e=>{e.exports=require("zlib")}};var t=require("../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[332,839,552,754,638,555],()=>a(1057));module.exports=r})();