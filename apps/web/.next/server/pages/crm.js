"use strict";(()=>{var e={};e.id=801,e.ids=[801,660],e.modules={6344:(e,t,r)=>{r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{config:()=>g,default:()=>h,getServerSideProps:()=>p,getStaticPaths:()=>m,getStaticProps:()=>x,reportWebVitals:()=>j,routeModule:()=>b,unstable_getServerProps:()=>f,unstable_getServerSideProps:()=>D,unstable_getStaticParams:()=>S,unstable_getStaticPaths:()=>y,unstable_getStaticProps:()=>v});var a=r(8877),i=r(4591),l=r(6021),n=r(552),o=r.n(n),c=r(5270),d=r(8431),u=e([d]);d=(u.then?(await u)():u)[0];let h=(0,l.l)(d,"default"),x=(0,l.l)(d,"getStaticProps"),m=(0,l.l)(d,"getStaticPaths"),p=(0,l.l)(d,"getServerSideProps"),g=(0,l.l)(d,"config"),j=(0,l.l)(d,"reportWebVitals"),v=(0,l.l)(d,"unstable_getStaticProps"),y=(0,l.l)(d,"unstable_getStaticPaths"),S=(0,l.l)(d,"unstable_getStaticParams"),f=(0,l.l)(d,"unstable_getServerProps"),D=(0,l.l)(d,"unstable_getServerSideProps"),b=new a.PagesRouteModule({definition:{kind:i.x.PAGES,page:"/crm",pathname:"/crm",bundlePath:"",filename:""},components:{App:c.default,Document:o()},userland:d});s()}catch(e){s(e)}})},8431:(e,t,r)=>{r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{default:()=>h,getStaticProps:()=>x});var a=r(997),i=r(6689),l=r(5941),n=r(5460),o=r(1377),c=r(1522),d=r(2684),u=e([l,c]);[l,c]=u.then?(await u)():u;let m=e=>c.Z.get(e).then(e=>e.data);function h(){let{t:e}=(0,o.useTranslation)("common"),[t,r]=(0,i.useState)(""),{data:s}=(0,l.default)(t?`/api/crm/${t}`:null,m),{data:n}=(0,l.default)(t?`/api/crm/stats/${t}`:null,m),c=e=>{switch(e){case"PLATINUM":return"var(--color-secondary)";case"GOLD":return"#f59e0b";case"SILVER":return"#94a3b8";case"BRONZE":return"#a16207";default:return"var(--color-text-muted)"}},u=e=>{switch(e){case"PLATINUM":return"\uD83D\uDC8E";case"GOLD":return"\uD83E\uDD47";case"SILVER":return"\uD83E\uDD48";case"BRONZE":return"\uD83E\uDD49";default:return"\uD83D\uDC64"}};return(0,a.jsxs)("div",{className:"shell",children:[a.jsx(d.Z,{activeHref:"/crm"}),(0,a.jsxs)("div",{className:"container",children:[a.jsx("div",{className:"hero",style:{marginBottom:32},children:(0,a.jsxs)("div",{children:[a.jsx("h1",{style:{fontSize:36,margin:0},children:"\uD83D\uDC65 Customer Relationship Management"}),a.jsx("p",{style:{color:"var(--color-text-muted)",marginTop:8},children:"Build relationships, track loyalty, and maximize customer lifetime value"})]})}),(0,a.jsxs)("div",{className:"card",style:{marginBottom:24},children:[a.jsx("label",{className:"label",children:"Shop ID"}),a.jsx("input",{className:"input",type:"text",placeholder:"Enter Shop ID",value:t,onChange:e=>r(e.target.value)})]}),t&&n&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"grid grid-4",style:{marginBottom:24},children:[(0,a.jsxs)("div",{className:"stat-card",children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:8},children:[a.jsx("span",{style:{fontSize:28},children:"\uD83D\uDC65"}),a.jsx("span",{style:{fontSize:13,color:"var(--color-text-muted)",fontWeight:600},children:"TOTAL CUSTOMERS"})]}),a.jsx("h2",{style:{fontSize:32,margin:0,color:"var(--color-primary)"},children:n.totalCustomers.toLocaleString()})]}),(0,a.jsxs)("div",{className:"stat-card",children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:8},children:[a.jsx("span",{style:{fontSize:28},children:"\uD83D\uDCB0"}),a.jsx("span",{style:{fontSize:13,color:"var(--color-text-muted)",fontWeight:600},children:"AVG LIFETIME VALUE"})]}),(0,a.jsxs)("h2",{style:{fontSize:32,margin:0,color:"var(--color-success)"},children:["$",n.avgLifetimeValue.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"stat-card",children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:8},children:[a.jsx("span",{style:{fontSize:28},children:"\uD83D\uDC8E"}),a.jsx("span",{style:{fontSize:13,color:"var(--color-text-muted)",fontWeight:600},children:"PLATINUM MEMBERS"})]}),a.jsx("h2",{style:{fontSize:32,margin:0,color:"var(--color-secondary)"},children:n.loyaltyDistribution.PLATINUM||0})]}),(0,a.jsxs)("div",{className:"stat-card",children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:8},children:[a.jsx("span",{style:{fontSize:28},children:"\uD83D\uDEAB"}),a.jsx("span",{style:{fontSize:13,color:"var(--color-text-muted)",fontWeight:600},children:"BLACKLISTED"})]}),a.jsx("h2",{style:{fontSize:32,margin:0,color:"var(--color-error)"},children:n.blacklistedCount})]})]}),(0,a.jsxs)("div",{className:"card",style:{marginBottom:24},children:[a.jsx("h3",{style:{marginTop:0},children:"\uD83C\uDFC6 Loyalty Tier Distribution"}),a.jsx("div",{className:"grid grid-4",children:Object.entries(n.loyaltyDistribution).map(([e,t])=>(0,a.jsxs)("div",{style:{padding:20,background:"var(--color-elevated)",borderRadius:"var(--radius-lg)",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:36,marginBottom:8},children:u(e)}),a.jsx("div",{style:{fontSize:13,color:"var(--color-text-muted)",marginBottom:4},children:e}),a.jsx("div",{style:{fontSize:24,fontWeight:700,color:c(e)},children:t})]},e))})]}),s&&s.length>0&&(0,a.jsxs)("div",{className:"card",children:[a.jsx("h3",{style:{marginTop:0},children:"\uD83D\uDCCB Customer List"}),a.jsx("div",{className:"table-wrapper",children:(0,a.jsxs)("table",{className:"table",children:[a.jsx("thead",{children:(0,a.jsxs)("tr",{children:[a.jsx("th",{children:"Customer"}),a.jsx("th",{children:"Tier"}),a.jsx("th",{children:"Orders"}),a.jsx("th",{children:"Lifetime Value"}),a.jsx("th",{children:"Last Purchase"}),a.jsx("th",{children:"Status"})]})}),a.jsx("tbody",{children:s.map(e=>(0,a.jsxs)("tr",{children:[a.jsx("td",{children:(0,a.jsxs)("div",{children:[a.jsx("div",{style:{fontWeight:600},children:e.name}),a.jsx("div",{style:{fontSize:13,color:"var(--color-text-light)"},children:e.email})]})}),a.jsx("td",{children:(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[a.jsx("span",{style:{fontSize:20},children:u(e.loyaltyTier)}),a.jsx("span",{style:{fontWeight:600,color:c(e.loyaltyTier)},children:e.loyaltyTier})]})}),a.jsx("td",{children:a.jsx("span",{className:"badge",children:e.totalOrders})}),(0,a.jsxs)("td",{style:{color:"var(--color-success)",fontWeight:600},children:["$",e.lifetimeValue.toLocaleString(void 0,{minimumFractionDigits:2})]}),a.jsx("td",{style:{fontSize:13,color:"var(--color-text-muted)"},children:new Date(e.lastPurchase).toLocaleDateString()}),a.jsx("td",{children:e.isBlacklisted?a.jsx("span",{className:"badge badge-error",children:"Blacklisted"}):a.jsx("span",{className:"badge badge-success",children:"Active"})})]},e.id))})]})})]})]}),!t&&(0,a.jsxs)("div",{className:"alert alert-info",children:[a.jsx("span",{style:{fontSize:20},children:"ℹ️"}),(0,a.jsxs)("div",{children:[a.jsx("strong",{children:"Get Started"}),a.jsx("p",{style:{marginTop:4},children:"Enter your Shop ID above to view customer data"})]})]})]})]})}async function x({locale:e}){return{props:{...await (0,n.serverSideTranslations)(e,["common"])}}}s()}catch(e){s(e)}})},1377:e=>{e.exports=require("next-i18next")},5460:e=>{e.exports=require("next-i18next/serverSideTranslations")},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},9648:e=>{e.exports=import("axios")},5941:e=>{e.exports=import("swr")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},9796:e=>{e.exports=require("zlib")}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[332,839,552,754,52],()=>r(6344));module.exports=s})();