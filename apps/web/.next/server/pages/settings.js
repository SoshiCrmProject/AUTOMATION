"use strict";(()=>{var e={};e.id=662,e.ids=[662,660],e.modules={4806:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{config:()=>x,default:()=>p,getServerSideProps:()=>g,getStaticPaths:()=>m,getStaticProps:()=>u,reportWebVitals:()=>f,routeModule:()=>D,unstable_getServerProps:()=>S,unstable_getServerSideProps:()=>b,unstable_getStaticParams:()=>j,unstable_getStaticPaths:()=>y,unstable_getStaticProps:()=>v});var s=r(8877),i=r(4591),n=r(6021),l=r(552),o=r.n(l),d=r(5270),c=r(8106),h=e([c]);c=(h.then?(await h)():h)[0];let p=(0,n.l)(c,"default"),u=(0,n.l)(c,"getStaticProps"),m=(0,n.l)(c,"getStaticPaths"),g=(0,n.l)(c,"getServerSideProps"),x=(0,n.l)(c,"config"),f=(0,n.l)(c,"reportWebVitals"),v=(0,n.l)(c,"unstable_getStaticProps"),y=(0,n.l)(c,"unstable_getStaticPaths"),j=(0,n.l)(c,"unstable_getStaticParams"),S=(0,n.l)(c,"unstable_getServerProps"),b=(0,n.l)(c,"unstable_getServerSideProps"),D=new s.PagesRouteModule({definition:{kind:i.x.PAGES,page:"/settings",pathname:"/settings",bundlePath:"",filename:""},components:{App:d.default,Document:o()},userland:c});a()}catch(e){a(e)}})},8106:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{default:()=>j,getStaticProps:()=>S});var s=r(997),i=r(6689),n=r(5460),l=r(1377),o=r(5941),d=r(2684),c=r(3688),h=r(1935),p=r(2268),u=r(2304),m=r(7715),g=r(2938),x=r(1837),f=r(7029),v=r(1522),y=e([o,v]);[o,v]=y.then?(await y)():y;let b=e=>v.Z.get(e).then(e=>e.data);function j(){let{t:e}=(0,l.useTranslation)("common"),[t,r]=(0,i.useState)("general"),[a,n]=(0,i.useState)(!1),[y,j]=(0,i.useState)(!1),[S,D]=(0,i.useState)(!1),[I,P]=(0,i.useState)(!1),[C,k]=(0,i.useState)(!1),[w,B]=(0,i.useState)(0),[z,A]=(0,i.useState)(7),[E,M]=(0,i.useState)(0),[T,W]=(0,i.useState)(0),[N,R]=(0,i.useState)(!1),[Z,q]=(0,i.useState)(!1),[_,L]=(0,i.useState)(""),[O,F]=(0,i.useState)("AUTO"),[U,G]=(0,i.useState)(""),[K,$]=(0,i.useState)(""),[H,V]=(0,i.useState)(""),[X,J]=(0,i.useState)(""),[Q,Y]=(0,i.useState)(""),[ee,et]=(0,i.useState)("Shopee Warehouse"),[er,ea]=(0,i.useState)("");(0,i.useEffect)(()=>{D(!0)},[]);let{data:es,error:ei,mutate:en}=(0,o.default)("/settings",b,{shouldRetryOnError:!1,revalidateOnFocus:!1}),{data:el}=(0,o.default)("/shops",b,{shouldRetryOnError:!1}),{data:eo}=(0,o.default)("/credentials/shopee",b,{shouldRetryOnError:!1}),{data:ed}=(0,o.default)("/credentials/amazon",b,{shouldRetryOnError:!1});(0,i.useEffect)(()=>{es&&(P(es.includeAmazonPoints),k(es.includeDomesticShipping),B(es.domesticShippingCost||0),A(es.maxShippingDays),M(es.minExpectedProfit),W(es.reviewBandPercent||0),R(es.isActive),q(es.isDryRun),es.shopIds&&es.shopIds.length>0&&L(es.shopIds[0]))},[es]),(0,i.useEffect)(()=>{el&&el.length>0&&!_&&L(el[0].id)},[el,_]),(0,i.useEffect)(()=>{if(eo&&eo.length>0){let e=eo[0];G(e.partnerId||""),V(e.shopId||"")}},[eo]),(0,i.useEffect)(()=>{if(ed&&ed.length>0){let e=ed[0];J(e.email||""),et("Shopee Warehouse")}},[ed]);let ec=async()=>{if(!_){(0,f.M)("No shop selected. Please refresh the page.","error");return}j(!0);try{await v.Z.post("/settings",{shopId:_,isActive:N,isDryRun:Z,autoFulfillmentMode:O,minExpectedProfit:E,maxShippingDays:z,reviewBandPercent:T,includePoints:I,includeDomesticShipping:C,defaultShippingAddressLabel:ee||"Shopee Warehouse",currency:"JPY"}),(0,f.M)("Settings saved successfully","success"),en()}catch(e){(0,f.M)(e.response?.data?.error||"Failed to save settings","error")}finally{j(!1)}},eh=async()=>{if(!_){(0,f.M)("No shop selected","error");return}if(!U||!K||!H){(0,f.M)("Please fill in all Shopee credentials","error");return}j(!0);try{await v.Z.post("/credentials/shopee",{partnerId:U,partnerKey:K,accessToken:"",baseUrl:"https://partner.shopeemobile.com",shopId:_,shopName:H,shopeeRegion:"TH"}),(0,f.M)("Shopee credentials saved successfully","success")}catch(e){(0,f.M)(e.response?.data?.error||"Failed to save Shopee credentials","error")}finally{j(!1)}},ep=async()=>{if(!_){(0,f.M)("No shop selected","error");return}if(!X||!Q){(0,f.M)("Please fill in email and password","error");return}j(!0);try{await v.Z.post("/credentials/amazon",{shopId:_,email:X,password:Q}),(0,f.M)("Amazon credentials saved successfully","success"),Y("")}catch(e){(0,f.M)(e.response?.data?.error||"Failed to save Amazon credentials","error")}finally{j(!1)}},eu=async()=>{if(!er.trim()){(0,f.M)("Please enter a webhook URL","error");return}j(!0);try{await v.Z.post(er,{text:"\uD83E\uDDEA Test notification from Shopee→Amazon Automation"}),(0,f.M)("Webhook test sent successfully","success")}catch(e){(0,f.M)("Webhook test failed","error")}finally{j(!1)}};return(0,s.jsxs)("div",{className:"shell",children:[s.jsx(d.Z,{activeHref:"/settings"}),(0,s.jsxs)("div",{className:"container",children:[s.jsx("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"48px 32px",borderRadius:"var(--radius-xl)",marginBottom:32,boxShadow:"var(--shadow-lg)"},children:(0,s.jsxs)("div",{children:[s.jsx("h1",{style:{fontSize:36,margin:0,color:"#fff"},children:"⚙️ Settings & Configuration"}),s.jsx("p",{style:{color:"rgba(255,255,255,0.9)",marginTop:8,fontSize:16},children:"Configure automation rules, platform credentials, and system preferences"})]})}),es&&(0,s.jsxs)("div",{className:"grid grid-3",style:{marginBottom:24},children:[s.jsx(p.Zb,{children:(0,s.jsxs)("div",{style:{textAlign:"center",padding:12},children:[s.jsx("div",{style:{fontSize:32,marginBottom:8},children:N?"✅":"⏸️"}),s.jsx("div",{style:{fontSize:14,color:"var(--color-text-muted)",marginBottom:4},children:"Automation Status"}),s.jsx(x.C,{variant:N?"success":"warning",children:N?"Active":"Inactive"})]})}),s.jsx(p.Zb,{children:(0,s.jsxs)("div",{style:{textAlign:"center",padding:12},children:[s.jsx("div",{style:{fontSize:32,marginBottom:8},children:Z?"\uD83E\uDDEA":"\uD83D\uDE80"}),s.jsx("div",{style:{fontSize:14,color:"var(--color-text-muted)",marginBottom:4},children:"Execution Mode"}),s.jsx(x.C,{variant:Z?"info":"success",children:Z?"Dry Run":"Live"})]})}),s.jsx(p.Zb,{children:(0,s.jsxs)("div",{style:{textAlign:"center",padding:12},children:[s.jsx("div",{style:{fontSize:32,marginBottom:8},children:"\uD83D\uDCB0"}),s.jsx("div",{style:{fontSize:14,color:"var(--color-text-muted)",marginBottom:4},children:"Min Expected Profit"}),(0,s.jsxs)("div",{style:{fontSize:20,fontWeight:700,color:"var(--color-success)"},children:["$",(E||0).toFixed(2)]})]})})]}),s.jsx("div",{style:{marginBottom:24},children:(0,s.jsxs)(g.bZ,{variant:"info",children:[s.jsx("strong",{children:"Setup Instructions"}),(0,s.jsxs)("ol",{style:{marginTop:8,marginBottom:0,paddingLeft:20},children:[s.jsx("li",{children:"Configure Shopee API credentials (Partner ID, Partner Key, Shop ID)"}),s.jsx("li",{children:"Set up Amazon seller credentials (email & password for automation)"}),s.jsx("li",{children:"Define automation rules (shipping days, profit margins, pricing)"}),s.jsx("li",{children:"Test webhook notifications (Slack/Discord integration)"}),s.jsx("li",{children:"Enable automation when ready (toggle Active status)"})]})]})}),(0,s.jsxs)(p.Zb,{children:[s.jsx("div",{className:"tabs-header",style:{display:"flex",gap:"8px",borderBottom:"2px solid var(--color-border)",marginBottom:"24px",overflowX:"auto"},children:[{id:"general",label:"General",icon:"⚙️"},{id:"shopee",label:"Shopee",icon:"\uD83D\uDECD️"},{id:"amazon",label:"Amazon",icon:"\uD83D\uDCE6"},{id:"notifications",label:"Notifications",icon:"\uD83D\uDD14"}].map(e=>(0,s.jsxs)("button",{onClick:()=>r(e.id),style:{background:"none",border:"none",padding:"14px 20px",fontSize:"14px",fontWeight:t===e.id?700:500,color:t===e.id?"var(--color-primary)":"var(--color-text-muted)",cursor:"pointer",position:"relative",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s ease",borderBottom:t===e.id?"2px solid var(--color-primary)":"2px solid transparent",marginBottom:"-2px",whiteSpace:"nowrap"},children:[s.jsx("span",{children:e.icon}),s.jsx("span",{children:e.label})]},e.id))}),"general"===t&&(0,s.jsxs)("div",{style:{marginTop:24},children:[s.jsx("h3",{style:{marginTop:0,marginBottom:16},children:"Automation Rules"}),(0,s.jsxs)("div",{className:"grid grid-2",style:{gap:16,marginBottom:24},children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"label",children:"Max Shipping Days"}),s.jsx(m.II,{type:"number",value:z,onChange:e=>A(Number(e.target.value)),hint:"Maximum delivery time from Amazon"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"label",children:"Min Expected Profit ($)"}),s.jsx(m.II,{type:"number",value:E,onChange:e=>M(Number(e.target.value)),hint:"Minimum profit margin per order"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"label",children:"Domestic Shipping Cost ($)"}),s.jsx(m.II,{type:"number",value:w,onChange:e=>B(Number(e.target.value)),hint:"Cost for domestic shipping"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"label",children:"Review Band Percent (%)"}),s.jsx(m.II,{type:"number",value:T,onChange:e=>W(Number(e.target.value)),hint:"Percentage band for manual review"})]})]}),s.jsx("h3",{style:{marginBottom:16},children:"Options"}),(0,s.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:12,marginBottom:24},children:[(0,s.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:12,cursor:"pointer"},children:[s.jsx("input",{type:"checkbox",checked:I,onChange:e=>P(e.target.checked),style:{width:18,height:18}}),s.jsx("span",{children:"Include Amazon Points in calculations"})]}),(0,s.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:12,cursor:"pointer"},children:[s.jsx("input",{type:"checkbox",checked:C,onChange:e=>k(e.target.checked),style:{width:18,height:18}}),s.jsx("span",{children:"Include Domestic Shipping costs"})]})]}),s.jsx("h3",{style:{marginBottom:16},children:"Execution Mode"}),(0,s.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:12,marginBottom:24},children:[(0,s.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:12,cursor:"pointer"},children:[s.jsx("input",{type:"checkbox",checked:N,onChange:e=>R(e.target.checked),style:{width:18,height:18}}),s.jsx("span",{style:{fontWeight:600},children:"Enable Automation"})]}),(0,s.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:12,cursor:"pointer"},children:[s.jsx("input",{type:"checkbox",checked:Z,onChange:e=>q(e.target.checked),style:{width:18,height:18}}),s.jsx("span",{children:"Dry Run Mode (test without actual orders)"})]})]}),s.jsx(u.z,{onClick:ec,variant:"primary",fullWidth:!0,disabled:y,children:"\uD83D\uDCBE Save General Settings"})]}),"shopee"===t&&(0,s.jsxs)("div",{style:{marginTop:24},children:[s.jsx("h3",{style:{marginTop:0,marginBottom:16},children:"Shopee API Credentials"}),s.jsx("div",{style:{marginBottom:24},children:s.jsx(g.bZ,{variant:"warning",children:"Get your Shopee Partner credentials from the Shopee Open Platform"})}),(0,s.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:16,marginBottom:24},children:[s.jsx(m.II,{label:"Partner ID",value:U,onChange:e=>G(e.target.value),placeholder:"Enter Shopee Partner ID"}),s.jsx(m.II,{label:"Partner Key",type:"password",value:K,onChange:e=>$(e.target.value),placeholder:"Enter Shopee Partner Key"}),s.jsx(m.II,{label:"Shop ID",value:H,onChange:e=>V(e.target.value),placeholder:"Enter Shop ID"})]}),s.jsx(u.z,{onClick:eh,variant:"primary",fullWidth:!0,disabled:y,children:"\uD83D\uDD11 Save Shopee Credentials"})]}),"amazon"===t&&(0,s.jsxs)("div",{style:{marginTop:24},children:[s.jsx("h3",{style:{marginTop:0,marginBottom:16},children:"Amazon Seller Credentials"}),s.jsx("div",{style:{marginBottom:24},children:s.jsx(g.bZ,{variant:"warning",children:"These credentials are used for automated browser login to Amazon Seller Central"})}),(0,s.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:16,marginBottom:24},children:[s.jsx(m.II,{label:"Amazon Email",type:"email",value:X,onChange:e=>J(e.target.value),placeholder:"your-email@example.com"}),s.jsx(m.II,{label:"Amazon Password",type:"password",value:Q,onChange:e=>Y(e.target.value),placeholder:"••••••••"}),s.jsx(m.II,{label:"Shipping Label",value:ee,onChange:e=>et(e.target.value),placeholder:"Shopee Warehouse",hint:"Default shipping label for orders"})]}),s.jsx(u.z,{onClick:ep,variant:"primary",fullWidth:!0,disabled:y,children:"\uD83D\uDD11 Save Amazon Credentials"})]}),"notifications"===t&&(0,s.jsxs)("div",{style:{marginTop:24},children:[s.jsx("h3",{style:{marginTop:0,marginBottom:16},children:"Alert Webhook"}),s.jsx("div",{style:{marginBottom:24},children:s.jsx(g.bZ,{variant:"info",children:"Configure Slack or Discord webhook URL to receive real-time alerts"})}),s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:16,marginBottom:24},children:s.jsx(m.II,{label:"Webhook URL",value:er,onChange:e=>ea(e.target.value),placeholder:"https://hooks.slack.com/services/...",hint:"Slack or Discord webhook URL"})}),(0,s.jsxs)("div",{style:{display:"flex",gap:12},children:[s.jsx(u.z,{onClick:eu,variant:"ghost",fullWidth:!0,disabled:y,children:"\uD83E\uDDEA Test Webhook"}),s.jsx(u.z,{variant:"primary",fullWidth:!0,disabled:y,children:"\uD83D\uDCBE Save Webhook"})]})]})]}),s.jsx(f.Z,{}),S&&(0,s.jsxs)(s.Fragment,{children:[s.jsx(c.Z,{pageName:"settings",steps:h.Qu,onComplete:()=>n(!1)}),!a&&s.jsx(c.M,{onClick:()=>{}})]})]})]})}async function S({locale:e}){return{props:{...await (0,n.serverSideTranslations)(e,["common"])}}}a()}catch(e){a(e)}})},1377:e=>{e.exports=require("next-i18next")},5460:e=>{e.exports=require("next-i18next/serverSideTranslations")},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},9648:e=>{e.exports=import("axios")},5941:e=>{e.exports=import("swr")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},9796:e=>{e.exports=require("zlib")}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[332,839,552,754,52,202,438],()=>r(4806));module.exports=a})();