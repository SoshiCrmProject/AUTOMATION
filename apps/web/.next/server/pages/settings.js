"use strict";(()=>{var e={};e.id=662,e.ids=[662,660],e.modules={4806:(e,t,r)=>{r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{config:()=>x,default:()=>u,getServerSideProps:()=>g,getStaticPaths:()=>m,getStaticProps:()=>p,reportWebVitals:()=>y,routeModule:()=>D,unstable_getServerProps:()=>S,unstable_getServerSideProps:()=>b,unstable_getStaticParams:()=>j,unstable_getStaticPaths:()=>v,unstable_getStaticProps:()=>f});var i=r(8877),a=r(4591),n=r(6021),l=r(552),o=r.n(l),d=r(5270),c=r(8106),h=e([c]);c=(h.then?(await h)():h)[0];let u=(0,n.l)(c,"default"),p=(0,n.l)(c,"getStaticProps"),m=(0,n.l)(c,"getStaticPaths"),g=(0,n.l)(c,"getServerSideProps"),x=(0,n.l)(c,"config"),y=(0,n.l)(c,"reportWebVitals"),f=(0,n.l)(c,"unstable_getStaticProps"),v=(0,n.l)(c,"unstable_getStaticPaths"),j=(0,n.l)(c,"unstable_getStaticParams"),S=(0,n.l)(c,"unstable_getServerProps"),b=(0,n.l)(c,"unstable_getServerSideProps"),D=new i.PagesRouteModule({definition:{kind:a.x.PAGES,page:"/settings",pathname:"/settings",bundlePath:"",filename:""},components:{App:d.default,Document:o()},userland:c});s()}catch(e){s(e)}})},8106:(e,t,r)=>{r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{default:()=>j,getStaticProps:()=>S});var i=r(997),a=r(6689),n=r(5460),l=r(1377),o=r(5941),d=r(2684),c=r(3688),h=r(1935),u=r(2268),p=r(2304),m=r(7715),g=r(2938),x=r(1837),y=r(7029),f=r(1522),v=e([o,f]);[o,f]=v.then?(await v)():v;let b=e=>f.Z.get(e).then(e=>e.data);function j(){let{t:e}=(0,l.useTranslation)("common"),[t,r]=(0,a.useState)("general"),[s,n]=(0,a.useState)(!1),[v,j]=(0,a.useState)(!1),[S,D]=(0,a.useState)(!1),[I,C]=(0,a.useState)(!1),[P,w]=(0,a.useState)(!1),[k,E]=(0,a.useState)(0),[A,B]=(0,a.useState)(7),[z,M]=(0,a.useState)(0),[T,W]=(0,a.useState)(0),[N,R]=(0,a.useState)(!1),[Z,q]=(0,a.useState)(!1),[_,L]=(0,a.useState)(""),[O,U]=(0,a.useState)("AUTO"),[G,F]=(0,a.useState)(""),[K,H]=(0,a.useState)(""),[$,V]=(0,a.useState)(""),[X,J]=(0,a.useState)(""),[Q,Y]=(0,a.useState)(""),[ee,et]=(0,a.useState)("Shopee Warehouse"),[er,es]=(0,a.useState)("");(0,a.useEffect)(()=>{D(!0)},[]);let{data:ei,error:ea,mutate:en}=(0,o.default)("/settings",b,{shouldRetryOnError:!1,revalidateOnFocus:!1}),{data:el}=(0,o.default)("/shops",b,{shouldRetryOnError:!1}),{data:eo}=(0,o.default)("/credentials/shopee",b,{shouldRetryOnError:!1}),{data:ed}=(0,o.default)("/credentials/amazon",b,{shouldRetryOnError:!1});(0,a.useEffect)(()=>{ei&&(C(ei.includeAmazonPoints),w(ei.includeDomesticShipping),E(ei.domesticShippingCost||0),B(ei.maxShippingDays),M(ei.minExpectedProfit),W(ei.reviewBandPercent||0),R(ei.isActive),q(ei.isDryRun),ei.shopIds&&ei.shopIds.length>0&&L(ei.shopIds[0]))},[ei]),(0,a.useEffect)(()=>{el&&el.length>0&&!_&&L(el[0].id)},[el,_]),(0,a.useEffect)(()=>{if(eo&&eo.length>0){let e=eo[0];F(e.partnerId||""),V(e.shopId||"")}},[eo]),(0,a.useEffect)(()=>{if(ed&&ed.length>0){let e=ed[0];J(e.email||""),et("Shopee Warehouse")}},[ed]);let ec=async()=>{if(!_){(0,y.M)("No shop selected. Please refresh the page.","error");return}j(!0);try{await f.Z.post("/settings",{shopId:_,isActive:N,isDryRun:Z,autoFulfillmentMode:O,minExpectedProfit:z,maxShippingDays:A,reviewBandPercent:T,includePoints:I,includeDomesticShipping:P,defaultShippingAddressLabel:ee||"Shopee Warehouse",currency:"JPY"}),(0,y.M)("Settings saved successfully","success"),en()}catch(e){(0,y.M)(e.response?.data?.error||"Failed to save settings","error")}finally{j(!1)}},eh=async()=>{if(!_){(0,y.M)("No shop selected","error");return}if(!G||!K||!$){(0,y.M)("Please fill in all Shopee credentials","error");return}j(!0);try{await f.Z.post("/credentials/shopee",{partnerId:G,partnerKey:K,accessToken:"",baseUrl:"https://partner.shopeemobile.com",shopId:_,shopName:$,shopeeRegion:"TH"}),(0,y.M)("Shopee credentials saved successfully","success")}catch(e){(0,y.M)(e.response?.data?.error||"Failed to save Shopee credentials","error")}finally{j(!1)}},eu=async()=>{if(!_){(0,y.M)("No shop selected","error");return}if(!X||!Q){(0,y.M)("Please fill in email and password","error");return}j(!0);try{await f.Z.post("/credentials/amazon",{shopId:_,email:X,password:Q}),(0,y.M)("Amazon credentials saved successfully","success"),Y("")}catch(e){(0,y.M)(e.response?.data?.error||"Failed to save Amazon credentials","error")}finally{j(!1)}},ep=async()=>{if(!er.trim()){(0,y.M)("Please enter a webhook URL","error");return}j(!0);try{await f.Z.post(er,{text:"\uD83E\uDDEA Test notification from Shopee→Amazon Automation"}),(0,y.M)("Webhook test sent successfully","success")}catch(e){(0,y.M)("Webhook test failed","error")}finally{j(!1)}};return(0,i.jsxs)("div",{className:"shell",children:[i.jsx(d.Z,{activeHref:"/settings"}),(0,i.jsxs)("div",{className:"container",children:[i.jsx("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"48px 32px",borderRadius:"var(--radius-xl)",marginBottom:32,boxShadow:"var(--shadow-lg)"},children:(0,i.jsxs)("div",{children:[i.jsx("h1",{style:{fontSize:36,margin:0,color:"#fff"},children:"⚙️ Settings & Configuration"}),i.jsx("p",{style:{color:"rgba(255,255,255,0.9)",marginTop:8,fontSize:16},children:"Configure automation rules, platform credentials, and system preferences"})]})}),ei&&(0,i.jsxs)("div",{className:"grid grid-3",style:{marginBottom:24},children:[i.jsx(u.Zb,{children:(0,i.jsxs)("div",{style:{textAlign:"center",padding:12},children:[i.jsx("div",{style:{fontSize:32,marginBottom:8},children:N?"✅":"⏸️"}),i.jsx("div",{style:{fontSize:14,color:"var(--color-text-muted)",marginBottom:4},children:"Automation Status"}),i.jsx(x.C,{variant:N?"success":"warning",children:N?"Active":"Inactive"})]})}),i.jsx(u.Zb,{children:(0,i.jsxs)("div",{style:{textAlign:"center",padding:12},children:[i.jsx("div",{style:{fontSize:32,marginBottom:8},children:Z?"\uD83E\uDDEA":"\uD83D\uDE80"}),i.jsx("div",{style:{fontSize:14,color:"var(--color-text-muted)",marginBottom:4},children:"Execution Mode"}),i.jsx(x.C,{variant:Z?"info":"success",children:Z?"Dry Run":"Live"})]})}),i.jsx(u.Zb,{children:(0,i.jsxs)("div",{style:{textAlign:"center",padding:12},children:[i.jsx("div",{style:{fontSize:32,marginBottom:8},children:"\uD83D\uDCB0"}),i.jsx("div",{style:{fontSize:14,color:"var(--color-text-muted)",marginBottom:4},children:"Min Expected Profit"}),(0,i.jsxs)("div",{style:{fontSize:20,fontWeight:700,color:"var(--color-success)"},children:["$",(z||0).toFixed(2)]})]})})]}),i.jsx("div",{style:{marginBottom:24},children:(0,i.jsxs)(g.bZ,{variant:"info",children:[i.jsx("strong",{children:"Setup Instructions"}),(0,i.jsxs)("ol",{style:{marginTop:8,marginBottom:0,paddingLeft:20},children:[i.jsx("li",{children:"Configure Shopee API credentials (Partner ID, Partner Key, Shop ID)"}),i.jsx("li",{children:"Set up Amazon seller credentials (email & password for automation)"}),i.jsx("li",{children:"Define automation rules (shipping days, profit margins, pricing)"}),i.jsx("li",{children:"Test webhook notifications (Slack/Discord integration)"}),i.jsx("li",{children:"Enable automation when ready (toggle Active status)"})]})]})}),(0,i.jsxs)(u.Zb,{children:[i.jsx("div",{className:"tabs-header",style:{display:"flex",gap:"8px",borderBottom:"2px solid var(--color-border)",marginBottom:"24px",overflowX:"auto"},children:[{id:"general",label:"General",icon:"⚙️"},{id:"shopee",label:"Shopee",icon:"\uD83D\uDECD️"},{id:"amazon",label:"Amazon",icon:"\uD83D\uDCE6"},{id:"notifications",label:"Notifications",icon:"\uD83D\uDD14"}].map(e=>(0,i.jsxs)("button",{onClick:()=>r(e.id),style:{background:"none",border:"none",padding:"14px 20px",fontSize:"14px",fontWeight:t===e.id?700:500,color:t===e.id?"var(--color-primary)":"var(--color-text-muted)",cursor:"pointer",position:"relative",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s ease",borderBottom:t===e.id?"2px solid var(--color-primary)":"2px solid transparent",marginBottom:"-2px",whiteSpace:"nowrap"},children:[i.jsx("span",{children:e.icon}),i.jsx("span",{children:e.label})]},e.id))}),"general"===t&&(0,i.jsxs)("div",{style:{marginTop:24},children:[i.jsx("h3",{style:{marginTop:0,marginBottom:16},children:"Automation Rules"}),(0,i.jsxs)("div",{className:"grid grid-2",style:{gap:16,marginBottom:24},children:[(0,i.jsxs)("div",{children:[i.jsx("label",{className:"label",children:"Max Shipping Days"}),i.jsx(m.II,{type:"number",value:A,onChange:e=>B(Number(e.target.value)),hint:"Maximum delivery time from Amazon"})]}),(0,i.jsxs)("div",{children:[i.jsx("label",{className:"label",children:"Min Expected Profit ($)"}),i.jsx(m.II,{type:"number",value:z,onChange:e=>M(Number(e.target.value)),hint:"Minimum profit margin per order"})]}),(0,i.jsxs)("div",{children:[i.jsx("label",{className:"label",children:"Domestic Shipping Cost ($)"}),i.jsx(m.II,{type:"number",value:k,onChange:e=>E(Number(e.target.value)),hint:"Cost for domestic shipping"})]}),(0,i.jsxs)("div",{children:[i.jsx("label",{className:"label",children:"Review Band Percent (%)"}),i.jsx(m.II,{type:"number",value:T,onChange:e=>W(Number(e.target.value)),hint:"Percentage band for manual review"})]})]}),i.jsx("h3",{style:{marginBottom:16},children:"Options"}),(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:12,marginBottom:24},children:[(0,i.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:12,cursor:"pointer"},children:[i.jsx("input",{type:"checkbox",checked:I,onChange:e=>C(e.target.checked),style:{width:18,height:18}}),i.jsx("span",{children:"Include Amazon Points in calculations"})]}),(0,i.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:12,cursor:"pointer"},children:[i.jsx("input",{type:"checkbox",checked:P,onChange:e=>w(e.target.checked),style:{width:18,height:18}}),i.jsx("span",{children:"Include Domestic Shipping costs"})]})]}),i.jsx("h3",{style:{marginBottom:16},children:"Execution Mode"}),(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:12,marginBottom:24},children:[(0,i.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:12,cursor:"pointer"},children:[i.jsx("input",{type:"checkbox",checked:N,onChange:e=>R(e.target.checked),style:{width:18,height:18}}),i.jsx("span",{style:{fontWeight:600},children:"Enable Automation"})]}),(0,i.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:12,cursor:"pointer"},children:[i.jsx("input",{type:"checkbox",checked:Z,onChange:e=>q(e.target.checked),style:{width:18,height:18}}),i.jsx("span",{children:"Dry Run Mode (test without actual orders)"})]})]}),i.jsx(p.z,{onClick:ec,variant:"primary",fullWidth:!0,disabled:v,children:"\uD83D\uDCBE Save General Settings"})]}),"shopee"===t&&(0,i.jsxs)("div",{style:{marginTop:24},children:[i.jsx("h3",{style:{marginTop:0,marginBottom:16},children:"\uD83D\uDECD️ Shopee API Credentials"}),i.jsx("div",{style:{marginBottom:24},children:i.jsx(g.bZ,{variant:"info",title:"\uD83D\uDCDA How to Get Shopee Credentials",children:(0,i.jsxs)("ol",{style:{margin:"8px 0",paddingLeft:20,lineHeight:1.8},children:[(0,i.jsxs)("li",{children:["Go to ",i.jsx("strong",{children:"https://open.shopee.com/"})]}),i.jsx("li",{children:"Register and create a new app"}),i.jsx("li",{children:"Get Partner ID and Partner Key from app settings"}),i.jsx("li",{children:"Get Shop ID from your seller center"}),(0,i.jsxs)("li",{children:["See ",i.jsx("strong",{children:"SHOPEE_CREDENTIALS_GUIDE.md"})," for detailed steps"]})]})})}),(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:16,marginBottom:24},children:[i.jsx(m.II,{label:"Partner ID \uD83D\uDD22",value:G,onChange:e=>F(e.target.value),placeholder:"Enter numeric Partner ID (e.g., 1234567)",hint:"Find this in your Shopee Open Platform app settings"}),i.jsx(m.II,{label:"Partner Key \uD83D\uDD10",type:"password",value:K,onChange:e=>H(e.target.value),placeholder:"Enter Partner Key (secret)",hint:"Keep this secret! Used for signing API requests"}),i.jsx(m.II,{label:"Shop ID \uD83C\uDFEA",value:$,onChange:e=>V(e.target.value),placeholder:"Enter numeric Shop ID (e.g., 987654)",hint:"Get from your Shopee seller center URL or API"})]}),G&&K&&$&&i.jsx("div",{style:{marginBottom:16},children:i.jsx(g.bZ,{variant:"success",title:"✅ All fields filled",children:"Ready to save. Click the button below to securely store your credentials."})}),i.jsx(p.z,{onClick:eh,variant:"primary",fullWidth:!0,disabled:v,children:"\uD83D\uDD11 Save Shopee Credentials (Encrypted)"}),G&&K&&$&&i.jsx("div",{style:{marginTop:16},children:i.jsx(p.z,{onClick:async()=>{try{await f.Z.post("/orders/poll-now"),(0,y.M)("✅ Test poll initiated! Check Orders page for results.","success")}catch(e){(0,y.M)("Test failed: "+(e.response?.data?.error||"Unknown error"),"error")}},variant:"ghost",fullWidth:!0,children:"\uD83E\uDDEA Test Connection"})})]}),"amazon"===t&&(0,i.jsxs)("div",{style:{marginTop:24},children:[i.jsx("h3",{style:{marginTop:0,marginBottom:16},children:"Amazon Seller Credentials"}),i.jsx("div",{style:{marginBottom:24},children:i.jsx(g.bZ,{variant:"warning",children:"These credentials are used for automated browser login to Amazon Seller Central"})}),(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:16,marginBottom:24},children:[i.jsx(m.II,{label:"Amazon Email",type:"email",value:X,onChange:e=>J(e.target.value),placeholder:"your-email@example.com"}),i.jsx(m.II,{label:"Amazon Password",type:"password",value:Q,onChange:e=>Y(e.target.value),placeholder:"••••••••"}),i.jsx(m.II,{label:"Shipping Label",value:ee,onChange:e=>et(e.target.value),placeholder:"Shopee Warehouse",hint:"Default shipping label for orders"})]}),i.jsx(p.z,{onClick:eu,variant:"primary",fullWidth:!0,disabled:v,children:"\uD83D\uDD11 Save Amazon Credentials"})]}),"notifications"===t&&(0,i.jsxs)("div",{style:{marginTop:24},children:[i.jsx("h3",{style:{marginTop:0,marginBottom:16},children:"Alert Webhook"}),i.jsx("div",{style:{marginBottom:24},children:i.jsx(g.bZ,{variant:"info",children:"Configure Slack or Discord webhook URL to receive real-time alerts"})}),i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:16,marginBottom:24},children:i.jsx(m.II,{label:"Webhook URL",value:er,onChange:e=>es(e.target.value),placeholder:"https://hooks.slack.com/services/...",hint:"Slack or Discord webhook URL"})}),(0,i.jsxs)("div",{style:{display:"flex",gap:12},children:[i.jsx(p.z,{onClick:ep,variant:"ghost",fullWidth:!0,disabled:v,children:"\uD83E\uDDEA Test Webhook"}),i.jsx(p.z,{variant:"primary",fullWidth:!0,disabled:v,children:"\uD83D\uDCBE Save Webhook"})]})]})]}),i.jsx(y.Z,{}),S&&(0,i.jsxs)(i.Fragment,{children:[i.jsx(c.Z,{pageName:"settings",steps:h.Qu,onComplete:()=>n(!1)}),!s&&i.jsx(c.M,{onClick:()=>{}})]})]})]})}async function S({locale:e}){return{props:{...await (0,n.serverSideTranslations)(e,["common"])}}}s()}catch(e){s(e)}})},1377:e=>{e.exports=require("next-i18next")},5460:e=>{e.exports=require("next-i18next/serverSideTranslations")},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},9648:e=>{e.exports=import("axios")},5941:e=>{e.exports=import("swr")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},9796:e=>{e.exports=require("zlib")}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[332,839,552,754,52,202,438],()=>r(4806));module.exports=s})();