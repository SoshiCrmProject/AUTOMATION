"use strict";(()=>{var e={};e.id=26,e.ids=[26,660],e.modules={667:(e,r,t)=>{t.a(e,async(e,s)=>{try{t.r(r),t.d(r,{config:()=>m,default:()=>h,getServerSideProps:()=>g,getStaticPaths:()=>p,getStaticProps:()=>x,reportWebVitals:()=>j,routeModule:()=>y,unstable_getServerProps:()=>S,unstable_getServerSideProps:()=>D,unstable_getStaticParams:()=>f,unstable_getStaticPaths:()=>b,unstable_getStaticProps:()=>v});var a=t(8877),i=t(4591),n=t(6021),l=t(552),o=t.n(l),d=t(5270),c=t(283),u=e([c]);c=(u.then?(await u)():u)[0];let h=(0,n.l)(c,"default"),x=(0,n.l)(c,"getStaticProps"),p=(0,n.l)(c,"getStaticPaths"),g=(0,n.l)(c,"getServerSideProps"),m=(0,n.l)(c,"config"),j=(0,n.l)(c,"reportWebVitals"),v=(0,n.l)(c,"unstable_getStaticProps"),b=(0,n.l)(c,"unstable_getStaticPaths"),f=(0,n.l)(c,"unstable_getStaticParams"),S=(0,n.l)(c,"unstable_getServerProps"),D=(0,n.l)(c,"unstable_getServerSideProps"),y=new a.PagesRouteModule({definition:{kind:i.x.PAGES,page:"/dashboard",pathname:"/dashboard",bundlePath:"",filename:""},components:{App:d.default,Document:o()},userland:c});s()}catch(e){s(e)}})},1021:(e,r,t)=>{t.a(e,async(e,s)=>{try{t.d(r,{Z:()=>d});var a=t(997),i=t(5941),n=t(1522),l=t(1377),o=e([i,n]);[i,n]=o.then?(await o)():o;let c=e=>n.Z.get(e).then(e=>e.data);function d(){let{t:e}=(0,l.useTranslation)("common"),{data:r}=(0,i.default)("/api/settings",c),t=r?.isActive,s=r?.isDryRun;return(0,a.jsxs)("div",{className:"card",children:[a.jsx("h3",{style:{marginTop:0},children:e("automationStatusTitle")}),(0,a.jsxs)("div",{style:{display:"flex",gap:12,alignItems:"center"},children:[a.jsx("span",{className:"pill",style:{background:t?"#bbf7d0":"#fecdd3"},children:e(t?"on":"off")}),a.jsx("span",{className:"pill",style:{background:s?"#e0e7ff":"#e2e8f0"},children:e(s?"pillDryRun":"pillLive")})]}),(0,a.jsxs)("div",{style:{display:"grid",gap:6,marginTop:12,color:"#475569",fontSize:14},children:[a.jsx("div",{children:e("profitRuleLabel",{value:r?.minExpectedProfit??"—"})}),a.jsx("div",{children:e("maxShippingLabel",{value:r?.maxShippingDays??"—"})}),(0,a.jsxs)("div",{children:[e(r?.includeAmazonPoints?"pointsIncluded":"pointsExcluded")," \xb7"," ",e(r?.includeDomesticShipping?"domesticIncluded":"domesticExcluded")]})]})]})}s()}catch(e){s(e)}})},5364:(e,r,t)=>{t.a(e,async(e,s)=>{try{t.d(r,{Z:()=>u});var a=t(997),i=t(5941),n=t(9097),l=t.n(n),o=t(1522),d=t(1377),c=e([i,o]);[i,o]=c.then?(await c)():c;let h=e=>o.Z.get(e).then(e=>e.data);function u(){let{t:e}=(0,d.useTranslation)("common"),{data:r,error:t}=(0,i.default)("/api/credentials/shopee",h),{data:s,error:n}=(0,i.default)("/api/credentials/amazon",h),{data:o,error:c}=(0,i.default)("/api/settings",h),u=[{label:e("onboardingStepConnectShopee"),done:!!(r?.partnerId&&r?.hasSecrets),link:"/settings"},{label:e("onboardingStepConnectAmazon"),done:!!s?.hasPassword,link:"/settings"},{label:e("onboardingStepSetRules"),done:void 0!==o,link:"/settings"},{label:e("onboardingStepActivate"),done:!!o?.isActive,link:"/settings"}];return(0,a.jsxs)("div",{className:"card",children:[a.jsx("h3",{style:{marginTop:0},children:e("onboardingChecklistTitle")}),!r&&!s&&!o&&!(t||n||c)&&a.jsx("p",{children:e("loading")}),(t||n||c)&&a.jsx("p",{style:{color:"#ef4444"},children:e("genericError")}),a.jsx("div",{className:"grid grid-2",children:u.map(r=>(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[a.jsx("span",{className:"pill",style:{background:r.done?"#bbf7d0":"#e2e8f0"},children:r.done?"✓":"•"}),(0,a.jsxs)("div",{style:{flex:1},children:[a.jsx("div",{style:{fontWeight:600},children:r.label}),!r.done&&a.jsx(l(),{className:"btn btn-ghost",href:r.link,style:{padding:"6px 10px",fontSize:13},children:e("go")})]})]},r.label))})]})}s()}catch(e){s(e)}})},283:(e,r,t)=>{t.a(e,async(e,s)=>{try{t.r(r),t.d(r,{default:()=>b,getStaticProps:()=>f});var a=t(997),i=t(6689),n=t(9097),l=t.n(n),o=t(5941),d=t(5460),c=t(1377),u=t(1522),h=t(2684),x=t(1021),p=t(5364),g=t(3688),m=t(1935),j=t(4202),v=e([o,u,x,p]);[o,u,x,p]=v.then?(await v)():v;let S=e=>u.Z.get(e).then(e=>e.data);function b(){let{t:e}=(0,c.useTranslation)("common"),[r,t]=(0,i.useState)(null),[s,n]=(0,i.useState)("7d"),[d,u]=(0,i.useState)(!1),{data:v,error:b}=(0,o.default)("/orders/recent",S),{data:f}=(0,o.default)("/ops/queue",S,{shouldRetryOnError:!1}),{data:D}=(0,o.default)("/health",S,{shouldRetryOnError:!1}),y=!v&&!b,P=Array.isArray(v)?v:[],C=P.filter(e=>"FULFILLED"===e.processingStatus).length,k=P.filter(e=>"FAILED"===e.processingStatus||"SKIPPED"===e.processingStatus||e.errorItems.length>0).length,E=P.filter(e=>"QUEUED"===e.processingStatus||"PROCESSING"===e.processingStatus||"UNPROCESSED"===e.processingStatus).length,w=P.reduce((e,r)=>e+(r.orderTotal||0),0),A=P.length>0?(C/P.length*100).toFixed(1):"0",z=Array.from({length:"7d"===s?7:"30d"===s?30:90},(e,r)=>({label:`Day ${r+1}`,value:Math.floor(50*Math.random())+10})),I=[{label:e("statusProcessed")||"Processed",value:C,color:"var(--color-success)"},{label:e("statusError")||"Errors",value:k,color:"var(--color-error)"},{label:e("statusPending")||"Pending",value:E,color:"var(--color-warning)"}],O=P.find(e=>e.id===r);return(0,a.jsxs)("div",{className:"shell",children:[a.jsx(h.Z,{activeHref:"/dashboard"}),(0,a.jsxs)("div",{className:"container",children:[a.jsx("div",{style:{background:"linear-gradient(135deg, rgba(59, 130, 246, 0.08) 0%, rgba(139, 92, 246, 0.08) 100%)",borderRadius:"var(--radius-xl)",padding:"40px",marginBottom:"32px",border:"1px solid var(--color-border)"},children:(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:"20px"},children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{style:{fontSize:"42px",margin:"0 0 12px 0",fontWeight:900,background:"linear-gradient(135deg, var(--color-primary), var(--color-secondary))",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:["\uD83C\uDFAF ",e("navDashboard")||"Dashboard"]}),a.jsx("p",{style:{color:"var(--color-text-muted)",margin:0,fontSize:"16px"},children:"Monitor your dropshipping operations in real-time"})]}),(0,a.jsxs)("div",{style:{display:"flex",gap:"12px",alignItems:"center",flexWrap:"wrap"},children:[(0,a.jsxs)("select",{value:s,onChange:e=>n(e.target.value),className:"select",style:{width:"auto",marginBottom:0},children:[a.jsx("option",{value:"7d",children:"Last 7 days"}),a.jsx("option",{value:"30d",children:"Last 30 days"}),a.jsx("option",{value:"90d",children:"Last 90 days"})]}),a.jsx(j.zx,{onClick:()=>window.location.reload(),children:"\uD83D\uDD04 Refresh"})]})]})}),D&&(0,a.jsxs)(j.bZ,{variant:"success",title:"System Operational",children:["All services are running normally. Queue: ",f?.waiting||0," waiting, ",f?.active||0," active, ",f?.failed||0," failed"]}),!D&&a.jsx(j.bZ,{variant:"error",title:"System Issues Detected",children:"Unable to connect to backend services. Please check your connection."}),y?a.jsx(j.TK,{size:"lg",text:"Loading dashboard data..."}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"grid grid-4",style:{marginBottom:"32px"},children:[a.jsx(j.Rm,{label:e("statusProcessed")||"Processed Orders",value:C,trend:12,icon:"✅",color:"success"}),a.jsx(j.Rm,{label:e("totalRevenue")||"Total Revenue",value:`\xa5${w.toLocaleString()}`,trend:8,icon:"\uD83D\uDCB0",color:"primary"}),a.jsx(j.Rm,{label:e("statusError")||"Errors",value:k,trend:-5,icon:"⚠️",color:"error"}),a.jsx(j.Rm,{label:"Success Rate",value:`${A}%`,trend:3,icon:"\uD83D\uDCCA",color:"info"})]}),(0,a.jsxs)("div",{className:"grid grid-2",style:{marginBottom:"32px"},children:[(0,a.jsxs)(j.Zb,{children:[a.jsx(j.Ol,{title:"Order Status Distribution",icon:"\uD83D\uDCCA"}),a.jsx(j.bS,{data:I,height:"250px"})]}),(0,a.jsxs)(j.Zb,{children:[a.jsx(j.Ol,{title:"Orders Trend",icon:"\uD83D\uDCC8"}),a.jsx(j.fF,{data:z,height:"250px",showDots:!0})]})]}),a.jsx("div",{style:{marginBottom:"32px"},children:a.jsx(j.Zb,{children:a.jsx(j.mQ,{tabs:[{id:"overview",label:"Overview",icon:"\uD83D\uDCCB",content:(0,a.jsxs)("div",{className:"grid grid-2",children:[a.jsx(x.Z,{}),a.jsx(p.Z,{})]})},{id:"recent",label:"Recent Orders",icon:"\uD83D\uDED2",badge:P.length,content:a.jsx(j.iA,{columns:[{key:"shopeeOrderSn",header:"Order ID",width:"150px"},{key:"processingStatus",header:"Status",render:e=>a.jsx(j.Ct,{variant:"FULFILLED"===e.processingStatus?"success":"FAILED"===e.processingStatus?"error":"SKIPPED"===e.processingStatus?"warning":"info",children:e.processingStatus})},{key:"orderTotal",header:"Amount",render:e=>`\xa5${(e.orderTotal||0).toLocaleString()}`},{key:"createdAt",header:"Date",render:e=>new Date(e.createdAt).toLocaleDateString()},{key:"actions",header:"Actions",render:e=>a.jsx(j.zx,{size:"sm",variant:"ghost",onClick:()=>t(e.id),children:"View"})}],data:P,emptyMessage:"No recent orders",onRowClick:e=>t(e.id)})},{id:"quick-actions",label:"Quick Actions",icon:"⚡",content:(0,a.jsxs)("div",{className:"grid grid-4",children:[a.jsx(l(),{href:"/analytics",children:a.jsx(j.zx,{fullWidth:!0,children:"\uD83D\uDCC8 Analytics"})}),a.jsx(l(),{href:"/inventory",children:a.jsx(j.zx,{fullWidth:!0,children:"\uD83D\uDCE6 Inventory"})}),a.jsx(l(),{href:"/crm",children:a.jsx(j.zx,{fullWidth:!0,children:"\uD83D\uDC65 CRM"})}),a.jsx(l(),{href:"/notifications",children:a.jsx(j.zx,{fullWidth:!0,children:"\uD83D\uDD14 Notifications"})}),a.jsx(l(),{href:"/settings",children:a.jsx(j.zx,{fullWidth:!0,variant:"ghost",children:"⚙️ Settings"})}),a.jsx(l(),{href:"/orders",children:a.jsx(j.zx,{fullWidth:!0,variant:"ghost",children:"\uD83D\uDED2 Orders"})}),a.jsx(l(),{href:"/errors",children:a.jsx(j.zx,{fullWidth:!0,variant:"ghost",children:"⚠️ Errors"})}),a.jsx(l(),{href:"/ops",children:a.jsx(j.zx,{fullWidth:!0,variant:"ghost",children:"\uD83D\uDD27 Operations"})})]})}]})})})]}),O&&a.jsx(j.u_,{isOpen:!!r,onClose:()=>t(null),title:`Order Details: ${O.shopeeOrderSn||O.id}`,size:"lg",children:(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:[(0,a.jsxs)("div",{className:"grid grid-2",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"label",children:"Order ID"}),a.jsx("p",{style:{margin:"4px 0",fontWeight:600},children:O.shopeeOrderSn||O.id})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"label",children:"Status"}),a.jsx(j.Ct,{variant:"FULFILLED"===O.processingStatus?"success":"FAILED"===O.processingStatus?"error":"warning",children:O.processingStatus})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"label",children:"Amount"}),(0,a.jsxs)("p",{style:{margin:"4px 0",fontWeight:600,fontSize:"18px",color:"var(--color-primary)"},children:["\xa5",(O.orderTotal||0).toLocaleString()]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"label",children:"Date"}),a.jsx("p",{style:{margin:"4px 0"},children:new Date(O.createdAt).toLocaleString()})]})]}),O.amazonOrder&&(0,a.jsxs)(j.bZ,{variant:"success",title:"Amazon Order",children:["Amazon Order ID: ",O.amazonOrder.amazonOrderId||"Processing..."]}),O.errorItems&&O.errorItems.length>0&&(0,a.jsxs)(j.bZ,{variant:"error",title:"Errors Detected",children:[O.errorItems.length," error(s) found for this order"]})]})}),a.jsx(g.Z,{pageName:"dashboard",steps:m.tN,onComplete:()=>u(!1)}),!d&&a.jsx(g.M,{onClick:()=>{}})]})]})}async function f({locale:e}){return{props:{...await (0,d.serverSideTranslations)(e,["common"])}}}s()}catch(e){s(e)}})},1377:e=>{e.exports=require("next-i18next")},5460:e=>{e.exports=require("next-i18next/serverSideTranslations")},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},9648:e=>{e.exports=import("axios")},5941:e=>{e.exports=import("swr")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},9796:e=>{e.exports=require("zlib")}};var r=require("../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[332,839,552,754,52,202,438],()=>t(667));module.exports=s})();