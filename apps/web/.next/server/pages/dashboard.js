"use strict";(()=>{var e={};e.id=26,e.ids=[26,660],e.modules={667:(e,r,t)=>{t.a(e,async(e,a)=>{try{t.r(r),t.d(r,{config:()=>v,default:()=>h,getServerSideProps:()=>g,getStaticPaths:()=>m,getStaticProps:()=>p,reportWebVitals:()=>x,routeModule:()=>S,unstable_getServerProps:()=>y,unstable_getServerSideProps:()=>j,unstable_getStaticParams:()=>D,unstable_getStaticPaths:()=>f,unstable_getStaticProps:()=>b});var s=t(8877),i=t(4591),l=t(6021),n=t(552),o=t.n(n),d=t(4076),c=t(283),u=e([c]);c=(u.then?(await u)():u)[0];let h=(0,l.l)(c,"default"),p=(0,l.l)(c,"getStaticProps"),m=(0,l.l)(c,"getStaticPaths"),g=(0,l.l)(c,"getServerSideProps"),v=(0,l.l)(c,"config"),x=(0,l.l)(c,"reportWebVitals"),b=(0,l.l)(c,"unstable_getStaticProps"),f=(0,l.l)(c,"unstable_getStaticPaths"),D=(0,l.l)(c,"unstable_getStaticParams"),y=(0,l.l)(c,"unstable_getServerProps"),j=(0,l.l)(c,"unstable_getServerSideProps"),S=new s.PagesRouteModule({definition:{kind:i.x.PAGES,page:"/dashboard",pathname:"/dashboard",bundlePath:"",filename:""},components:{App:d.default,Document:o()},userland:c});a()}catch(e){a(e)}})},1021:(e,r,t)=>{t.a(e,async(e,a)=>{try{t.d(r,{Z:()=>d});var s=t(997),i=t(5941),l=t(1522),n=t(1377),o=e([i,l]);[i,l]=o.then?(await o)():o;let c=e=>l.Z.get(e).then(e=>e.data);function d(){let{t:e}=(0,n.useTranslation)("common"),{data:r}=(0,i.default)("/api/settings",c),t=r?.isActive,a=r?.isDryRun;return(0,s.jsxs)("div",{className:"card",children:[s.jsx("h3",{style:{marginTop:0},children:e("automationStatusTitle")}),(0,s.jsxs)("div",{style:{display:"flex",gap:12,alignItems:"center"},children:[s.jsx("span",{className:"pill",style:{background:t?"#bbf7d0":"#fecdd3"},children:e(t?"on":"off")}),s.jsx("span",{className:"pill",style:{background:a?"#e0e7ff":"#e2e8f0"},children:e(a?"pillDryRun":"pillLive")})]}),(0,s.jsxs)("div",{style:{display:"grid",gap:6,marginTop:12,color:"#475569",fontSize:14},children:[s.jsx("div",{children:e("profitRuleLabel",{value:r?.minExpectedProfit??"â€”"})}),s.jsx("div",{children:e("maxShippingLabel",{value:r?.maxShippingDays??"â€”"})}),(0,s.jsxs)("div",{children:[e(r?.includeAmazonPoints?"pointsIncluded":"pointsExcluded")," \xb7"," ",e(r?.includeDomesticShipping?"domesticIncluded":"domesticExcluded")]})]})]})}a()}catch(e){a(e)}})},5364:(e,r,t)=>{t.a(e,async(e,a)=>{try{t.d(r,{Z:()=>u});var s=t(997),i=t(5941),l=t(9097),n=t.n(l),o=t(1522),d=t(1377),c=e([i,o]);[i,o]=c.then?(await c)():c;let h=e=>o.Z.get(e).then(e=>e.data);function u(){let{t:e}=(0,d.useTranslation)("common"),{data:r,error:t}=(0,i.default)("/api/credentials/shopee",h),{data:a,error:l}=(0,i.default)("/api/credentials/amazon",h),{data:o,error:c}=(0,i.default)("/api/settings",h),u=[{label:e("onboardingStepConnectShopee"),done:!!(r?.partnerId&&r?.hasSecrets),link:"/settings"},{label:e("onboardingStepConnectAmazon"),done:!!a?.hasPassword,link:"/settings"},{label:e("onboardingStepSetRules"),done:void 0!==o,link:"/settings"},{label:e("onboardingStepActivate"),done:!!o?.isActive,link:"/settings"}];return(0,s.jsxs)("div",{className:"card",children:[s.jsx("h3",{style:{marginTop:0},children:e("onboardingChecklistTitle")}),!r&&!a&&!o&&!(t||l||c)&&s.jsx("p",{children:e("loading")}),(t||l||c)&&s.jsx("p",{style:{color:"#ef4444"},children:e("genericError")}),s.jsx("div",{className:"grid grid-2",children:u.map(r=>(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[s.jsx("span",{className:"pill",style:{background:r.done?"#bbf7d0":"#e2e8f0"},children:r.done?"âœ“":"â€¢"}),(0,s.jsxs)("div",{style:{flex:1},children:[s.jsx("div",{style:{fontWeight:600},children:r.label}),!r.done&&s.jsx(n(),{className:"btn btn-ghost",href:r.link,style:{padding:"6px 10px",fontSize:13},children:e("go")})]})]},r.label))})]})}a()}catch(e){a(e)}})},283:(e,r,t)=>{t.a(e,async(e,a)=>{try{t.r(r),t.d(r,{default:()=>f,getStaticProps:()=>D});var s=t(997),i=t(6689),l=t(9097),n=t.n(l),o=t(5941),d=t(5460),c=t(1377),u=t(1522),h=t(5681),p=t(1021),m=t(5364),g=t(3688),v=t(1935),x=t(3877),b=e([o,u,p,m]);[o,u,p,m]=b.then?(await b)():b;let y=e=>u.Z.get(e).then(e=>e.data),j=e=>"number"!=typeof e||Number.isNaN(e)?0:e,S=(e,r="en-US",t={})=>new Intl.NumberFormat(r,t).format(j(e)),w=(e,r="en-US",t="JPY",a={})=>new Intl.NumberFormat(r,{style:"currency",currency:t,maximumFractionDigits:0,...a}).format(j(e)),P=(e,r="en-US",t={})=>new Intl.DateTimeFormat(r,{year:"numeric",month:"short",day:"numeric",...t}).format(new Date(e)),C=(e,r="en-US",t={})=>new Intl.DateTimeFormat(r,{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",...t}).format(new Date(e)),k=(e,r="en-US",t={})=>new Intl.DateTimeFormat(r,{hour:"numeric",minute:"numeric",...t}).format(new Date(e));function f(){let{t:e,i18n:r}=(0,c.useTranslation)("common"),t="ja"===r.language?"ja-JP":"en-US",[a,l]=(0,i.useState)(null),[d,u]=(0,i.useState)("7d"),[b,f]=(0,i.useState)(!1),{data:D,error:j}=(0,o.default)("/orders/recent",y),{data:E}=(0,o.default)("/ops/queue",y,{shouldRetryOnError:!1}),{data:I}=(0,o.default)("/health",y,{shouldRetryOnError:!1}),O=!D&&!j,N=Array.isArray(D)?D:[],A=N.filter(e=>"FULFILLED"===e.processingStatus).length,T=N.filter(e=>"FAILED"===e.processingStatus||"SKIPPED"===e.processingStatus||e.errorItems.length>0).length,R=N.filter(e=>"QUEUED"===e.processingStatus||"PROCESSING"===e.processingStatus||"UNPROCESSED"===e.processingStatus).length,z=N.reduce((e,r)=>e+(r.orderTotal||0),0),L=N.length>0?A/N.length*100:0,F=S(L,t,{minimumFractionDigits:1,maximumFractionDigits:1}),Z=()=>{let e="7d"===d?7:"30d"===d?30:90;return Array.from({length:e},(e,r)=>({label:`Day ${r+1}`,value:Math.floor(50*Math.random())+10}))},U=(0,i.useMemo)(()=>Z(),[d]),q=[{label:e("statusProcessed")||"Processed",value:A,color:"var(--color-success)"},{label:e("statusError")||"Errors",value:T,color:"var(--color-error)"},{label:e("statusPending")||"Pending",value:R,color:"var(--color-warning)"}],M=N.find(e=>e.id===a),W=[{label:e("statusProcessed")||"Processed",value:S(A,t),helper:e("ordersProcessedTodayHelper")||"Completed in the selected window",color:"var(--color-success)"},{label:e("statusPending")||"Pending",value:S(R,t),helper:e("ordersAwaitingAction")||"Queued or processing",color:"var(--color-warning)"},{label:e("statusError")||"Errors",value:S(T,t),helper:e("ordersNeedReview")||"Requires manual review",color:"var(--color-error)"}],_=s.jsx(x.Ct,{variant:I?"success":"error",size:"lg",children:I?e("systemOperational")||"System operational":e("systemIssuesDetected")||"Issues detected"}),Q=(0,i.useMemo)(()=>[{label:e("navAnalytics")||"Analytics",href:"/analytics",icon:"\uD83D\uDCC8"},{label:e("navInventory")||"Inventory",href:"/inventory",icon:"\uD83D\uDCE6"},{label:e("navCRM")||"CRM",href:"/crm",icon:"\uD83D\uDC65"},{label:e("navNotifications")||"Notifications",href:"/notifications",icon:"\uD83D\uDD14"}],[e]),$=(0,i.useMemo)(()=>[{label:e("navAnalytics")||"Analytics",href:"/analytics",icon:"\uD83D\uDCC8",variant:void 0},{label:e("navInventory")||"Inventory",href:"/inventory",icon:"\uD83D\uDCE6",variant:void 0},{label:e("navCRM")||"CRM",href:"/crm",icon:"\uD83D\uDC65",variant:void 0},{label:e("navNotifications")||"Notifications",href:"/notifications",icon:"\uD83D\uDD14",variant:void 0},{label:e("navSettings")||"Settings",href:"/settings",icon:"âš™ï¸",variant:"ghost"},{label:e("navOrders")||"Orders",href:"/orders",icon:"\uD83D\uDED2",variant:"ghost"},{label:e("viewErrors")||"Errors",href:"/errors",icon:"âš ï¸",variant:"ghost"},{label:e("viewOperations")||"Operations",href:"/ops",icon:"\uD83D\uDD27",variant:"ghost"}],[e]),H=s.jsx("div",{style:{display:"grid",gap:12},children:W.map(e=>(0,s.jsxs)("div",{style:{padding:16,borderRadius:"var(--radius-lg)",background:"rgba(255,255,255,0.9)",border:"1px solid rgba(255,255,255,0.7)",boxShadow:"var(--shadow-sm)"},children:[s.jsx("span",{style:{fontSize:12,color:"rgba(15,23,42,0.6)",textTransform:"uppercase",letterSpacing:.5},children:e.label}),s.jsx("div",{style:{fontSize:28,fontWeight:800,color:e.color},children:e.value}),s.jsx("p",{style:{margin:0,fontSize:13,color:"rgba(15,23,42,0.7)"},children:e.helper})]},e.label))}),K=(0,s.jsxs)("span",{style:{color:"var(--color-text-muted)",fontSize:14},children:[e("successRate")||"Success rate",": ",F,"% \xb7 ",e("totalRevenue")||"Total revenue",": ",w(z,t)]}),B=(0,s.jsxs)("div",{className:"stack-md wrap",style:{alignItems:"center"},children:[s.jsx("div",{className:"full-width-mobile",style:{minWidth:200},children:s.jsx(x.Ph,{label:e("timeRange")||"Time range",value:d,onChange:e=>u(e.target.value),options:[{value:"7d",label:e("last7Days")||"Last 7 days"},{value:"30d",label:e("last30Days")||"Last 30 days"},{value:"90d",label:e("last90Days")||"Last 90 days"}]})}),(0,s.jsxs)(x.zx,{type:"button",className:"full-width-mobile",onClick:()=>{},children:["\uD83D\uDD04 ",e("refreshData")]})]}),G=[{label:e("waiting")||"Waiting",value:E?.waiting??0,variant:"warning"},{label:e("active")||"Active",value:E?.active??0,variant:"info"},{label:e("failed")||"Failed",value:E?.failed??0,variant:"error"}],V=r=>{switch(r){case"FULFILLED":return e("statusProcessed")||"Processed";case"FAILED":return e("statusError")||"Error";case"SKIPPED":return e("statusSkipped")||"Skipped";case"QUEUED":case"PROCESSING":case"UNPROCESSED":return e("statusPending")||"Pending";default:return r?.replace(/_/g," ")||"-"}},J=(0,s.jsxs)("div",{className:"stack-md wrap",style:{alignItems:"center"},children:[s.jsx("div",{className:"stack-sm",style:{flexWrap:"wrap",gap:8},children:G.map(e=>(0,s.jsxs)(x.Ct,{variant:e.variant,children:[e.label,": ",S(e.value,t)]},e.label))}),(0,s.jsxs)("span",{className:"full-width-mobile",style:{fontSize:13,color:"var(--color-text-muted)"},children:[e("lastUpdated")||"Last updated",": ",k(new Date,t)]}),(0,s.jsxs)("div",{className:"stack-sm full-width-mobile",style:{marginLeft:"auto",flexWrap:"wrap",gap:8,justifyContent:"flex-end"},children:[(0,s.jsxs)(x.zx,{type:"button",variant:"ghost",className:"full-width-mobile",onClick:()=>{},children:["\uD83D\uDD27 ",e("viewOperations")||"Operations"]}),(0,s.jsxs)(x.zx,{type:"button",variant:"ghost",className:"full-width-mobile",onClick:()=>{},children:["âš ï¸ ",e("viewErrors")||"Errors"]})]})]}),X=(0,s.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:16},children:[(0,s.jsxs)(x.Zb,{hover:!1,children:[s.jsx(x.Ol,{title:e("queueHealth")||"Queue health",subtitle:e("ordersHeroDescription")||"Live automation status",icon:"\uD83E\uDE7A"}),s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:12},children:G.map(e=>(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsx("span",{style:{fontSize:13,color:"var(--color-text-muted)"},children:e.label}),s.jsx(x.Ct,{variant:e.variant,children:S(e.value,t)})]},e.label))})]}),(0,s.jsxs)(x.Zb,{hover:!1,children:[s.jsx(x.Ol,{title:e("quickLinks")||"Quick links",subtitle:e("dailyWorkflows")||"Daily workflows",icon:"âš¡"}),s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8},children:Q.map(e=>s.jsx(x.zx,{type:"button",variant:"ghost",onClick:()=>{},children:`${e.icon} ${e.label}`},e.href))})]}),(0,s.jsxs)(x.Zb,{hover:!1,children:[s.jsx(x.Ol,{title:e("proTips")||"Pro tips",subtitle:e("stayAhead")||"Stay ahead of alerts",icon:"\uD83D\uDCA1"}),(0,s.jsxs)("ul",{style:{margin:0,paddingLeft:18,color:"var(--color-text-muted)",display:"flex",flexDirection:"column",gap:6,fontSize:13},children:[s.jsx("li",{children:e("keepSuccessRateHigh")||"Keep success rate above 90% before enabling auto-fulfillment."}),s.jsx("li",{children:e("dailyHealthCheck")||"Run the automation health check every morning."}),s.jsx("li",{children:e("triageErrorsQuickly")||"Triage failed orders within 2 hours to avoid backlog."})]})]})]});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(h.Z,{activeHref:"/dashboard",title:`ðŸŽ¯ ${e("navDashboard")||"Dashboard"}`,description:e("dashboardHeroSubtitle")||"Monitor fulfillment, revenue, and system health in one place.",heroBadge:_,heroAside:H,heroFooter:K,actions:B,toolbar:J,sidebar:X,heroBackground:"linear-gradient(120deg, #fef9c3 0%, #fde68a 35%, #e0f2fe 100%)",children:[I&&(0,s.jsxs)(x.bZ,{variant:"success",title:e("systemOperational"),children:[e("systemsRunningSmoothly")||"All services operating normally."," ",e("queue")||"Queue",": ",S(E?.waiting??0,t)," ",e("waiting")||"waiting",", ",S(E?.active??0,t)," ",e("active")||"active",", ",S(E?.failed??0,t)," ",e("failed")||"failed"]}),!I&&s.jsx(x.bZ,{variant:"error",title:e("systemIssuesDetected")||"Issues detected",children:e("checkConnection")||"Unable to connect to backend services. Please check your connection."}),O?s.jsx(x.TK,{size:"lg",text:e("loadingDashboardData")||"Loading dashboard data..."}):(0,s.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:24},children:[(0,s.jsxs)("div",{className:"grid grid-4",children:[s.jsx(x.Rm,{label:e("statusProcessed")||"Processed Orders",value:S(A,t),trend:12,icon:"âœ…",color:"success"}),s.jsx(x.Rm,{label:e("totalRevenue")||"Total Revenue",value:w(z,t),trend:8,icon:"\uD83D\uDCB0",color:"primary"}),s.jsx(x.Rm,{label:e("statusError")||"Errors",value:S(T,t),trend:-5,icon:"âš ï¸",color:"error"}),s.jsx(x.Rm,{label:e("successRate")||"Success Rate",value:`${F}%`,trend:3,icon:"\uD83D\uDCCA",color:"info"})]}),(0,s.jsxs)("div",{className:"grid grid-2",children:[(0,s.jsxs)(x.Zb,{children:[s.jsx(x.Ol,{title:e("orderStatusDistribution")||"Order status distribution",icon:"\uD83D\uDCCA"}),s.jsx(x.bS,{data:q,height:"250px"})]}),(0,s.jsxs)(x.Zb,{children:[s.jsx(x.Ol,{title:e("ordersTrend")||"Orders trend",icon:"\uD83D\uDCC8"}),s.jsx(x.fF,{data:U,height:"250px",showDots:!0})]})]}),s.jsx(x.Zb,{children:s.jsx(x.mQ,{tabs:[{id:"overview",label:e("dashboardTabOverview")||"Overview",icon:"\uD83D\uDCCB",content:(0,s.jsxs)("div",{className:"grid grid-2",children:[s.jsx(p.Z,{}),s.jsx(m.Z,{})]})},{id:"recent",label:e("dashboardTabRecent")||"Recent Orders",icon:"\uD83D\uDED2",badge:N.length,content:s.jsx(x.iA,{columns:[{key:"shopeeOrderSn",header:e("ordersTableOrderId")||"Order ID",width:"150px"},{key:"processingStatus",header:e("ordersTableStatus")||"Status",render:e=>s.jsx(x.Ct,{variant:"FULFILLED"===e.processingStatus?"success":"FAILED"===e.processingStatus?"error":"SKIPPED"===e.processingStatus?"warning":"info",children:V(e.processingStatus)})},{key:"orderTotal",header:e("ordersTableAmount")||"Amount",render:e=>w(e.orderTotal||0,t)},{key:"createdAt",header:e("ordersTableDate")||"Date",render:e=>P(e.createdAt,t)},{key:"actions",header:e("ordersTableActions")||"Actions",render:r=>s.jsx(x.zx,{size:"sm",variant:"ghost",onClick:()=>l(r.id),children:e("viewOrder")||"View"})}],data:N,emptyMessage:e("emptyNoRecentOrders"),onRowClick:e=>l(e.id)})},{id:"quick-actions",label:e("dashboardTabQuickActions")||"Quick Actions",icon:"âš¡",content:s.jsx("div",{className:"grid grid-4",children:$.map(e=>s.jsx(n(),{href:e.href,children:s.jsx(x.zx,{fullWidth:!0,variant:e.variant,children:`${e.icon} ${e.label}`})},e.href))})}]})})]})]}),M&&s.jsx(x.u_,{isOpen:!!a,onClose:()=>l(null),title:`${e("orderDetailsTitle")||"Order details"}: ${M.shopeeOrderSn||M.id}`,size:"lg",children:(0,s.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:[(0,s.jsxs)("div",{className:"grid grid-2",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"label",children:e("ordersTableOrderId")||"Order ID"}),s.jsx("p",{style:{margin:"4px 0",fontWeight:600},children:M.shopeeOrderSn||M.id})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"label",children:e("ordersTableStatus")||"Status"}),s.jsx(x.Ct,{variant:"FULFILLED"===M.processingStatus?"success":"FAILED"===M.processingStatus?"error":"warning",children:M.processingStatus})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"label",children:e("orderAmountLabel")||"Amount"}),s.jsx("p",{style:{margin:"4px 0",fontWeight:600,fontSize:"18px",color:"var(--color-primary)"},children:w(M.orderTotal||0,t)})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"label",children:e("orderDateLabel")||"Date"}),s.jsx("p",{style:{margin:"4px 0"},children:C(M.createdAt,t)})]})]}),M.amazonOrder&&(0,s.jsxs)(x.bZ,{variant:"success",title:e("amazonOrder"),children:[e("amazonOrderId")||"Amazon Order ID",": ",M.amazonOrder.amazonOrderId||e("processingPlaceholder")||"Processing..."]}),M.errorItems&&M.errorItems.length>0&&s.jsx(x.bZ,{variant:"error",title:e("errorsDetected"),children:e("errorsFoundForOrder",{count:M.errorItems.length})||`${M.errorItems.length} error(s) found for this order`})]})}),s.jsx(g.Z,{pageName:"dashboard",steps:v.tN,onComplete:()=>f(!1)}),!b&&s.jsx(g.M,{onClick:()=>{}})]})}async function D({locale:e}){return{props:{...await (0,d.serverSideTranslations)(e,["common"])}}}a()}catch(e){a(e)}})},1377:e=>{e.exports=require("next-i18next")},5460:e=>{e.exports=require("next-i18next/serverSideTranslations")},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},9648:e=>{e.exports=import("axios")},5941:e=>{e.exports=import("swr")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},9796:e=>{e.exports=require("zlib")}};var r=require("../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[332,839,552,754,20,198],()=>t(667));module.exports=a})();