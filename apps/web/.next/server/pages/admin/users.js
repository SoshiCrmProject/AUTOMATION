"use strict";(()=>{var e={};e.id=635,e.ids=[635,660],e.modules={8473:(e,t,r)=>{r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{config:()=>g,default:()=>p,getServerSideProps:()=>m,getStaticPaths:()=>x,getStaticProps:()=>h,reportWebVitals:()=>S,routeModule:()=>P,unstable_getServerProps:()=>w,unstable_getServerSideProps:()=>y,unstable_getStaticParams:()=>b,unstable_getStaticPaths:()=>v,unstable_getStaticProps:()=>j});var a=r(8877),i=r(4591),n=r(6021),l=r(552),d=r.n(l),o=r(5270),c=r(3516),u=e([c]);c=(u.then?(await u)():u)[0];let p=(0,n.l)(c,"default"),h=(0,n.l)(c,"getStaticProps"),x=(0,n.l)(c,"getStaticPaths"),m=(0,n.l)(c,"getServerSideProps"),g=(0,n.l)(c,"config"),S=(0,n.l)(c,"reportWebVitals"),j=(0,n.l)(c,"unstable_getStaticProps"),v=(0,n.l)(c,"unstable_getStaticPaths"),b=(0,n.l)(c,"unstable_getStaticParams"),w=(0,n.l)(c,"unstable_getServerProps"),y=(0,n.l)(c,"unstable_getServerSideProps"),P=new a.PagesRouteModule({definition:{kind:i.x.PAGES,page:"/admin/users",pathname:"/admin/users",bundlePath:"",filename:""},components:{App:o.default,Document:d()},userland:c});s()}catch(e){s(e)}})},3516:(e,t,r)=>{r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{default:()=>p,getStaticProps:()=>h});var a=r(997),i=r(6689),n=r(5460),l=r(1377),d=r(6555),o=r(1522),c=r(7029),u=e([o]);function p(){let{t:e}=(0,l.useTranslation)("common"),[t,r]=(0,i.useState)([]),[s,n]=(0,i.useState)(""),[u,p]=(0,i.useState)(!1),[h,x]=(0,i.useState)(new Set),[m,g]=(0,i.useState)(new Set),S=async()=>{p(!0);try{let e=await o.Z.get("/api/admin/users");r(e.data)}catch(t){(0,c.M)(t?.response?.data?.error??e("genericError"),"error")}finally{p(!1)}};(0,i.useEffect)(()=>{S()},[]);let j=async t=>{x(e=>new Set(e).add(t));try{await o.Z.post(`/api/admin/users/${t}/toggle`),(0,c.M)(e("adminToggleSuccess")),S()}catch(t){(0,c.M)(t?.response?.data?.error??e("adminToggleError"),"error")}finally{x(e=>{let r=new Set(e);return r.delete(t),r})}},v=async t=>{if(s){g(e=>new Set(e).add(t));try{await o.Z.post(`/api/admin/users/${t}/reset-password`,{password:s}),n(""),(0,c.M)(e("passwordReset"))}catch(t){(0,c.M)(t?.response?.data?.error??e("adminResetError"),"error")}finally{g(e=>{let r=new Set(e);return r.delete(t),r})}}};return(0,a.jsxs)("div",{className:"container",children:[a.jsx(d.Z,{activeHref:"/admin/users"}),(0,a.jsxs)("div",{className:"card",children:[a.jsx("h1",{children:e("adminUsersTitle")}),a.jsx("p",{children:e("adminUsersDesc")})]}),(0,a.jsxs)("div",{className:"card",children:[u&&a.jsx("p",{children:e("loading")}),(0,a.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[a.jsx("thead",{children:(0,a.jsxs)("tr",{children:[a.jsx("th",{children:e("adminEmail")}),a.jsx("th",{children:e("adminRole")}),a.jsx("th",{children:e("adminStatus")}),a.jsx("th",{children:e("adminActions")})]})}),a.jsx("tbody",{children:t.map(t=>(0,a.jsxs)("tr",{children:[a.jsx("td",{children:t.email}),a.jsx("td",{children:t.role}),a.jsx("td",{children:t.isActive?e("active"):e("inactive")}),(0,a.jsxs)("td",{children:[a.jsx("button",{className:"button",onClick:()=>j(t.id),style:{marginRight:8},disabled:h.has(t.id),children:h.has(t.id)?e("loading"):t.isActive?e("deactivate"):e("activate")}),a.jsx("input",{className:"input",style:{width:160,display:"inline-block",marginRight:8},placeholder:e("newPassword"),type:"password",value:s,onChange:e=>n(e.target.value)}),a.jsx("button",{className:"button",onClick:()=>v(t.id),disabled:m.has(t.id),children:m.has(t.id)?e("loading"):e("reset")})]})]},t.id))})]})]})]})}async function h({locale:e}){return{props:{...await (0,n.serverSideTranslations)(e,["common"])}}}o=(u.then?(await u)():u)[0],s()}catch(e){s(e)}})},1377:e=>{e.exports=require("next-i18next")},5460:e=>{e.exports=require("next-i18next/serverSideTranslations")},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},9816:e=>{e.exports=require("styled-jsx/style")},9648:e=>{e.exports=import("axios")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},9796:e=>{e.exports=require("zlib")}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[332,839,552,754,107],()=>r(8473));module.exports=s})();