"use strict";(()=>{var e={};e.id=769,e.ids=[769,660],e.modules={3667:(e,t,a)=>{a.a(e,async(e,i)=>{try{a.r(t),a.d(t,{config:()=>f,default:()=>h,getServerSideProps:()=>x,getStaticPaths:()=>v,getStaticProps:()=>p,reportWebVitals:()=>y,routeModule:()=>S,unstable_getServerProps:()=>C,unstable_getServerSideProps:()=>D,unstable_getStaticParams:()=>b,unstable_getStaticPaths:()=>g,unstable_getStaticProps:()=>m});var n=a(8877),l=a(4591),r=a(6021),s=a(552),o=a.n(s),c=a(4076),d=a(7422),u=e([d]);d=(u.then?(await u)():u)[0];let h=(0,r.l)(d,"default"),p=(0,r.l)(d,"getStaticProps"),v=(0,r.l)(d,"getStaticPaths"),x=(0,r.l)(d,"getServerSideProps"),f=(0,r.l)(d,"config"),y=(0,r.l)(d,"reportWebVitals"),m=(0,r.l)(d,"unstable_getStaticProps"),g=(0,r.l)(d,"unstable_getStaticPaths"),b=(0,r.l)(d,"unstable_getStaticParams"),C=(0,r.l)(d,"unstable_getServerProps"),D=(0,r.l)(d,"unstable_getServerSideProps"),S=new n.PagesRouteModule({definition:{kind:l.x.PAGES,page:"/notifications",pathname:"/notifications",bundlePath:"",filename:""},components:{App:c.default,Document:o()},userland:d});i()}catch(e){i(e)}})},1522:(e,t,a)=>{a.a(e,async(e,i)=>{try{a.d(t,{Z:()=>s});var n=a(9648),l=e([n]);let r=(n=(l.then?(await l)():l)[0]).default.create({baseURL:"https://automation-api-tau.vercel.app"});r.defaults.adapter,r.interceptors.request.use(e=>{let t=e.url||"";if(t.startsWith("/api/orders/"))e.url=t.replace("/api","");else for(let a of["/api/settings","/api/credentials/","/api/shops","/api/admin/","/api/ops/","/api/auth/","/api/mappings","/api/products/","/api/profit/"])if(t.startsWith(a)){e.url=t.replace("/api","");break}return e}),r.interceptors.response.use(e=>e,e=>(e.response?.status,Promise.reject(e)));let s=r;i()}catch(e){i(e)}})},7422:(e,t,a)=>{a.a(e,async(e,i)=>{try{a.r(t),a.d(t,{default:()=>v,getStaticProps:()=>x});var n=a(997),l=a(6689),r=a(5941),s=a(5460),o=a(1377),c=a(1522),d=a(5681),u=a(3877),h=a(7029),p=e([r,c]);[r,c]=p.then?(await p)():p;let f=e=>c.Z.get(e).then(e=>e.data),y=(e,t)=>new Intl.NumberFormat(t,{maximumFractionDigits:0}).format(e),m=(e,t,a)=>new Intl.DateTimeFormat(t,{month:"short",day:"numeric",year:"numeric",...a}).format(new Date(e)),g=(e,t,a)=>new Intl.DateTimeFormat(t,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",...a}).format(new Date(e));function v(){let{t:e,i18n:t}=(0,o.useTranslation)("common"),a="ja"===t.language?"ja-JP":"en-US",[i,s]=(0,l.useState)(""),[p,v]=(0,l.useState)(!1),[x,b]=(0,l.useState)(!1),[C,D]=(0,l.useState)(!1),[S,j]=(0,l.useState)({name:"",type:"EMAIL",config:{}}),[A,w]=(0,l.useState)({name:"",event:"ORDER_PLACED",channelId:"",priority:"MEDIUM",template:""}),[I,R]=(0,l.useState)("all"),[E,k]=(0,l.useState)(""),[M,P]=(0,l.useState)(""),{data:T,mutate:L}=(0,r.default)(i?`/api/notifications/channels/${i}`:null,f),{data:N,mutate:z}=(0,r.default)(i?`/api/notifications/rules?shopId=${i}`:null,f),{data:F,mutate:O}=(0,r.default)(i?`/api/notifications/history?shopId=${i}&limit=50`:null,f),W=e=>{switch(e){case"EMAIL":return"\uD83D\uDCE7";case"SMS":return"\uD83D\uDCF1";case"SLACK":return"\uD83D\uDCAC";case"DISCORD":return"\uD83C\uDFAE";case"WEBHOOK":return"\uD83D\uDD17";default:return"\uD83D\uDD14"}},H=t=>{switch(t){case"EMAIL":return e("channelEmail")||"Email";case"SMS":return e("channelSMS")||"SMS";case"SLACK":return e("channelSlack")||"Slack";case"DISCORD":return e("channelDiscord")||"Discord";case"WEBHOOK":return e("channelWebhook")||"Webhook";default:return t}},$=e=>{switch(e){case"CRITICAL":return"error";case"HIGH":return"warning";case"MEDIUM":default:return"info";case"LOW":return"success"}},_=t=>{switch(t){case"CRITICAL":return e("priorityCritical")||"Critical";case"HIGH":return e("priorityHigh")||"High";case"MEDIUM":return e("priorityMedium")||"Medium";case"LOW":return e("priorityLow")||"Low";default:return t}},Z=e=>{switch(e){case"SENT":return"success";case"FAILED":return"error";case"PENDING":return"warning";default:return"info"}},q=t=>{switch(t){case"SENT":return e("notificationStatusSent")||"Sent";case"FAILED":return e("notificationStatusFailed")||"Failed";case"PENDING":return e("notificationStatusPending")||"Pending";default:return e("notificationStatusUnknown")||t||"Unknown"}},U=async t=>{try{await c.Z.post(`/api/notifications/test/${t}`),(0,h.M)(e("toastTestNotificationSuccess")||"Test notification sent","success"),O()}catch(t){(0,h.M)(e("toastTestNotificationFailed")||"Failed to send test notification","error")}},K=async()=>{if(!i||!S.name){(0,h.M)(e("toastPleaseFilLRequiredFields")||"Please fill in all required fields","error");return}D(!0);try{await c.Z.post("/api/notifications/channels",{shopId:i,...S}),(0,h.M)(e("toastChannelCreated")||"Channel created","success"),v(!1),j({name:"",type:"EMAIL",config:{}}),L()}catch(t){(0,h.M)(t.response?.data?.error||e("toastChannelCreateFailed")||"Failed to create channel","error")}finally{D(!1)}},B=async()=>{if(!i||!A.name||!A.channelId){(0,h.M)(e("toastPleaseFilLRequiredFields")||"Please fill in all required fields","error");return}D(!0);try{await c.Z.post("/api/notifications/rules",{shopId:i,...A}),(0,h.M)(e("toastRuleCreated")||"Notification rule created","success"),b(!1),w({name:"",event:"ORDER_PLACED",channelId:"",priority:"MEDIUM",template:""}),z()}catch(t){(0,h.M)(t.response?.data?.error||e("toastRuleCreateFailed")||"Failed to create rule","error")}finally{D(!1)}},G=async(t,a)=>{try{await c.Z.patch(`/api/notifications/channels/${t}`,{isActive:a}),(0,h.M)(a?e("toastChannelActivated")||"Channel activated":e("toastChannelDeactivated")||"Channel deactivated","success"),L()}catch(t){(0,h.M)(e("toastChannelUpdateFailed")||"Failed to update channel","error")}},V=async(t,a)=>{try{await c.Z.patch(`/api/notifications/rules/${t}`,{isActive:a}),(0,h.M)(a?e("toastRuleActivated")||"Rule activated":e("toastRuleDeactivated")||"Rule deactivated","success"),z()}catch(t){(0,h.M)(e("toastRuleUpdateFailed")||"Failed to update rule","error")}},Q=async t=>{if(confirm(e("confirmDeleteChannel")||"Delete this channel?"))try{await c.Z.delete(`/api/notifications/channels/${t}`),(0,h.M)(e("toastChannelDeleted")||"Channel deleted","success"),L()}catch(t){(0,h.M)(e("toastChannelDeleteFailed")||"Failed to delete channel","error")}},J=Array.isArray(T)?T:[],X=Array.isArray(N)?N:[],Y=Array.isArray(F)?F:[],ee=!!i.trim()&&(!T||!N||!F),et={totalChannels:J.length,activeChannels:J.filter(e=>e.isActive).length,totalRules:X.length,activeRules:X.filter(e=>e.isActive).length,sentToday:Y.filter(e=>{let t=new Date(e.sentAt),a=new Date;return t.toDateString()===a.toDateString()}).length,failedToday:Y.filter(e=>{let t=new Date(e.sentAt),a=new Date;return t.toDateString()===a.toDateString()&&"FAILED"===e.status}).length},ea=(0,l.useMemo)(()=>"all"===I?J:J.filter(e=>e.type===I),[I,J]),ei=(0,l.useMemo)(()=>{if(!E.trim())return X;let e=E.toLowerCase();return X.filter(t=>{let a=J.find(e=>e.id===t.channelId);return t.name.toLowerCase().includes(e)||t.event.toLowerCase().includes(e)||(a?.name.toLowerCase().includes(e)??!1)})},[E,X,J]),en=(0,l.useMemo)(()=>{if(!M.trim())return Y;let e=M.toLowerCase();return Y.filter(t=>t.subject.toLowerCase().includes(e)||t.message.toLowerCase().includes(e)||t.status.toLowerCase().includes(e))},[M,Y]),el=(0,l.useMemo)(()=>Y.filter(e=>"FAILED"===e.status).slice(0,3),[Y]),er=!!i.trim(),es=n.jsx(u.Ct,{variant:er?"success":"warning",children:er?e("liveData")||"Live data":e("awaitingShopId")||"Awaiting shop ID"}),eo=[{label:e("notificationsChannels")||"Channels",value:y(et.totalChannels,a),helper:e("notificationsChannelsHelper")||"Configured endpoints"},{label:e("notificationsRules")||"Rules",value:y(et.totalRules,a),helper:e("notificationsRulesHelper")||"Automation recipes"},{label:e("notificationsSentToday")||"Sent today",value:y(et.sentToday,a),helper:e("notificationsSentHelper")||"24h deliveries"}],ec=n.jsx("div",{style:{display:"grid",gap:12},children:eo.map(e=>(0,n.jsxs)("div",{style:{padding:14,borderRadius:"var(--radius-md)",background:"rgba(255, 255, 255, 0.8)",border:"1px solid rgba(148, 163, 184, 0.4)"},children:[n.jsx("span",{style:{fontSize:13,color:"var(--color-text-muted)",textTransform:"uppercase"},children:e.label}),n.jsx("div",{style:{fontSize:26,fontWeight:800,color:"var(--color-text)"},children:e.value}),n.jsx("p",{style:{margin:0,color:"var(--color-text-muted)",fontSize:13},children:e.helper})]},e.label))}),ed=n.jsx("span",{style:{color:"var(--color-text-muted)",fontSize:14},children:e("notificationsHeroFooter")||"Provide a shop ID to synchronize rules and delivery logs."}),eu=(0,n.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",gap:12,alignItems:"center"},children:[n.jsx("div",{style:{flex:"1 1 220px",minWidth:200},children:n.jsx(u.II,{label:e("shopId")||"Shop ID",value:i,onChange:e=>s(e.target.value),placeholder:e("enterShopIDNotifications")||"Enter Shop ID"})}),n.jsx(u.Ph,{label:e("channelType")||"Channel type",value:I,onChange:e=>R(e.target.value),options:[{value:"all",label:e("allChannels")||"All channels"},{value:"EMAIL",label:e("channelEmail")||"Email"},{value:"SMS",label:e("channelSMS")||"SMS"},{value:"SLACK",label:e("channelSlack")||"Slack"},{value:"DISCORD",label:e("channelDiscord")||"Discord"},{value:"WEBHOOK",label:e("channelWebhook")||"Webhook"}],style:{minWidth:180}}),n.jsx("div",{style:{flex:"1 1 220px",minWidth:200},children:n.jsx(u.II,{label:e("search")||"Search",placeholder:e("searchNotifications")||"Search rules or history",value:E,onChange:e=>k(e.target.value)})}),n.jsx("div",{style:{flex:"1 1 220px",minWidth:200},children:n.jsx(u.II,{label:e("historySearch")||"History filter",placeholder:e("searchHistory")||"Filter delivery history",value:M,onChange:e=>P(e.target.value)})})]}),eh=(0,n.jsxs)("div",{className:"stack-md wrap",children:[(0,n.jsxs)(u.zx,{type:"button",className:"full-width-mobile",onClick:()=>v(!0),disabled:!er,children:["âž• ",e("addChannel")||"Add channel"]}),(0,n.jsxs)(u.zx,{type:"button",className:"full-width-mobile",onClick:()=>b(!0),disabled:!er,children:["âš™ï¸ ",e("addRule")||"Add rule"]}),(0,n.jsxs)(u.zx,{type:"button",variant:"ghost",className:"full-width-mobile",onClick:()=>{er&&(L(),z(),O(),(0,h.M)(e("notificationsRefreshing")||"Refreshing notification data","success"))},disabled:!er,children:["â™»ï¸ ",e("refreshData")||"Refresh"]}),(0,n.jsxs)(u.zx,{type:"button",variant:"ghost",className:"full-width-mobile",onClick:()=>{P(""),k(""),R("all")},disabled:!M&&!E&&"all"===I,children:["\uD83E\uDDFC ",e("clearFilters")||"Clear"]})]}),ep=(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:16},children:[(0,n.jsxs)(u.Zb,{hover:!1,children:[n.jsx(u.Ol,{title:e("notificationsHealth")||"Channel health",subtitle:e("notificationsHealthSubtitle")||"Live status",icon:"\uD83E\uDE7A"}),n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:10},children:[{label:e("activeChannels")||"Active channels",value:`${y(et.activeChannels,a)}/${y(et.totalChannels,a)}`,variant:"success"},{label:e("activeRules")||"Active rules",value:`${y(et.activeRules,a)}/${y(et.totalRules,a)}`,variant:"info"},{label:e("failedToday")||"Failures today",value:y(et.failedToday,a),variant:et.failedToday>0?"error":"default"}].map(e=>(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsx("span",{style:{color:"var(--color-text-muted)",fontSize:14},children:e.label}),n.jsx(u.Ct,{variant:e.variant,children:e.value})]},e.label))})]}),(0,n.jsxs)(u.Zb,{hover:!1,children:[n.jsx(u.Ol,{title:e("notificationsBestPractices")||"Best practices",subtitle:e("notificationsBestPracticesSubtitle")||"Keep alerts helpful",icon:"\uD83D\uDCA1"}),n.jsx("ul",{style:{margin:0,paddingLeft:18,display:"flex",flexDirection:"column",gap:8},children:[e("notificationsTipDedupe")||"Deduplicate alerts per channel to avoid spam.",e("notificationsTipPriority")||"Reserve critical priority for blocking events.",e("notificationsTipTesting")||"Test channels weekly to verify credentials."].map(e=>n.jsx("li",{style:{fontSize:13,color:"var(--color-text-muted)"},children:e},e))})]}),el.length>0&&(0,n.jsxs)(u.Zb,{hover:!1,children:[n.jsx(u.Ol,{title:e("notificationsRecentFailures")||"Recent failures",subtitle:e("notificationsRecentFailuresSubtitle")||"Last few delivery errors",icon:"\uD83D\uDEA8"}),n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:12},children:el.map(e=>(0,n.jsxs)("div",{style:{border:"1px solid var(--color-border)",borderRadius:"var(--radius-md)",padding:12,background:"var(--color-surface)"},children:[n.jsx("strong",{style:{display:"block",fontSize:13},children:e.subject}),n.jsx("span",{style:{fontSize:12,color:"var(--color-text-muted)"},children:g(e.sentAt,a)}),e.errorMessage&&n.jsx("p",{style:{margin:"6px 0 0",fontSize:12,color:"var(--color-error)"},children:e.errorMessage})]},e.id))})]})]});return(0,n.jsxs)(n.Fragment,{children:[n.jsx(d.Z,{activeHref:"/notifications",title:`ðŸ”” ${e("notificationsTitle")||"Notification Center"}`,description:e("notificationsHeroSubtitle")||"Multi-channel alerts, automation rules, and delivery tracking",heroBadge:es,heroAside:ec,heroFooter:ed,toolbar:eu,actions:eh,sidebar:ep,heroBackground:"linear-gradient(135deg, #fef9c3 0%, #dbeafe 100%)",children:(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:24},children:[!er&&n.jsx(u.bZ,{variant:"info",title:e("getStarted")||"Get started",children:e("notificationsProvideShop")||"Enter a Shop ID to load channels, rules, and delivery history."}),er&&(0,n.jsxs)(n.Fragment,{children:[ee&&n.jsx(u.TK,{text:e("loadingNotifications")||"Loading notification data"}),(0,n.jsxs)(u.Zb,{children:[n.jsx(u.Ol,{title:e("notificationsStatsTitle")||"Operations pulse",subtitle:e("notificationsStatsSubtitle")||"Quick look at live automation",icon:"\uD83D\uDCCA"}),(0,n.jsxs)("div",{className:"grid grid-4",style:{gap:16},children:[n.jsx(u.Rm,{icon:"\uD83D\uDCE1",label:e("totalChannels")||"Total channels",value:y(et.totalChannels,a),color:"primary",trend:et.activeChannels}),n.jsx(u.Rm,{icon:"âš™ï¸",label:e("activeRules")||"Active rules",value:y(et.activeRules,a),color:"info"}),n.jsx(u.Rm,{icon:"\uD83D\uDCE4",label:e("sentToday")||"Sent today",value:y(et.sentToday,a),color:"success"}),n.jsx(u.Rm,{icon:"âš ï¸",label:e("failedToday")||"Failed today",value:y(et.failedToday,a),color:"error"})]})]}),n.jsx(u.Zb,{children:n.jsx(u.mQ,{tabs:[{id:"channels",label:e("channels")||"Channels",icon:"\uD83D\uDCE1",badge:J.length,content:n.jsx("div",{style:{padding:24},children:ea.length>0?n.jsx("div",{className:"grid grid-3",style:{gap:20},children:ea.map(t=>(0,n.jsxs)("div",{style:{padding:20,background:"rgba(255, 255, 255, 0.9)",borderRadius:"var(--radius-lg)",border:t.isActive?"1px solid rgba(34, 197, 94, 0.4)":"1px solid var(--color-border)",boxShadow:"var(--shadow-sm)"},children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"start",justifyContent:"space-between",marginBottom:12},children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12},children:[n.jsx("span",{style:{fontSize:28},children:W(t.type)}),(0,n.jsxs)("div",{children:[n.jsx("h4",{style:{margin:0,fontSize:16},children:t.name}),n.jsx("p",{style:{fontSize:13,color:"var(--color-text-muted)",margin:"4px 0 0"},children:H(t.type)})]})]}),n.jsx(u.Ct,{variant:t.isActive?"success":"error",children:t.isActive?e("active")||"Active":e("inactive")||"Inactive"})]}),(0,n.jsxs)("div",{style:{fontSize:12,color:"var(--color-text-muted)",marginBottom:16},children:[e("created")||"Created",": ",m(t.createdAt,a)]}),(0,n.jsxs)("div",{style:{display:"flex",gap:8},children:[n.jsx(u.zx,{variant:"primary",size:"sm",onClick:()=>U(t.id),disabled:!t.isActive,fullWidth:!0,children:e("test")||"Test"}),n.jsx(u.zx,{variant:t.isActive?"warning":"success",size:"sm",onClick:()=>G(t.id,!t.isActive),fullWidth:!0,children:t.isActive?e("disable")||"Disable":e("enable")||"Enable"}),n.jsx(u.zx,{variant:"danger",size:"sm",onClick:()=>Q(t.id),"aria-label":e("deleteChannelAction")||"Delete channel",title:e("deleteChannelAction")||"Delete channel",children:"\uD83D\uDDD1ï¸"})]})]},t.id))}):n.jsx(u.ub,{icon:"\uD83D\uDCE1",title:e("noChannelsConfigured")||"No channels configured",description:e("descriptionAddFirstChannel")||"Connect email, SMS, or webhooks to start sending alerts.",action:(0,n.jsxs)(u.zx,{type:"button",onClick:()=>v(!0),children:["âž• ",e("addChannel")||"Add channel"]})})})},{id:"rules",label:e("rules")||"Rules",icon:"âš™ï¸",badge:X.length,content:n.jsx("div",{style:{padding:24},children:ei.length>0?n.jsx(u.iA,{columns:[{key:"name",header:e("ruleName")||"Rule name"},{key:"event",header:e("event")||"Event",width:"160px"},{key:"channel",header:e("channel")||"Channel",width:"160px",render:t=>{let a=J.find(e=>e.id===t.channelId);return a?(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[n.jsx("span",{children:W(a.type)}),(0,n.jsxs)("div",{children:[n.jsx("div",{style:{fontSize:13,fontWeight:600},children:a.name}),n.jsx("div",{style:{fontSize:12,color:"var(--color-text-muted)"},children:H(a.type)})]})]}):n.jsx("span",{style:{fontSize:12,color:"var(--color-text-muted)"},children:e("unknown")||"Unknown"})}},{key:"priority",header:e("priority")||"Priority",width:"120px",render:e=>n.jsx(u.Ct,{variant:$(e.priority),children:_(e.priority)})},{key:"status",header:e("status")||"Status",width:"110px",render:t=>n.jsx(u.Ct,{variant:t.isActive?"success":"error",children:t.isActive?e("active")||"Active":e("inactive")||"Inactive"})},{key:"actions",header:e("actions")||"Actions",width:"140px",render:t=>n.jsx(u.zx,{variant:t.isActive?"warning":"success",size:"sm",onClick:()=>V(t.id,!t.isActive),children:t.isActive?e("disable")||"Disable":e("enable")||"Enable"})}],data:ei}):n.jsx(u.ub,{icon:"âš™ï¸",title:e("noNotificationRules")||"No notification rules",description:e("descriptionCreateAutomationRules")||"Automate alerts by adding rules for each event.",action:(0,n.jsxs)(u.zx,{type:"button",onClick:()=>b(!0),children:["âš™ï¸ ",e("addRule")||"Add rule"]})})})},{id:"history",label:e("history")||"History",icon:"\uD83D\uDCDC",badge:Y.length,content:n.jsx("div",{style:{padding:24},children:en.length>0?n.jsx(u.iA,{columns:[{key:"subject",header:e("subject")||"Subject",render:e=>(0,n.jsxs)("div",{children:[n.jsx("div",{style:{fontWeight:600},children:e.subject}),(0,n.jsxs)("div",{style:{fontSize:13,color:"var(--color-text-muted)",marginTop:4},children:[e.message.substring(0,80),"..."]})]})},{key:"priority",header:e("priority")||"Priority",width:"110px",render:e=>n.jsx(u.Ct,{variant:$(e.priority),children:_(e.priority)})},{key:"status",header:e("status")||"Status",width:"110px",render:e=>n.jsx(u.Ct,{variant:Z(e.status),children:q(e.status)})},{key:"channel",header:e("channel")||"Channel",width:"140px",render:t=>{let a=J.find(e=>e.id===t.channelId),i=a?.type||t.channelType||"UNKNOWN";return(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[n.jsx("span",{children:W(i)}),(0,n.jsxs)("div",{children:[n.jsx("div",{style:{fontSize:12,fontWeight:600},children:a?.name||t.channelName||e("unknown")||"Unknown"}),n.jsx("div",{style:{fontSize:11,color:"var(--color-text-muted)"},children:H(i)})]})]})}},{key:"sentAt",header:e("sentAt")||"Sent at",width:"180px",render:e=>n.jsx("span",{style:{fontSize:13,color:"var(--color-text-muted)"},children:g(e.sentAt,a)})},{key:"error",header:e("error")||"Error",width:"100px",render:t=>t.errorMessage?(0,n.jsxs)("span",{style:{fontSize:12,color:"var(--color-error)",cursor:"pointer"},title:t.errorMessage,children:["âš ï¸ ",e("error")||"Error"]}):null}],data:en}):n.jsx(u.ub,{icon:"\uD83D\uDCDC",title:e("noNotificationHistory")||"No notification history",description:e("descriptionSentNotifications")||"Recent delivery attempts will appear here."})})}]})})]})]})}),n.jsx(h.Z,{}),n.jsx(u.u_,{isOpen:p,onClose:()=>{v(!1),j({name:"",type:"EMAIL",config:{}})},title:e("addNotificationChannel")||"Add Notification Channel",children:(0,n.jsxs)("div",{style:{padding:"24px",display:"flex",flexDirection:"column",gap:"16px"},children:[n.jsx(u.II,{label:e("channelName")||"Channel Name",value:S.name,onChange:e=>j({...S,name:e.target.value}),placeholder:e("channelNamePlaceholder")}),n.jsx(u.Ph,{label:e("channelType")||"Channel Type",value:S.type,onChange:e=>j({...S,type:e.target.value}),options:[{value:"EMAIL",label:`ðŸ“§ ${e("channelEmail")||"Email"}`},{value:"SMS",label:`ðŸ“± ${e("channelSMS")||"SMS"}`},{value:"SLACK",label:`ðŸ’¬ ${e("channelSlack")||"Slack"}`},{value:"DISCORD",label:`ðŸŽ® ${e("channelDiscord")||"Discord"}`},{value:"WEBHOOK",label:`ðŸ”— ${e("channelWebhook")||"Webhook"}`}]}),n.jsx(u.bZ,{variant:"info",children:e("channelConfigHint")||"Channel configuration can be set after creation"}),(0,n.jsxs)("div",{style:{display:"flex",gap:"12px",marginTop:"8px"},children:[n.jsx(u.zx,{onClick:K,disabled:C,fullWidth:!0,children:C?e("creatingChannel")||"Creating...":e("createChannel")||"Create Channel"}),n.jsx(u.zx,{onClick:()=>v(!1),variant:"ghost",fullWidth:!0,children:e("cancel")||"Cancel"})]})]})}),n.jsx(u.u_,{isOpen:x,onClose:()=>{b(!1),w({name:"",event:"ORDER_PLACED",channelId:"",priority:"MEDIUM",template:""})},title:e("createNotificationRule")||"Create Notification Rule",size:"lg",children:(0,n.jsxs)("div",{style:{padding:"24px",display:"flex",flexDirection:"column",gap:"16px"},children:[n.jsx(u.II,{label:e("ruleName")||"Rule Name",value:A.name,onChange:e=>w({...A,name:e.target.value}),placeholder:e("ruleNamePlaceholder")}),n.jsx(u.Ph,{label:e("eventTrigger")||"Trigger Event",value:A.event,onChange:e=>w({...A,event:e.target.value}),options:[{value:"ORDER_PLACED",label:e("eventOrderPlaced")||"Order Placed"},{value:"ORDER_PAID",label:e("eventOrderPaid")||"Order Paid"},{value:"ORDER_SHIPPED",label:e("eventOrderShipped")||"Order Shipped"},{value:"ORDER_FAILED",label:e("eventOrderFailed")||"Order Failed"},{value:"LOW_STOCK",label:e("eventLowStock")||"Low Stock"},{value:"PRICE_CHANGE",label:e("eventPriceChange")||"Price Change"},{value:"ERROR_OCCURRED",label:e("eventError")||"Error"}]}),n.jsx(u.Ph,{label:e("notificationChannel")||"Notification Channel",value:A.channelId,onChange:e=>w({...A,channelId:e.target.value}),options:[{value:"",label:e("selectChannelPlaceholder")||"Select channel..."},...J.filter(e=>e.isActive).map(e=>({value:e.id,label:`${W(e.type)} ${e.name} (${H(e.type)})`}))]}),n.jsx(u.Ph,{label:e("priority")||"Priority",value:A.priority,onChange:e=>w({...A,priority:e.target.value}),options:[{value:"LOW",label:`ðŸŸ¢ ${e("priorityLow")||"Low"}`},{value:"MEDIUM",label:`ðŸŸ¡ ${e("priorityMedium")||"Medium"}`},{value:"HIGH",label:`ðŸŸ  ${e("priorityHigh")||"High"}`},{value:"CRITICAL",label:`ðŸ”´ ${e("priorityCritical")||"Critical"}`}]}),(0,n.jsxs)("div",{children:[n.jsx("label",{className:"label",children:e("messageTemplate")||"Message Template"}),n.jsx("textarea",{className:"input",value:A.template,onChange:e=>w({...A,template:e.target.value}),placeholder:e("messageTemplatePlaceholder"),rows:4,style:{width:"100%",resize:"vertical",fontFamily:"monospace",fontSize:"13px"}}),n.jsx("p",{style:{fontSize:"12px",color:"var(--color-text-muted)",marginTop:"8px"},children:e("messageTemplateVariablesHint")||"Available variables: {{ orderId }}, {{ customerName }}, {{ amount }}, {{ status }}"})]}),(0,n.jsxs)("div",{style:{display:"flex",gap:"12px",marginTop:"8px"},children:[n.jsx(u.zx,{onClick:B,disabled:C||!A.channelId,fullWidth:!0,children:C?e("creatingRule")||"Creating...":e("createRule")||"Create Rule"}),n.jsx(u.zx,{onClick:()=>b(!1),variant:"ghost",fullWidth:!0,children:e("cancel")||"Cancel"})]})]})})]})}async function x({locale:e}){return{props:{...await (0,s.serverSideTranslations)(e,["common"])}}}i()}catch(e){i(e)}})},1377:e=>{e.exports=require("next-i18next")},5460:e=>{e.exports=require("next-i18next/serverSideTranslations")},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},9648:e=>{e.exports=import("axios")},5941:e=>{e.exports=import("swr")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},9796:e=>{e.exports=require("zlib")}};var t=require("../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),i=t.X(0,[332,839,552,754,20],()=>a(3667));module.exports=i})();