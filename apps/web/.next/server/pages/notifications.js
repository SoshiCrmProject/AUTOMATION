"use strict";(()=>{var e={};e.id=769,e.ids=[769,660],e.modules={3667:(e,t,s)=>{s.a(e,async(e,r)=>{try{s.r(t),s.d(t,{config:()=>m,default:()=>h,getServerSideProps:()=>g,getStaticPaths:()=>p,getStaticProps:()=>x,reportWebVitals:()=>j,routeModule:()=>b,unstable_getServerProps:()=>y,unstable_getServerSideProps:()=>D,unstable_getStaticParams:()=>f,unstable_getStaticPaths:()=>S,unstable_getStaticProps:()=>v});var a=s(8877),i=s(4591),n=s(6021),l=s(552),c=s.n(l),o=s(5270),d=s(7422),u=e([d]);d=(u.then?(await u)():u)[0];let h=(0,n.l)(d,"default"),x=(0,n.l)(d,"getStaticProps"),p=(0,n.l)(d,"getStaticPaths"),g=(0,n.l)(d,"getServerSideProps"),m=(0,n.l)(d,"config"),j=(0,n.l)(d,"reportWebVitals"),v=(0,n.l)(d,"unstable_getStaticProps"),S=(0,n.l)(d,"unstable_getStaticPaths"),f=(0,n.l)(d,"unstable_getStaticParams"),y=(0,n.l)(d,"unstable_getServerProps"),D=(0,n.l)(d,"unstable_getServerSideProps"),b=new a.PagesRouteModule({definition:{kind:i.x.PAGES,page:"/notifications",pathname:"/notifications",bundlePath:"",filename:""},components:{App:o.default,Document:c()},userland:d});r()}catch(e){r(e)}})},7422:(e,t,s)=>{s.a(e,async(e,r)=>{try{s.r(t),s.d(t,{default:()=>h,getStaticProps:()=>x});var a=s(997),i=s(6689),n=s(5941),l=s(5460),c=s(1377),o=s(1522),d=s(2684),u=e([n,o]);[n,o]=u.then?(await u)():u;let p=e=>o.Z.get(e).then(e=>e.data);function h(){let{t:e}=(0,c.useTranslation)("common"),[t,s]=(0,i.useState)(""),[r,l]=(0,i.useState)(""),{data:u}=(0,n.default)(t?`/api/notifications/channels/${t}`:null,p),{data:h}=(0,n.default)(t?`/api/notifications/history?shopId=${t}&limit=50`:null,p),x=e=>{switch(e){case"EMAIL":return"\uD83D\uDCE7";case"SMS":return"\uD83D\uDCF1";case"SLACK":return"\uD83D\uDCAC";case"DISCORD":return"\uD83C\uDFAE";case"WEBHOOK":return"\uD83D\uDD17";default:return"\uD83D\uDD14"}},g=e=>{switch(e){case"CRITICAL":return"error";case"HIGH":return"warning";case"MEDIUM":default:return"info";case"LOW":return"success"}},m=e=>{switch(e){case"SENT":return"success";case"FAILED":return"error";case"PENDING":return"warning";default:return"info"}},j=async e=>{try{await o.Z.post(`/api/notifications/test/${e}`),alert("Test notification sent!")}catch(e){alert("Failed to send test notification")}};return(0,a.jsxs)("div",{className:"shell",children:[a.jsx(d.Z,{activeHref:"/notifications"}),(0,a.jsxs)("div",{className:"container",children:[a.jsx("div",{className:"hero",style:{marginBottom:32},children:(0,a.jsxs)("div",{children:[a.jsx("h1",{style:{fontSize:36,margin:0},children:"\uD83D\uDD14 Notification Center"}),a.jsx("p",{style:{color:"var(--color-text-muted)",marginTop:8},children:"Manage notification channels, rules, and view delivery history"})]})}),(0,a.jsxs)("div",{className:"card",style:{marginBottom:24},children:[a.jsx("label",{className:"label",children:"Shop ID"}),a.jsx("input",{className:"input",type:"text",placeholder:"Enter Shop ID",value:t,onChange:e=>s(e.target.value)})]}),t&&(0,a.jsxs)(a.Fragment,{children:[u&&u.length>0&&(0,a.jsxs)("div",{className:"card",style:{marginBottom:24},children:[a.jsx("h3",{style:{marginTop:0},children:"\uD83D\uDCE1 Notification Channels"}),a.jsx("div",{className:"grid grid-3",children:u.map(e=>(0,a.jsxs)("div",{className:"card",style:{background:e.isActive?"linear-gradient(135deg, var(--color-surface), var(--color-elevated))":"var(--color-hover)",opacity:e.isActive?1:.6},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:12},children:[a.jsx("span",{style:{fontSize:32},children:x(e.type)}),(0,a.jsxs)("div",{style:{flex:1},children:[a.jsx("h4",{style:{margin:0},children:e.name}),a.jsx("div",{style:{fontSize:12,color:"var(--color-text-muted)",marginTop:4},children:e.type})]}),e.isActive?a.jsx("span",{className:"badge badge-success",children:"Active"}):a.jsx("span",{className:"badge",children:"Inactive"})]}),a.jsx("button",{className:"btn btn-ghost",style:{width:"100%"},onClick:()=>j(e.id),disabled:!e.isActive,children:"Send Test"})]},e.id))})]}),h&&h.length>0&&(0,a.jsxs)("div",{className:"card",children:[a.jsx("h3",{style:{marginTop:0},children:"\uD83D\uDCDC Notification History"}),a.jsx("div",{className:"table-wrapper",children:(0,a.jsxs)("table",{className:"table",children:[a.jsx("thead",{children:(0,a.jsxs)("tr",{children:[a.jsx("th",{children:"Subject"}),a.jsx("th",{children:"Priority"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Channel"}),a.jsx("th",{children:"Sent At"}),a.jsx("th",{children:"Details"})]})}),a.jsx("tbody",{children:h.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsxs)("td",{children:[a.jsx("div",{style:{fontWeight:600},children:e.subject}),(0,a.jsxs)("div",{style:{fontSize:13,color:"var(--color-text-light)",marginTop:4},children:[e.message.substring(0,60),"..."]})]}),a.jsx("td",{children:a.jsx("span",{className:`badge badge-${g(e.priority)}`,children:e.priority})}),a.jsx("td",{children:a.jsx("span",{className:`badge badge-${m(e.status)}`,children:e.status})}),a.jsx("td",{children:a.jsx("span",{className:"pill",children:u?.find(t=>t.id===e.channelId)?.type||"Unknown"})}),a.jsx("td",{style:{fontSize:13,color:"var(--color-text-muted)"},children:new Date(e.sentAt).toLocaleString()}),a.jsx("td",{children:e.errorMessage&&a.jsx("span",{style:{fontSize:12,color:"var(--color-error)",cursor:"pointer"},title:e.errorMessage,children:"⚠️ Error"})})]},e.id))})]})})]})]}),!t&&(0,a.jsxs)("div",{className:"alert alert-info",children:[a.jsx("span",{style:{fontSize:20},children:"ℹ️"}),(0,a.jsxs)("div",{children:[a.jsx("strong",{children:"Get Started"}),a.jsx("p",{style:{marginTop:4},children:"Enter your Shop ID above to manage notifications"})]})]})]})]})}async function x({locale:e}){return{props:{...await (0,l.serverSideTranslations)(e,["common"])}}}r()}catch(e){r(e)}})},1377:e=>{e.exports=require("next-i18next")},5460:e=>{e.exports=require("next-i18next/serverSideTranslations")},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},9648:e=>{e.exports=import("axios")},5941:e=>{e.exports=import("swr")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},9796:e=>{e.exports=require("zlib")}};var t=require("../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[332,839,552,754,52],()=>s(3667));module.exports=r})();