"use strict";(()=>{var e={};e.id=157,e.ids=[157,660],e.modules={8034:(e,t,r)=>{r.a(e,async(e,l)=>{try{r.r(t),r.d(t,{config:()=>v,default:()=>p,getServerSideProps:()=>g,getStaticPaths:()=>h,getStaticProps:()=>x,reportWebVitals:()=>m,routeModule:()=>f,unstable_getServerProps:()=>k,unstable_getServerSideProps:()=>b,unstable_getStaticParams:()=>S,unstable_getStaticPaths:()=>y,unstable_getStaticProps:()=>j});var a=r(8877),s=r(4591),n=r(6021),i=r(552),o=r.n(i),d=r(4076),c=r(5289),u=e([c]);c=(u.then?(await u)():u)[0];let p=(0,n.l)(c,"default"),x=(0,n.l)(c,"getStaticProps"),h=(0,n.l)(c,"getStaticPaths"),g=(0,n.l)(c,"getServerSideProps"),v=(0,n.l)(c,"config"),m=(0,n.l)(c,"reportWebVitals"),j=(0,n.l)(c,"unstable_getStaticProps"),y=(0,n.l)(c,"unstable_getStaticPaths"),S=(0,n.l)(c,"unstable_getStaticParams"),k=(0,n.l)(c,"unstable_getServerProps"),b=(0,n.l)(c,"unstable_getServerSideProps"),f=new a.PagesRouteModule({definition:{kind:s.x.PAGES,page:"/inventory",pathname:"/inventory",bundlePath:"",filename:""},components:{App:d.default,Document:o()},userland:c});l()}catch(e){l(e)}})},5289:(e,t,r)=>{r.a(e,async(e,l)=>{try{r.r(t),r.d(t,{default:()=>v,getStaticProps:()=>m});var a=r(997),s=r(6689),n=r(5941),i=r(5460),o=r(1377),d=r(1522),c=r(6555),u=r(7029),p=r(3688),x=r(1935),h=r(4202),g=e([n,d]);[n,d]=g.then?(await g)():g;let j=e=>d.Z.get(e).then(e=>e.data);function v(){let{t:e}=(0,o.useTranslation)("common"),[t,r]=(0,s.useState)(""),[l,i]=(0,s.useState)(!1),[g,v]=(0,s.useState)("all"),[m,y]=(0,s.useState)(""),[S,k]=(0,s.useState)(null),[b,f]=(0,s.useState)(!1),[C,w]=(0,s.useState)(!1),[I,D]=(0,s.useState)(0),[P,T]=(0,s.useState)("IN"),[O,N]=(0,s.useState)(""),[_,A]=(0,s.useState)(!1),[B,z]=(0,s.useState)({shopeeItemId:"",sku:"",productName:"",currentStock:0,costPrice:0,sellingPrice:0,lowStockThreshold:10,supplier:"",location:""}),{data:M,error:W,mutate:F}=(0,n.default)(t?`/api/inventory/${t}`:null,j),{data:Z,mutate:$}=(0,n.default)(t?`/api/inventory/alerts/low-stock?shopId=${t}`:null,j),q=!M&&!W&&t,K=Array.isArray(M?.inventory)?M.inventory:[],R=Array.isArray(Z)?Z:[],L=K.filter(e=>{let t="all"===g||e.status===g,r=!m||e.productName.toLowerCase().includes(m.toLowerCase())||e.sku.toLowerCase().includes(m.toLowerCase());return t&&r}),E=M?.stats?._sum?.currentStock||0,U=M?.stats?._sum?.availableStock||0,Q=M?.stats?._sum?.reservedStock||0,H=M?.stats?._count||0,G=K.filter(e=>"LOW_STOCK"===e.status).length,V=K.filter(e=>"OUT_OF_STOCK"===e.status).length,J=async()=>{if(S&&0!==I){A(!0);try{await d.Z.post(`/api/inventory/${S.id}/adjust`,{quantity:Math.abs(I),type:P,reason:O||void 0}),(0,u.M)("Stock adjusted successfully","success"),F(),f(!1),D(0),N(""),k(null)}catch(e){(0,u.M)(e.response?.data?.error||"Failed to adjust stock","error")}A(!1)}},X=async()=>{if(!t||!B.shopeeItemId||!B.productName){(0,u.M)("Please fill in required fields","error");return}A(!0);try{await d.Z.post("/api/inventory",{shopId:t,...B}),(0,u.M)("Product added successfully","success"),F(),w(!1),z({shopeeItemId:"",sku:"",productName:"",currentStock:0,costPrice:0,sellingPrice:0,lowStockThreshold:10,supplier:"",location:""})}catch(e){(0,u.M)(e.response?.data?.error||"Failed to add product","error")}A(!1)},Y=async e=>{try{await d.Z.post(`/api/inventory/alerts/${e}/acknowledge`),(0,u.M)("Alert acknowledged","success"),$()}catch(e){(0,u.M)("Failed to acknowledge alert","error")}},ee=async e=>{try{await d.Z.post(`/api/inventory/alerts/${e}/resolve`),(0,u.M)("Alert resolved","success"),$()}catch(e){(0,u.M)("Failed to resolve alert","error")}};return(0,a.jsxs)("div",{className:"shell",children:[a.jsx(c.Z,{activeHref:"/inventory"}),a.jsx(u.Z,{}),a.jsx(p.Z,{pageName:"inventory",steps:x.yf,onComplete:()=>i(!1)}),!l&&a.jsx(p.M,{onClick:()=>{}}),(0,a.jsxs)("div",{className:"container",children:[a.jsx("div",{style:{background:"linear-gradient(135deg, rgba(245, 158, 11, 0.08) 0%, rgba(59, 130, 246, 0.08) 100%)",borderRadius:"var(--radius-xl)",padding:"40px",marginBottom:"32px",border:"1px solid var(--color-border)"},children:(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:"20px"},children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{style:{fontSize:"42px",margin:"0 0 12px 0",fontWeight:900,background:"linear-gradient(135deg, #f59e0b, #3b82f6)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:["\uD83D\uDCE6 ",e("navInventory")||"Inventory Management"]}),a.jsx("p",{style:{color:"var(--color-text-muted)",margin:0,fontSize:"16px"},children:"Track stock levels, manage products, and monitor alerts"})]}),(0,a.jsxs)("div",{style:{display:"flex",gap:"12px",alignItems:"center",flexWrap:"wrap"},children:[a.jsx(h.zx,{onClick:()=>w(!0),disabled:!t,children:"➕ Add Product"}),a.jsx(h.zx,{onClick:()=>F(),variant:"ghost",children:"\uD83D\uDD04 Refresh"})]})]})}),!t&&a.jsx(h.bZ,{variant:"info",title:e("selectShop"),children:e("enterShopIDToManageInventory")}),a.jsx("div",{style:{marginBottom:"24px"},children:a.jsx(h.II,{label:e("shopID"),value:t,onChange:e=>r(e.target.value),placeholder:e("enterYourShopID"),hint:e("shopIDHint")})}),R.length>0&&a.jsx(h.bZ,{variant:"warning",title:`${R.length} ${e("lowStockAlerts")}`,children:e("productsNeedAttention")}),t&&a.jsx(a.Fragment,{children:q?a.jsx(h.TK,{size:"lg",text:e("loadingInventory")}):W?a.jsx(h.bZ,{variant:"error",title:e("failedToLoadInventory"),children:W.message||e("unableToFetchInventoryData")}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"grid grid-4",style:{marginBottom:"32px"},children:[a.jsx(h.Rm,{label:e("totalProducts"),value:H,icon:"\uD83D\uDCE6",color:"primary"}),a.jsx(h.Rm,{label:e("totalStock"),value:E,icon:"\uD83D\uDCCA",color:"info"}),a.jsx(h.Rm,{label:e("lowStock"),value:G,icon:"⚠️",color:"warning"}),a.jsx(h.Rm,{label:e("outOfStock"),value:V,icon:"\uD83D\uDEAB",color:"error"})]}),a.jsx("div",{style:{marginBottom:"24px"},children:(0,a.jsxs)(h.Zb,{children:[a.jsx(h.Ol,{title:e("filters"),icon:"\uD83D\uDD0D"}),(0,a.jsxs)("div",{className:"grid grid-3",style:{gap:"16px"},children:[a.jsx(h.II,{label:e("search"),value:m,onChange:e=>y(e.target.value),placeholder:e("searchProductOrSKU")}),a.jsx(h.Ph,{label:e("status"),value:g,onChange:e=>v(e.target.value),options:[{value:"all",label:e("allStatus")},{value:"IN_STOCK",label:e("inStock")},{value:"LOW_STOCK",label:e("lowStock")},{value:"OUT_OF_STOCK",label:e("outOfStock")},{value:"DISCONTINUED",label:e("discontinued")}]}),a.jsx("div",{style:{display:"flex",alignItems:"flex-end",gap:"8px"},children:a.jsx(h.zx,{onClick:()=>{y(""),v("all")},variant:"ghost",fullWidth:!0,children:e("clearFilters")})})]})]})}),a.jsx("div",{style:{marginBottom:"32px"},children:a.jsx(h.Zb,{children:a.jsx(h.mQ,{tabs:[{id:"products",label:e("products"),icon:"\uD83D\uDCE6",badge:L.length,content:a.jsx("div",{children:L.length>0?a.jsx(h.iA,{columns:[{key:"sku",header:e("sku"),width:"120px"},{key:"productName",header:e("productName")},{key:"status",header:e("status"),width:"120px",render:e=>a.jsx(h.Ct,{variant:"IN_STOCK"===e.status?"success":"LOW_STOCK"===e.status?"warning":"OUT_OF_STOCK"===e.status?"error":"info",children:e.status.replace("_"," ")})},{key:"currentStock",header:e("stock"),width:"100px",render:e=>a.jsx("span",{style:{fontWeight:600,color:e.currentStock<=e.lowStockThreshold?"var(--color-error)":"var(--color-text)"},children:e.currentStock})},{key:"available",header:e("available"),width:"100px",render:e=>e.availableStock},{key:"location",header:e("location"),width:"120px",render:e=>e.location||"-"},{key:"actions",header:e("actions"),width:"150px",render:t=>a.jsx("div",{style:{display:"flex",gap:"8px"},children:a.jsx(h.zx,{size:"sm",variant:"primary",onClick:()=>{k(t),f(!0)},children:e("adjust")})})}],data:L,emptyMessage:e("noProductsFound")}):(0,a.jsxs)("div",{style:{padding:"60px",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"64px",marginBottom:"16px"},children:"\uD83D\uDCE6"}),a.jsx("h3",{style:{marginBottom:"8px"},children:e("noProductsFound")}),a.jsx("p",{style:{color:"var(--color-text-muted)",marginBottom:"24px"},children:m||"all"!==g?e("tryAdjustingFilters"):e("addFirstProductToStart")}),!m&&"all"===g&&(0,a.jsxs)(h.zx,{onClick:()=>w(!0),children:["➕ ",e("addProduct")]})]})})},{id:"alerts",label:e("alerts"),icon:"\uD83D\uDD14",badge:R.filter(e=>!e.acknowledged).length,content:a.jsx("div",{children:R.length>0?a.jsx(h.iA,{columns:[{key:"productId",header:e("product"),render:e=>{let t=K.find(t=>t.id===e.productId);return t?.productName||e.productId}},{key:"currentQty",header:e("currentStock"),width:"120px",render:e=>a.jsx(h.Ct,{variant:"error",children:e.currentQty})},{key:"threshold",header:e("threshold"),width:"100px"},{key:"notifiedAt",header:e("date"),width:"150px",render:e=>new Date(e.notifiedAt).toLocaleDateString()},{key:"status",header:"Status",width:"120px",render:t=>a.jsx(h.Ct,{variant:t.acknowledged?"info":"warning",children:t.acknowledged?e("acknowledged"):e("new")})},{key:"actions",header:"Actions",width:"180px",render:t=>(0,a.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[!t.acknowledged&&a.jsx(h.zx,{size:"sm",variant:"ghost",onClick:()=>Y(t.id),children:e("acknowledge")}),!t.resolvedAt&&a.jsx(h.zx,{size:"sm",variant:"success",onClick:()=>ee(t.id),children:e("resolve")})]})}],data:R,emptyMessage:e("noAlerts")}):(0,a.jsxs)("div",{style:{padding:"60px",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"64px",marginBottom:"16px"},children:"✅"}),a.jsx("h3",{style:{marginBottom:"8px"},children:e("noAlerts")}),a.jsx("p",{style:{color:"var(--color-text-muted)"},children:e("allProductsWellStocked")})]})})},{id:"stats",label:e("statistics"),icon:"\uD83D\uDCCA",content:(0,a.jsxs)("div",{style:{padding:"24px"},children:[a.jsx("h3",{style:{marginTop:0,marginBottom:"24px"},children:e("inventoryStatistics")}),(0,a.jsxs)("div",{className:"grid grid-2",style:{marginBottom:"32px"},children:[(0,a.jsxs)(h.Zb,{children:[a.jsx(h.Ol,{title:e("stockOverview"),icon:"\uD83D\uDCE6"}),a.jsx("div",{style:{padding:"16px"},children:(0,a.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[a.jsx("span",{children:"Total Stock"}),a.jsx("strong",{children:E})]}),(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[a.jsx("span",{children:"Available"}),a.jsx("strong",{style:{color:"var(--color-success)"},children:U})]}),(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[a.jsx("span",{children:"Reserved"}),a.jsx("strong",{style:{color:"var(--color-warning)"},children:Q})]})]})})]}),(0,a.jsxs)(h.Zb,{children:[a.jsx(h.Ol,{title:e("productStatus"),icon:"\uD83D\uDCCB"}),a.jsx("div",{style:{padding:"16px"},children:(0,a.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[a.jsx("span",{children:e("inStock")}),a.jsx(h.Ct,{variant:"success",children:K.filter(e=>"IN_STOCK"===e.status).length})]}),(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[a.jsx("span",{children:e("lowStock")}),a.jsx(h.Ct,{variant:"warning",children:G})]}),(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[a.jsx("span",{children:e("outOfStock")}),a.jsx(h.Ct,{variant:"error",children:V})]})]})})]})]}),a.jsx(h.bZ,{variant:"info",title:e("inventoryHealth"),children:0===V&&0===G?e("inventoryInGoodShape"):(0,a.jsxs)(a.Fragment,{children:[V>0&&`${V} ${e("productsOutOfStock")} `,G>0&&`${G} ${e("productsRunningLow")} `,e("considerRestocking")]})})]})}]})})})]})})]}),b&&S&&a.jsx(h.u_,{isOpen:b,onClose:()=>{f(!1),k(null),D(0),N("")},title:e("adjustStock"),size:"md",children:(0,a.jsxs)("div",{style:{padding:"24px"},children:[a.jsx("h4",{style:{marginTop:0,marginBottom:"16px"},children:S.productName}),(0,a.jsxs)("p",{style:{color:"var(--color-text-muted)",marginBottom:"24px"},children:[e("currentStock"),": ",a.jsx("strong",{children:S.currentStock})]}),a.jsx(h.Ph,{label:e("adjustmentType"),value:P,onChange:e=>T(e.target.value),options:[{value:"IN",label:e("stockIn")},{value:"OUT",label:e("stockOut")},{value:"ADJUSTMENT",label:e("adjustment")}]}),a.jsx(h.II,{label:e("quantity"),type:"number",value:I,onChange:e=>D(Number(e.target.value)),placeholder:e("enterQuantity"),hint:`${e("newStockWillBe")}: ${S.currentStock+("OUT"===P?-I:I)}`}),a.jsx(h.II,{label:e("reasonOptional"),value:O,onChange:e=>N(e.target.value),placeholder:e("reasonPlaceholder")}),(0,a.jsxs)("div",{style:{display:"flex",gap:"12px",marginTop:"24px"},children:[a.jsx(h.zx,{onClick:J,disabled:_||0===I,fullWidth:!0,children:_?e("adjusting"):e("confirmAdjustment")}),a.jsx(h.zx,{onClick:()=>{f(!1),k(null)},variant:"ghost",fullWidth:!0,children:"Cancel"})]})]})}),C&&a.jsx(h.u_,{isOpen:C,onClose:()=>w(!1),title:e("addNewProduct"),size:"lg",children:(0,a.jsxs)("div",{style:{padding:"24px"},children:[(0,a.jsxs)("div",{className:"grid grid-2",style:{gap:"16px"},children:[a.jsx(h.II,{label:`${e("shopeeItemID")} *`,value:B.shopeeItemId,onChange:e=>z({...B,shopeeItemId:e.target.value}),placeholder:"e.g., 123456789"}),a.jsx(h.II,{label:`${e("sku")} *`,value:B.sku,onChange:e=>z({...B,sku:e.target.value}),placeholder:"e.g., PROD-001"}),a.jsx(h.II,{label:`${e("productName")} *`,value:B.productName,onChange:e=>z({...B,productName:e.target.value}),placeholder:e("productNamePlaceholder"),style:{gridColumn:"1 / -1"}}),a.jsx(h.II,{label:e("initialStock"),type:"number",value:B.currentStock,onChange:e=>z({...B,currentStock:Number(e.target.value)})}),a.jsx(h.II,{label:e("lowStockThreshold"),type:"number",value:B.lowStockThreshold,onChange:e=>z({...B,lowStockThreshold:Number(e.target.value)})}),a.jsx(h.II,{label:e("costPrice"),type:"number",value:B.costPrice,onChange:e=>z({...B,costPrice:Number(e.target.value)})}),a.jsx(h.II,{label:e("sellingPrice"),type:"number",value:B.sellingPrice,onChange:e=>z({...B,sellingPrice:Number(e.target.value)})}),a.jsx(h.II,{label:e("supplier"),value:B.supplier,onChange:e=>z({...B,supplier:e.target.value}),placeholder:e("supplierName")}),a.jsx(h.II,{label:e("location"),value:B.location,onChange:e=>z({...B,location:e.target.value}),placeholder:e("locationPlaceholder")})]}),(0,a.jsxs)("div",{style:{display:"flex",gap:"12px",marginTop:"24px"},children:[a.jsx(h.zx,{onClick:X,disabled:_,fullWidth:!0,children:_?e("adding"):e("addProduct")}),a.jsx(h.zx,{onClick:()=>w(!1),variant:"ghost",fullWidth:!0,children:e("cancel")})]})]})})]})}async function m({locale:e}){return{props:{...await (0,i.serverSideTranslations)(e,["common"])}}}l()}catch(e){l(e)}})},1377:e=>{e.exports=require("next-i18next")},5460:e=>{e.exports=require("next-i18next/serverSideTranslations")},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},9816:e=>{e.exports=require("styled-jsx/style")},9648:e=>{e.exports=import("axios")},5941:e=>{e.exports=import("swr")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},9796:e=>{e.exports=require("zlib")}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),l=t.X(0,[332,839,552,754,638,555,202,438],()=>r(8034));module.exports=l})();