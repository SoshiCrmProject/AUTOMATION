(()=>{var e={};e.id=459,e.ids=[459,888,660],e.modules={8645:(e,t,s)=>{"use strict";s.a(e,async(e,r)=>{try{s.r(t),s.d(t,{config:()=>S,default:()=>u,getServerSideProps:()=>g,getStaticPaths:()=>h,getStaticProps:()=>m,reportWebVitals:()=>f,routeModule:()=>j,unstable_getServerProps:()=>v,unstable_getServerSideProps:()=>P,unstable_getStaticParams:()=>y,unstable_getStaticPaths:()=>b,unstable_getStaticProps:()=>x});var a=s(8877),o=s(4591),i=s(6021),n=s(552),p=s.n(n),l=s(5270),d=s(3102),c=e([d]);d=(c.then?(await c)():c)[0];let u=(0,i.l)(d,"default"),m=(0,i.l)(d,"getStaticProps"),h=(0,i.l)(d,"getStaticPaths"),g=(0,i.l)(d,"getServerSideProps"),S=(0,i.l)(d,"config"),f=(0,i.l)(d,"reportWebVitals"),x=(0,i.l)(d,"unstable_getStaticProps"),b=(0,i.l)(d,"unstable_getStaticPaths"),y=(0,i.l)(d,"unstable_getStaticParams"),v=(0,i.l)(d,"unstable_getServerProps"),P=(0,i.l)(d,"unstable_getServerSideProps"),j=new a.PagesRouteModule({definition:{kind:o.x.PAGES,page:"/login",pathname:"/login",bundlePath:"",filename:""},components:{App:l.default,Document:p()},userland:d});r()}catch(e){r(e)}})},1297:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var r=s(997),a=s(5632),o=s(1377);function i(){let e=(0,a.useRouter)(),{t}=(0,o.useTranslation)("common"),{locale:s,pathname:i,asPath:n,query:p}=e,l="en"===s?"ja":"en",d=t("en"===l?"langEnglish":"langJapanese"),c=t("en"===l?"langEnglishShort":"langJapaneseShort");return r.jsx("button",{className:"btn btn-ghost",style:{padding:"6px 10px",fontSize:13},onClick:()=>e.push({pathname:i,query:p},n,{locale:l}),"aria-label":t("switchLanguage",{lang:d}),children:c})}},7029:(e,t,s)=>{"use strict";s.d(t,{M:()=>n,Z:()=>p});var r=s(997),a=s(6689),o=s(1377);let i=null;function n(e,t="success"){i&&i(e,t)}function p(){let{t:e}=(0,o.useTranslation)("common"),[t,s]=(0,a.useState)([]);return(0,a.useEffect)(()=>(i=(e,t="success")=>{let r=Date.now();s(s=>[...s,{message:e,type:t,id:r}]),setTimeout(()=>{s(e=>e.filter(e=>e.id!==r))},4e3)},()=>{i=null}),[]),r.jsx("div",{style:{position:"fixed",top:20,right:20,display:"grid",gap:8,zIndex:9999},children:t.map(t=>(0,r.jsxs)("div",{className:"card",style:{minWidth:240,borderLeft:`4px solid ${"error"===t.type?"#f87171":"#22c55e"}`,background:"rgba(15,23,42,0.9)"},role:"status","aria-live":"polite",children:[r.jsx("strong",{children:"error"===t.type?e("toastError"):e("toastSuccess")}),r.jsx("p",{style:{margin:0,color:"#cbd5e1"},children:t.message})]},t.id))})}},1522:(e,t,s)=>{"use strict";s.a(e,async(e,r)=>{try{s.d(t,{Z:()=>p});var a=s(9648),o=e([a]);let i=(a=(o.then?(await o)():o)[0]).default.create({baseURL:process.env.NEXT_PUBLIC_API_URL||"http://localhost:3001"}),n=i.defaults.adapter;i.interceptors.request.use(e=>e);{let e={shops:[{id:"shop1",name:"Tokyo Shop"},{id:"shop2",name:"Osaka Shop"}],shopeeCred:{partnerId:"demo-partner-id",partnerKey:"",accessToken:"",baseUrl:"https://partner.shopeemobile.com",shopId:"shop1",shopName:"Tokyo Shop"},amazonCred:{email:"demo@example.com"},settings:{includeAmazonPoints:!1,includeDomesticShipping:!1,domesticShippingCost:0,maxShippingDays:5,minExpectedProfit:0,shopSelections:[],isActive:!0,isDryRun:!1,reviewBandPercent:0,shopOverrides:[]},orders:[],mappings:[{id:"map1",priority:1,isActive:!0,shopeeProduct:{id:"sp1",title:"Shopee Widget",sku:"SKU-1",shopeeItemId:"111",shop:{name:"Tokyo Shop"}},amazonProduct:{id:"ap1",title:"Amazon Widget",asin:"B00TEST",url:"https://amazon.co.jp/dp/B00TEST"}}],audit:[{id:"a1",action:"login",detail:{ip:"127.0.0.1"},createdAt:new Date().toISOString(),user:{email:"admin@example.com"}}],adminUsers:[{id:"u1",email:"admin@example.com",role:"admin",isActive:!0,createdAt:new Date().toISOString()},{id:"u2",email:"user@example.com",role:"user",isActive:!1,createdAt:new Date().toISOString()}]},t=new Date().toISOString();e.orders=[{id:"ord1",orderNumber:"SP-001",shop:e.shops[0],status:"pending",totalAmount:5e3,currency:"JPY",productUrl:"https://amazon.co.jp/dp/B00TEST",amazonOrder:null,errorItems:[{id:"err1",reason:"Out of stock",createdAt:t,amazonProductUrl:"https://amazon.co.jp/dp/B00TEST",productName:"Widget",shopeeOrderId:"SP-001"}]},{id:"ord2",orderNumber:"SP-002",shop:e.shops[1],status:"processed",totalAmount:12e3,currency:"JPY",productUrl:"https://amazon.co.jp/dp/B00TEST2",amazonOrder:{amazonOrderId:"AMZ-123",status:"Shipped",createdAt:t},errorItems:[]}],e.settings.shopSelections=e.shops.map(e=>({shopId:e.id,isSelected:!0})),i.defaults.adapter=async s=>{let r=(s.url||"").replace(/^https?:\/\/[^/]+/,""),a=(s.method||"get").toLowerCase(),o=(e,t=200)=>Promise.resolve({data:e,status:t,statusText:"OK",headers:{},config:s});if("/api/auth/login"===r&&"post"===a||"/api/auth/signup"===r&&"post"===a)return o({token:"mock-token"});if("/api/shops"===r&&"get"===a)return o(e.shops);if("/api/credentials/shopee"===r&&"get"===a)return o(e.shopeeCred);if("/api/credentials/shopee"===r&&"post"===a)return e.shopeeCred={...s.data},o({success:!0});if("/api/credentials/amazon"===r&&"get"===a)return o(e.amazonCred);if("/api/credentials/amazon"===r&&"post"===a)return e.amazonCred={...s.data},o({success:!0});if("/api/settings"===r&&"get"===a)return o(e.settings);if("/api/settings"===r&&"post"===a)return e.settings={...s.data,shopSelections:e.settings.shopSelections},o({success:!0});if("/api/orders/recent"===r&&"get"===a)return o(e.orders);if("/api/orders/errors"===r&&"get"===a){let t=e.orders.flatMap(e=>e.errorItems.map(t=>({...t,shopeeOrderId:e.orderNumber,productName:t.productName||"Product",createdAt:t.createdAt})));return o(t)}if(r.startsWith("/api/orders/")&&r.endsWith("/retry")&&"post"===a||r.startsWith("/api/orders/retry/")&&"post"===a||r.startsWith("/api/orders/manual/")&&"post"===a||"/api/orders/poll-now"===r&&"post"===a)return o({success:!0});if("/api/orders/errors/export"===r&&"get"===a)return o("product,reason\nWidget,Out of stock",200);if("/api/orders/processed/export"===r&&"get"===a)return o("orderNumber,status\nSP-002,Processed",200);if(r.startsWith("/api/orders/")&&"get"===a){let t=r.split("/").pop(),s=e.orders.find(e=>e.id===t);return o(s||e.orders[0])}if("/api/ops/queue"===r&&"get"===a)return o({waiting:0,active:0,failed:0,delayed:0});if("/api/ops/amazon-test"===r&&"post"===a)return o({success:!0});if("/api/ops/status"===r&&"get"===a)return o({lastOrder:t,lastAmazon:{createdAt:t,status:"ok"},lastError:{createdAt:t,reason:"Mock error"}});if("/api/mappings"===r&&"get"===a)return o(e.mappings);if("/api/mappings"===r&&"post"===a)return e.mappings.push({id:`map-${Date.now()}`,...s.data||{}}),o({success:!0});if("/api/mappings/import"===r&&"post"===a||"/api/products/shopee"===r&&"post"===a||"/api/products/amazon"===r&&"post"===a)return o({success:!0});if("/api/products/shopee"===r&&"get"===a){let t=e.mappings.map(e=>e.shopeeProduct);return o(t)}if("/api/products/amazon"===r&&"get"===a){let t=e.mappings.map(e=>e.amazonProduct);return o(t)}return"/api/admin/users"===r&&"get"===a?o(e.adminUsers):r.includes("/api/admin/users/")&&r.endsWith("/toggle")&&"post"===a||r.includes("/api/admin/users/")&&r.endsWith("/reset-password")&&"post"===a?o({success:!0}):"/api/admin/audit"===r&&"get"===a?o(e.audit):n&&"function"==typeof n?n(s):o({},404)}}i.interceptors.response.use(e=>e,e=>(e.response?.status,Promise.reject(e)));let p=i;r()}catch(e){r(e)}})},6768:e=>{"use strict";e.exports={i18n:{defaultLocale:"en",locales:["en","ja"]},reloadOnPrerender:!1}},5270:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var r=s(997),a=s(1377),o=s(5237),i=s.n(o),n=s(5632);s(5748);var p=s(7029),l=s(6768),d=s.n(l);let c=i()(()=>s.e(272).then(s.bind(s,8272)),{loadableGenerated:{modules:["_app.tsx -> ../components/OnboardingModal"]},ssr:!1,loading:()=>null}),u=(0,a.appWithTranslation)(function({Component:e,pageProps:t}){let s=(0,n.useRouter)().pathname||"",a=s.startsWith("/login")||s.startsWith("/signup");return(0,r.jsxs)("div",{className:"shell",children:[r.jsx(e,{...t}),!a&&r.jsx(c,{}),r.jsx(p.Z,{})]})},d())},3102:(e,t,s)=>{"use strict";s.a(e,async(e,r)=>{try{s.r(t),s.d(t,{default:()=>m,getStaticProps:()=>h});var a=s(997),o=s(6689),i=s(1377),n=s(5460),p=s(1297),l=s(9097),d=s.n(l),c=s(1522),u=e([c]);function m(){let{t:e}=(0,i.useTranslation)("common"),[t,s]=(0,o.useState)(""),[r,n]=(0,o.useState)(""),[l,u]=(0,o.useState)(""),[m,h]=(0,o.useState)(!0),[g,S]=(0,o.useState)(!1);(0,o.useEffect)(()=>{},[]);let f=async s=>{s.preventDefault(),u(""),S(!0);try{let e=await c.Z.post("/auth/login",{email:t,password:r});m?(localStorage.setItem("token",e.data.token),sessionStorage.removeItem("token")):(sessionStorage.setItem("token",e.data.token),localStorage.removeItem("token")),window.location.href="/dashboard"}catch(t){u(t.response?.data?.error??e("loginFailed"))}finally{S(!1)}};return a.jsx("div",{className:"container",style:{maxWidth:480},children:(0,a.jsxs)("div",{className:"card",style:{marginTop:40},children:[a.jsx(p.Z,{}),a.jsx("h2",{style:{margin:"12px 0"},children:e("login")}),a.jsx("p",{style:{color:"#cbd5e1"},children:e("loginDesc")}),(0,a.jsxs)("form",{onSubmit:f,children:[a.jsx("label",{className:"label",children:e("email")}),a.jsx("input",{className:"input",type:"email",value:t,onChange:e=>s(e.target.value),placeholder:e("email"),required:!0}),a.jsx("label",{className:"label",children:e("password")}),a.jsx("input",{className:"input",type:"password",value:r,onChange:e=>n(e.target.value),placeholder:e("password"),required:!0}),(0,a.jsxs)("label",{style:{color:"#cbd5e1",fontSize:14},children:[a.jsx("input",{type:"checkbox",checked:m,onChange:e=>h(e.target.checked),style:{marginRight:6}}),e("rememberMe")]}),l&&a.jsx("p",{style:{color:"#fca5a5"},children:l}),a.jsx("button",{className:"btn",type:"submit",style:{width:"100%",marginTop:12},children:g?e("loading"):e("login")})]}),(0,a.jsxs)("p",{style:{color:"#94a3b8",marginTop:12},children:[e("noAccount")??"No account?"," ",a.jsx(d(),{href:"/signup",style:{color:"#2563eb"},children:e("signup")})]})]})})}async function h({locale:e}){return{props:{...await (0,n.serverSideTranslations)(e,["common"])}}}c=(u.then?(await u)():u)[0],r()}catch(e){r(e)}})},5748:()=>{},1377:e=>{"use strict";e.exports=require("next-i18next")},5460:e=>{"use strict";e.exports=require("next-i18next/serverSideTranslations")},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{"use strict";e.exports=require("react")},6405:e=>{"use strict";e.exports=require("react-dom")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},9648:e=>{"use strict";e.exports=import("axios")},7147:e=>{"use strict";e.exports=require("fs")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},9796:e=>{"use strict";e.exports=require("zlib")}};var t=require("../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[332,839,552,754],()=>s(8645));module.exports=r})();